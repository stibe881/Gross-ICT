import{j,N as M,x as e,A as g,J as I}from"./index-BN9GAmQT.js";import{B as u}from"./button-B7XicF_D.js";import{I as d}from"./input-DAxyQcQ6.js";import{C as R,a as A,b as U,d as H}from"./card-DDCG5iAJ.js";import{S as f,a as v,b,c as N,d as x}from"./select-lpC4X7iX.js";import{D as k,a as S,b as F,c as K}from"./dialog-BFxkyGdG.js";import{F as O,T as W,B as Z,h as V,E as Q,C as $,a as J,b as _,f as q,p as X,d as Y,e as ee}from"./index-KUW4fVzl.js";import{F as se}from"./file-text-zOWEdpec.js";import{A as te}from"./arrow-left-DYl8JD6p.js";import{P as B}from"./plus-Bs9J4-Yt.js";import{S as ae}from"./search-DYS7RNfR.js";import{U as ce}from"./user-DNKQZcJU.js";import{B as le}from"./building-2-CncIBXM4.js";import{C as ne}from"./circle-user-ClVuwODR.js";import{E as re}from"./eye-DH5-FCbl.js";import{S as oe}from"./square-pen-CPfJwZSi.js";import{T as ie}from"./trash-2-BGEcaC5X.js";import"./index-Ci_qB1WW.js";import"./index-DYYK5dbJ.js";import"./index-DkLA8Hun.js";import"./index-FM6g0UGI.js";import"./chevron-up-CGjsbtlF.js";import"./check-B0XS7teL.js";$.register(J,_,q,X,Y,ee);function de(){const h=j.useRef(null),[p,n]=j.useState(6),[s,r]=j.useState(null),[a,i]=j.useState(!1),{data:m,isLoading:t}=M.analytics.getCustomerGrowthByMonth.useQuery({months:p}),{data:C}=M.analytics.getCustomersByMonth.useQuery({month:s||""},{enabled:!!s}),y=async()=>{if(h.current)try{const o=await V(h.current,{backgroundColor:"#000",scale:2}),l=document.createElement("a");l.download="kunden-wachstum.png",l.href=o.toDataURL(),l.click(),g.success("Chart als PNG exportiert")}catch{g.error("Fehler beim Exportieren")}},c=async()=>{if(h.current)try{const o=await V(h.current,{backgroundColor:"#000",scale:2}),l=o.toDataURL("image/png"),w=new Q({orientation:"landscape",unit:"px",format:[o.width,o.height]});w.addImage(l,"PNG",0,0,o.width,o.height),w.save("kunden-wachstum.pdf"),g.success("Chart als PDF exportiert")}catch{g.error("Fehler beim Exportieren")}},E=()=>{const o=m||[];if(o.length===0){g.error("Keine Daten zum Exportieren");return}const l=o.map(L=>`${L.month},${L.count}`).join(`
`),w=`Monat,Anzahl
`,T=new Blob([w+l],{type:"text/csv"}),z=document.createElement("a");z.download="kunden-wachstum.csv",z.href=URL.createObjectURL(T),z.click(),g.success("Daten als CSV exportiert")},G=(o,l)=>{if(l.length>0&&m){const w=l[0].index,T=m[w];r(T.fullDate),i(!0)}},D={labels:m?.map(o=>o.month)||[],datasets:[{label:"Neue Kunden",data:m?.map(o=>o.count)||[],backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:2}]},P={responsive:!0,maintainAspectRatio:!1,onClick:G,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",padding:12,titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(255, 255, 255, 0.05)"},ticks:{color:"rgba(255, 255, 255, 0.6)",stepSize:5}},x:{grid:{display:!1},ticks:{color:"rgba(255, 255, 255, 0.6)"}}}};return e.jsxs(e.Fragment,{children:[e.jsxs(R,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:167",className:"bg-white/5 border-white/10",children:[e.jsx(A,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:168",children:e.jsxs("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:169",className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsx(U,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:170",className:"text-lg",children:"Kunden-Wachstum"}),e.jsxs("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:171",className:"flex items-center gap-2",children:[e.jsxs(f,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:172",value:p.toString(),onValueChange:o=>n(parseInt(o)),children:[e.jsx(v,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:173",className:"w-[140px] h-8",children:e.jsx(b,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:174"})}),e.jsxs(N,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:176",children:[e.jsx(x,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:177",value:"3",children:"Letzte 3 Monate"}),e.jsx(x,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:178",value:"6",children:"Letzte 6 Monate"}),e.jsx(x,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:179",value:"12",children:"Letztes Jahr"}),e.jsx(x,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:180",value:"24",children:"Letzte 2 Jahre"})]})]}),e.jsx(u,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:183",variant:"ghost",size:"sm",onClick:y,className:"h-8 px-2",children:e.jsx(O,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:189",className:"h-4 w-4"})}),e.jsx(u,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:191",variant:"ghost",size:"sm",onClick:c,className:"h-8 px-2",children:e.jsx(se,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:197",className:"h-4 w-4"})}),e.jsx(u,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:199",variant:"ghost",size:"sm",onClick:E,className:"h-8 px-2",children:e.jsx(W,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:205",className:"h-4 w-4"})})]})]})}),e.jsx(H,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:210",children:t?e.jsx("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:212",className:"h-64 flex items-center justify-center",children:e.jsx("p",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:213",className:"text-muted-foreground",children:"Lade Daten..."})}):m&&m.length>0?e.jsx("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:216",ref:h,className:"h-64",children:e.jsx(Z,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:217",data:D,options:P})}):e.jsx("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:220",className:"h-64 flex items-center justify-center",children:e.jsx("p",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:221",className:"text-muted-foreground",children:"Keine Kundendaten verf√ºgbar"})})})]}),e.jsx(k,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:228",open:a,onOpenChange:i,children:e.jsxs(S,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:229",className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx(F,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:230",children:e.jsxs(K,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:231",children:["Neue Kunden - ",s&&m?.find(o=>o.fullDate===s)?.month]})}),e.jsx("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:235",className:"space-y-4",children:C&&C.length>0?e.jsxs("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:237",className:"space-y-2",children:[C.map(o=>e.jsx(R,{"data-loc":"client/src/components/CustomerGrowthChart.tsx:239",className:"p-4 bg-white/5 border-white/10",children:e.jsxs("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:240",className:"flex justify-between items-start",children:[e.jsxs("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:241",children:[e.jsx("p",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:242",className:"font-semibold",children:o.name}),e.jsx("p",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:243",className:"text-sm text-muted-foreground",children:o.email}),o.customerNumber&&e.jsxs("p",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:245",className:"text-xs text-muted-foreground",children:["Kundennr: ",o.customerNumber]})]}),e.jsxs("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:248",className:"text-right",children:[e.jsx("p",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:249",className:"text-sm capitalize",children:o.type}),e.jsx("p",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:250",className:"text-xs text-muted-foreground",children:new Date(o.createdAt).toLocaleDateString("de-CH")})]})]})},o.id)),e.jsx("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:257",className:"pt-4 border-t border-white/10",children:e.jsxs("div",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:258",className:"flex justify-between items-center font-bold",children:[e.jsx("span",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:259",children:"Gesamt:"}),e.jsxs("span",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:260",children:[C.length," neue Kunden"]})]})})]}):e.jsx("p",{"data-loc":"client/src/components/CustomerGrowthChart.tsx:265",className:"text-muted-foreground text-center py-8",children:"Keine neuen Kunden in diesem Monat"})})]})})]})}function Le(){const[,h]=I(),[p,n]=j.useState(""),[s,r]=j.useState("all"),[a,i]=j.useState(!1),[m,t]=j.useState(null),[C,y]=j.useState(null),{data:c,isLoading:E,refetch:G}=M.customers.all.useQuery({search:p||void 0}),D=c?.filter(l=>s==="all"||l.type===s),P=l=>{t(l)},o=l=>{y(l)};return e.jsx("div",{"data-loc":"client/src/pages/CRM.tsx:44",className:"min-h-screen bg-background",children:e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:45",className:"container mx-auto py-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:46",className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:47",className:"flex items-center gap-4",children:[e.jsxs(u,{"data-loc":"client/src/pages/CRM.tsx:48",variant:"ghost",onClick:()=>h("/admin"),size:"sm",children:[e.jsx(te,{"data-loc":"client/src/pages/CRM.tsx:53",className:"h-4 w-4 mr-2"}),"Zur√ºck"]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:56",children:[e.jsx("h1",{"data-loc":"client/src/pages/CRM.tsx:57",className:"text-3xl font-bold",children:"Kundenverwaltung (CRM)"}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:58",className:"text-muted-foreground mt-1",children:"Verwalten Sie Ihre Kundendaten und Kontakte"})]})]}),e.jsxs(u,{"data-loc":"client/src/pages/CRM.tsx:61",onClick:()=>i(!0),className:"gap-2",children:[e.jsx(B,{"data-loc":"client/src/pages/CRM.tsx:62",className:"w-4 h-4"}),"Neuer Kunde"]})]}),e.jsx("div",{"data-loc":"client/src/pages/CRM.tsx:68",className:"mb-8",children:e.jsx(de,{"data-loc":"client/src/pages/CRM.tsx:69"})}),e.jsx(R,{"data-loc":"client/src/pages/CRM.tsx:73",className:"p-4 mb-6",children:e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:74",className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:75",className:"relative md:col-span-2",children:[e.jsx(ae,{"data-loc":"client/src/pages/CRM.tsx:76",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:77",placeholder:"Suche nach Name, E-Mail oder Firma...",value:p,onChange:l=>n(l.target.value),className:"pl-10"})]}),e.jsxs(f,{"data-loc":"client/src/pages/CRM.tsx:84",value:s,onValueChange:r,children:[e.jsx(v,{"data-loc":"client/src/pages/CRM.tsx:85",children:e.jsx(b,{"data-loc":"client/src/pages/CRM.tsx:86",placeholder:"Kundentyp"})}),e.jsxs(N,{"data-loc":"client/src/pages/CRM.tsx:88",children:[e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:89",value:"all",children:"Alle Typen"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:90",value:"company",children:"Firmen"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:91",value:"individual",children:"Privatpersonen"})]})]})]})}),E?e.jsx("div",{"data-loc":"client/src/pages/CRM.tsx:99",className:"text-center py-12",children:e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:100",className:"text-muted-foreground",children:"Lade Kunden..."})}):!D||D.length===0?e.jsxs(R,{"data-loc":"client/src/pages/CRM.tsx:103",className:"p-12 text-center",children:[e.jsx(ce,{"data-loc":"client/src/pages/CRM.tsx:104",className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{"data-loc":"client/src/pages/CRM.tsx:105",className:"text-lg font-semibold mb-2",children:"Keine Kunden gefunden"}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:106",className:"text-muted-foreground mb-4",children:p||s!=="all"?"Versuchen Sie andere Suchkriterien.":"Erstellen Sie Ihren ersten Kunden, um loszulegen."}),!p&&s==="all"&&e.jsxs(u,{"data-loc":"client/src/pages/CRM.tsx:112",onClick:()=>i(!0),children:[e.jsx(B,{"data-loc":"client/src/pages/CRM.tsx:113",className:"w-4 h-4 mr-2"}),"Ersten Kunden erstellen"]})]}):e.jsx("div",{"data-loc":"client/src/pages/CRM.tsx:119",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(l=>e.jsxs(R,{"data-loc":"client/src/pages/CRM.tsx:121",className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{"data-loc":"client/src/pages/CRM.tsx:122",className:"flex items-start justify-between mb-4",children:e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:123",className:"flex items-center gap-3",children:[e.jsx("div",{"data-loc":"client/src/pages/CRM.tsx:124",className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:l.type==="company"?e.jsx(le,{"data-loc":"client/src/pages/CRM.tsx:126",className:"w-6 h-6 text-primary"}):e.jsx(ne,{"data-loc":"client/src/pages/CRM.tsx:128",className:"w-6 h-6 text-primary"})}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:131",children:[e.jsx("h3",{"data-loc":"client/src/pages/CRM.tsx:132",className:"font-semibold",children:l.name}),l.customerNumber&&e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:134",className:"text-xs text-muted-foreground",children:["#",l.customerNumber]})]})]})}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:140",className:"space-y-2 text-sm mb-4",children:[l.type==="company"&&l.contactPerson&&e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:142",className:"text-muted-foreground",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:143",children:"Kontakt:"})," ",l.contactPerson]}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:146",className:"text-muted-foreground truncate",children:l.email}),l.phone&&e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:147",className:"text-muted-foreground",children:l.phone}),l.city&&e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:149",className:"text-muted-foreground",children:[l.postalCode," ",l.city]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:155",className:"flex gap-2",children:[e.jsxs(u,{"data-loc":"client/src/pages/CRM.tsx:156",variant:"outline",size:"sm",className:"flex-1",onClick:()=>P(l.id),children:[e.jsx(re,{"data-loc":"client/src/pages/CRM.tsx:162",className:"w-4 h-4 mr-1"}),"Ansehen"]}),e.jsx(u,{"data-loc":"client/src/pages/CRM.tsx:165",variant:"outline",size:"sm",onClick:()=>o(l.id),children:e.jsx(oe,{"data-loc":"client/src/pages/CRM.tsx:170",className:"w-4 h-4"})})]})]},l.id))}),e.jsx(xe,{"data-loc":"client/src/pages/CRM.tsx:179",open:a,onOpenChange:i,onSuccess:()=>{G(),i(!1)}}),C&&e.jsx(me,{"data-loc":"client/src/pages/CRM.tsx:190",customerId:C,onClose:()=>y(null),onSuccess:()=>{G(),y(null)}}),m&&e.jsx(pe,{"data-loc":"client/src/pages/CRM.tsx:202",customerId:m,onClose:()=>t(null)})]})})}function xe({open:h,onOpenChange:p,onSuccess:n}){const[s,r]=j.useState({type:"company",name:"",customerNumber:"",contactPerson:"",email:"",phone:"",address:"",postalCode:"",city:"",country:"Schweiz",language:"de",currency:"CHF",paymentTermsDays:30,defaultVatRate:"8.10",defaultDiscount:"0.00",notes:""}),a=M.customers.create.useMutation({onSuccess:()=>{g.success("Kunde erfolgreich erstellt"),n(),i()},onError:t=>{g.error(`Fehler: ${t.message}`)}}),i=()=>{r({type:"company",name:"",customerNumber:"",contactPerson:"",email:"",phone:"",address:"",postalCode:"",city:"",country:"Schweiz",language:"de",currency:"CHF",paymentTermsDays:30,defaultVatRate:"8.10",defaultDiscount:"0.00",notes:""})},m=()=>{if(!s.name||!s.email){g.error("Bitte f√ºllen Sie Name und E-Mail aus");return}a.mutate(s)};return e.jsx(k,{"data-loc":"client/src/pages/CRM.tsx:275",open:h,onOpenChange:p,children:e.jsxs(S,{"data-loc":"client/src/pages/CRM.tsx:276",className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(F,{"data-loc":"client/src/pages/CRM.tsx:277",children:e.jsx(K,{"data-loc":"client/src/pages/CRM.tsx:278",children:"Neuen Kunden erstellen"})}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:281",className:"space-y-4 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:282",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:283",className:"text-sm font-medium mb-2 block",children:"Kundentyp *"}),e.jsxs(f,{"data-loc":"client/src/pages/CRM.tsx:284",value:s.type,onValueChange:t=>r({...s,type:t}),children:[e.jsx(v,{"data-loc":"client/src/pages/CRM.tsx:285",children:e.jsx(b,{"data-loc":"client/src/pages/CRM.tsx:286"})}),e.jsxs(N,{"data-loc":"client/src/pages/CRM.tsx:288",children:[e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:289",value:"company",children:"Firma"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:290",value:"individual",children:"Privatperson"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:295",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:296",children:[e.jsxs("label",{"data-loc":"client/src/pages/CRM.tsx:297",className:"text-sm font-medium mb-2 block",children:[s.type==="company"?"Firmenname":"Name"," *"]}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:300",value:s.name,onChange:t=>r({...s,name:t.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:305",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:306",className:"text-sm font-medium mb-2 block",children:"Kundennummer"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:307",value:s.customerNumber,onChange:t=>r({...s,customerNumber:t.target.value}),placeholder:"Optional - wird automatisch generiert"})]})]}),s.type==="company"&&e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:316",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:317",className:"text-sm font-medium mb-2 block",children:"Kontaktperson"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:318",value:s.contactPerson,onChange:t=>r({...s,contactPerson:t.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:325",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:326",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:327",className:"text-sm font-medium mb-2 block",children:"E-Mail *"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:328",type:"email",value:s.email,onChange:t=>r({...s,email:t.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:334",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:335",className:"text-sm font-medium mb-2 block",children:"Telefon"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:336",value:s.phone,onChange:t=>r({...s,phone:t.target.value})})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:343",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:344",className:"text-sm font-medium mb-2 block",children:"Adresse"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:345",value:s.address,onChange:t=>r({...s,address:t.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:351",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:352",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:353",className:"text-sm font-medium mb-2 block",children:"PLZ"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:354",value:s.postalCode,onChange:t=>r({...s,postalCode:t.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:359",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:360",className:"text-sm font-medium mb-2 block",children:"Stadt"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:361",value:s.city,onChange:t=>r({...s,city:t.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:366",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:367",className:"text-sm font-medium mb-2 block",children:"Land"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:368",value:s.country,onChange:t=>r({...s,country:t.target.value})})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:375",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:376",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:377",className:"text-sm font-medium mb-2 block",children:"Sprache f√ºr Rechnungen"}),e.jsxs(f,{"data-loc":"client/src/pages/CRM.tsx:378",value:s.language,onValueChange:t=>r({...s,language:t}),children:[e.jsx(v,{"data-loc":"client/src/pages/CRM.tsx:379",children:e.jsx(b,{"data-loc":"client/src/pages/CRM.tsx:380"})}),e.jsxs(N,{"data-loc":"client/src/pages/CRM.tsx:382",children:[e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:383",value:"de",children:"üá©üá™ Deutsch"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:384",value:"en",children:"üá¨üáß English"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:385",value:"fr",children:"üá´üá∑ Fran√ßais"})]})]}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:388",className:"text-xs text-muted-foreground mt-1",children:"Rechnungen und E-Mails werden in dieser Sprache versendet"})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:390",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:391",className:"text-sm font-medium mb-2 block",children:"W√§hrung"}),e.jsxs(f,{"data-loc":"client/src/pages/CRM.tsx:392",value:s.currency,onValueChange:t=>r({...s,currency:t}),children:[e.jsx(v,{"data-loc":"client/src/pages/CRM.tsx:393",children:e.jsx(b,{"data-loc":"client/src/pages/CRM.tsx:394"})}),e.jsxs(N,{"data-loc":"client/src/pages/CRM.tsx:396",children:[e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:397",value:"CHF",children:"CHF - Schweizer Franken"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:398",value:"EUR",children:"EUR - Euro"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:399",value:"USD",children:"USD - US Dollar"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:400",value:"GBP",children:"GBP - Britisches Pfund"})]})]}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:403",className:"text-xs text-muted-foreground mt-1",children:"Standard-W√§hrung f√ºr Rechnungen"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:407",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:408",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:409",className:"text-sm font-medium mb-2 block",children:"Zahlungsziel (Tage)"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:410",type:"number",value:s.paymentTermsDays,onChange:t=>r({...s,paymentTermsDays:parseInt(t.target.value)||30})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:416",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:417",className:"text-sm font-medium mb-2 block",children:"Standard MwSt (%)"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:418",value:s.defaultVatRate,onChange:t=>r({...s,defaultVatRate:t.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:423",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:424",className:"text-sm font-medium mb-2 block",children:"Standard Rabatt (%)"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:425",value:s.defaultDiscount,onChange:t=>r({...s,defaultDiscount:t.target.value})})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:432",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:433",className:"text-sm font-medium mb-2 block",children:"Notizen"}),e.jsx("textarea",{"data-loc":"client/src/pages/CRM.tsx:434",className:"w-full min-h-[80px] px-3 py-2 rounded-md border border-input bg-background",value:s.notes,onChange:t=>r({...s,notes:t.target.value}),placeholder:"Interne Notizen..."})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:442",className:"flex justify-end gap-2 pt-4",children:[e.jsx(u,{"data-loc":"client/src/pages/CRM.tsx:443",variant:"outline",onClick:()=>p(!1),children:"Abbrechen"}),e.jsx(u,{"data-loc":"client/src/pages/CRM.tsx:446",onClick:m,disabled:a.isPending,children:a.isPending?"Erstelle...":"Kunde erstellen"})]})]})]})})}function me({customerId:h,onClose:p,onSuccess:n}){const{data:s,isLoading:r}=M.customers.byId.useQuery({id:h}),[a,i]=j.useState(null),m=M.customers.update.useMutation({onSuccess:()=>{g.success("Kunde erfolgreich aktualisiert"),n()},onError:c=>{g.error(`Fehler: ${c.message}`)}}),t=M.customers.delete.useMutation({onSuccess:()=>{g.success("Kunde erfolgreich gel√∂scht"),n()},onError:c=>{g.error(`Fehler: ${c.message}`)}});s&&!a&&i({type:s.type,name:s.name,customerNumber:s.customerNumber||"",contactPerson:s.contactPerson||"",email:s.email,phone:s.phone||"",address:s.address||"",postalCode:s.postalCode||"",city:s.city||"",country:s.country||"Schweiz",language:s.language||"de",currency:s.currency||"CHF",paymentTermsDays:s.paymentTermsDays||30,defaultVatRate:s.defaultVatRate||"8.10",defaultDiscount:s.defaultDiscount||"0.00",notes:s.notes||""});const C=()=>{if(!a.name||!a.email){g.error("Bitte f√ºllen Sie Name und E-Mail aus");return}m.mutate({id:h,...a})},y=()=>{confirm("M√∂chten Sie diesen Kunden wirklich l√∂schen? Alle zugeh√∂rigen Rechnungen bleiben erhalten.")&&t.mutate({id:h})};return r||!a?e.jsx(k,{"data-loc":"client/src/pages/CRM.tsx:523",open:!0,onOpenChange:p,children:e.jsx(S,{"data-loc":"client/src/pages/CRM.tsx:524",children:e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:525",children:"Lade Kundendaten..."})})}):e.jsx(k,{"data-loc":"client/src/pages/CRM.tsx:532",open:!0,onOpenChange:p,children:e.jsxs(S,{"data-loc":"client/src/pages/CRM.tsx:533",className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(F,{"data-loc":"client/src/pages/CRM.tsx:534",children:e.jsx(K,{"data-loc":"client/src/pages/CRM.tsx:535",children:"Kunde bearbeiten"})}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:538",className:"space-y-4 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:540",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:541",className:"text-sm font-medium mb-2 block",children:"Kundentyp *"}),e.jsxs(f,{"data-loc":"client/src/pages/CRM.tsx:542",value:a.type,onValueChange:c=>i({...a,type:c}),children:[e.jsx(v,{"data-loc":"client/src/pages/CRM.tsx:543",children:e.jsx(b,{"data-loc":"client/src/pages/CRM.tsx:544"})}),e.jsxs(N,{"data-loc":"client/src/pages/CRM.tsx:546",children:[e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:547",value:"company",children:"Firma"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:548",value:"individual",children:"Privatperson"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:553",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:554",children:[e.jsxs("label",{"data-loc":"client/src/pages/CRM.tsx:555",className:"text-sm font-medium mb-2 block",children:[a.type==="company"?"Firmenname":"Name"," *"]}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:558",value:a.name,onChange:c=>i({...a,name:c.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:563",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:564",className:"text-sm font-medium mb-2 block",children:"Kundennummer"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:565",value:a.customerNumber,onChange:c=>i({...a,customerNumber:c.target.value})})]})]}),a.type==="company"&&e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:573",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:574",className:"text-sm font-medium mb-2 block",children:"Kontaktperson"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:575",value:a.contactPerson,onChange:c=>i({...a,contactPerson:c.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:582",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:583",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:584",className:"text-sm font-medium mb-2 block",children:"E-Mail *"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:585",type:"email",value:a.email,onChange:c=>i({...a,email:c.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:591",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:592",className:"text-sm font-medium mb-2 block",children:"Telefon"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:593",value:a.phone,onChange:c=>i({...a,phone:c.target.value})})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:600",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:601",className:"text-sm font-medium mb-2 block",children:"Adresse"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:602",value:a.address,onChange:c=>i({...a,address:c.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:608",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:609",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:610",className:"text-sm font-medium mb-2 block",children:"PLZ"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:611",value:a.postalCode,onChange:c=>i({...a,postalCode:c.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:616",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:617",className:"text-sm font-medium mb-2 block",children:"Stadt"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:618",value:a.city,onChange:c=>i({...a,city:c.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:623",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:624",className:"text-sm font-medium mb-2 block",children:"Land"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:625",value:a.country,onChange:c=>i({...a,country:c.target.value})})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:632",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:633",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:634",className:"text-sm font-medium mb-2 block",children:"Sprache f√ºr Rechnungen"}),e.jsxs(f,{"data-loc":"client/src/pages/CRM.tsx:635",value:a.language,onValueChange:c=>i({...a,language:c}),children:[e.jsx(v,{"data-loc":"client/src/pages/CRM.tsx:636",children:e.jsx(b,{"data-loc":"client/src/pages/CRM.tsx:637"})}),e.jsxs(N,{"data-loc":"client/src/pages/CRM.tsx:639",children:[e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:640",value:"de",children:"üá©üá™ Deutsch"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:641",value:"en",children:"üá¨üáß English"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:642",value:"fr",children:"üá´üá∑ Fran√ßais"})]})]}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:645",className:"text-xs text-muted-foreground mt-1",children:"Rechnungen und E-Mails werden in dieser Sprache versendet"})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:647",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:648",className:"text-sm font-medium mb-2 block",children:"W√§hrung"}),e.jsxs(f,{"data-loc":"client/src/pages/CRM.tsx:649",value:a.currency,onValueChange:c=>i({...a,currency:c}),children:[e.jsx(v,{"data-loc":"client/src/pages/CRM.tsx:650",children:e.jsx(b,{"data-loc":"client/src/pages/CRM.tsx:651"})}),e.jsxs(N,{"data-loc":"client/src/pages/CRM.tsx:653",children:[e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:654",value:"CHF",children:"CHF - Schweizer Franken"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:655",value:"EUR",children:"EUR - Euro"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:656",value:"USD",children:"USD - US Dollar"}),e.jsx(x,{"data-loc":"client/src/pages/CRM.tsx:657",value:"GBP",children:"GBP - Britisches Pfund"})]})]}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:660",className:"text-xs text-muted-foreground mt-1",children:"Standard-W√§hrung f√ºr Rechnungen"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:664",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:665",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:666",className:"text-sm font-medium mb-2 block",children:"Zahlungsziel (Tage)"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:667",type:"number",value:a.paymentTermsDays,onChange:c=>i({...a,paymentTermsDays:parseInt(c.target.value)||30})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:673",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:674",className:"text-sm font-medium mb-2 block",children:"Standard MwSt (%)"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:675",value:a.defaultVatRate,onChange:c=>i({...a,defaultVatRate:c.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:680",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:681",className:"text-sm font-medium mb-2 block",children:"Standard Rabatt (%)"}),e.jsx(d,{"data-loc":"client/src/pages/CRM.tsx:682",value:a.defaultDiscount,onChange:c=>i({...a,defaultDiscount:c.target.value})})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:689",children:[e.jsx("label",{"data-loc":"client/src/pages/CRM.tsx:690",className:"text-sm font-medium mb-2 block",children:"Notizen"}),e.jsx("textarea",{"data-loc":"client/src/pages/CRM.tsx:691",className:"w-full min-h-[80px] px-3 py-2 rounded-md border border-input bg-background",value:a.notes,onChange:c=>i({...a,notes:c.target.value}),placeholder:"Interne Notizen..."})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:699",className:"flex justify-between pt-4",children:[e.jsxs(u,{"data-loc":"client/src/pages/CRM.tsx:700",variant:"destructive",onClick:y,disabled:t.isPending,children:[e.jsx(ie,{"data-loc":"client/src/pages/CRM.tsx:705",className:"w-4 h-4 mr-2"}),"L√∂schen"]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:708",className:"flex gap-2",children:[e.jsx(u,{"data-loc":"client/src/pages/CRM.tsx:709",variant:"outline",onClick:p,children:"Abbrechen"}),e.jsx(u,{"data-loc":"client/src/pages/CRM.tsx:712",onClick:C,disabled:m.isPending,children:m.isPending?"Speichere...":"Speichern"})]})]})]})]})})}function pe({customerId:h,onClose:p}){const{data:n,isLoading:s}=M.customers.byId.useQuery({id:h}),{data:r}=M.invoices.all.useQuery({customerId:h});if(s||!n)return e.jsx(k,{"data-loc":"client/src/pages/CRM.tsx:730",open:!0,onOpenChange:p,children:e.jsx(S,{"data-loc":"client/src/pages/CRM.tsx:731",children:e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:732",children:"Lade Kundendaten..."})})});const a=r?.reduce((t,C)=>t+parseFloat(C.totalAmount),0)||0,i=r?.filter(t=>t.status!=="paid"&&t.status!=="cancelled").length||0,m=r?.filter(t=>t.status==="paid").length||0;return e.jsx(k,{"data-loc":"client/src/pages/CRM.tsx:743",open:!0,onOpenChange:p,children:e.jsxs(S,{"data-loc":"client/src/pages/CRM.tsx:744",className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(F,{"data-loc":"client/src/pages/CRM.tsx:745",children:e.jsx(K,{"data-loc":"client/src/pages/CRM.tsx:746",children:"Kundendetails"})}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:749",className:"space-y-6 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:751",className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:752",children:[e.jsx("h3",{"data-loc":"client/src/pages/CRM.tsx:753",className:"font-semibold mb-3",children:"Kontaktinformationen"}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:754",className:"space-y-2 text-sm",children:[e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:755",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:755",children:"Typ:"})," ",n.type==="company"?"Firma":"Privatperson"]}),e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:756",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:756",children:"Name:"})," ",n.name]}),n.customerNumber&&e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:757",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:757",children:"Kundennummer:"})," ",n.customerNumber]}),n.contactPerson&&e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:758",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:758",children:"Kontaktperson:"})," ",n.contactPerson]}),e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:759",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:759",children:"E-Mail:"})," ",n.email]}),n.phone&&e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:760",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:760",children:"Telefon:"})," ",n.phone]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:763",children:[e.jsx("h3",{"data-loc":"client/src/pages/CRM.tsx:764",className:"font-semibold mb-3",children:"Adresse & Einstellungen"}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:765",className:"space-y-2 text-sm",children:[n.address&&e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:766",children:n.address}),n.city&&e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:767",children:[n.postalCode," ",n.city]}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:768",children:n.country}),e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:769",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:769",children:"Zahlungsziel:"})," ",n.paymentTermsDays," Tage"]}),e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:770",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:770",children:"Standard MwSt:"})," ",n.defaultVatRate,"%"]}),parseFloat(n.defaultDiscount)>0&&e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:772",children:[e.jsx("strong",{"data-loc":"client/src/pages/CRM.tsx:772",children:"Standard Rabatt:"})," ",n.defaultDiscount,"%"]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:779",children:[e.jsx("h3",{"data-loc":"client/src/pages/CRM.tsx:780",className:"font-semibold mb-3",children:"Statistiken"}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:781",className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(R,{"data-loc":"client/src/pages/CRM.tsx:782",className:"p-4",children:[e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:783",className:"text-sm text-muted-foreground",children:"Gesamtumsatz"}),e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:784",className:"text-2xl font-bold",children:[a.toFixed(2)," CHF"]})]}),e.jsxs(R,{"data-loc":"client/src/pages/CRM.tsx:786",className:"p-4",children:[e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:787",className:"text-sm text-muted-foreground",children:"Rechnungen"}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:788",className:"text-2xl font-bold",children:r?.length||0})]}),e.jsxs(R,{"data-loc":"client/src/pages/CRM.tsx:790",className:"p-4",children:[e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:791",className:"text-sm text-muted-foreground",children:"Bezahlt"}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:792",className:"text-2xl font-bold text-green-600",children:m})]}),e.jsxs(R,{"data-loc":"client/src/pages/CRM.tsx:794",className:"p-4",children:[e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:795",className:"text-sm text-muted-foreground",children:"Offen"}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:796",className:"text-2xl font-bold text-orange-600",children:i})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:802",children:[e.jsx("h3",{"data-loc":"client/src/pages/CRM.tsx:803",className:"font-semibold mb-3",children:"Rechnungshistorie"}),!r||r.length===0?e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:805",className:"text-sm text-muted-foreground",children:"Keine Rechnungen vorhanden"}):e.jsx("div",{"data-loc":"client/src/pages/CRM.tsx:807",className:"space-y-2 max-h-[300px] overflow-y-auto",children:r.map(t=>e.jsx(R,{"data-loc":"client/src/pages/CRM.tsx:809",className:"p-3",children:e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:810",className:"flex justify-between items-center",children:[e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:811",children:[e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:812",className:"font-medium",children:t.invoiceNumber}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:813",className:"text-sm text-muted-foreground",children:new Date(t.invoiceDate).toLocaleDateString("de-CH")})]}),e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:817",className:"text-right",children:[e.jsxs("p",{"data-loc":"client/src/pages/CRM.tsx:818",className:"font-semibold",children:[parseFloat(t.totalAmount).toFixed(2)," CHF"]}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:819",className:"text-sm",children:e.jsx("span",{"data-loc":"client/src/pages/CRM.tsx:820",className:`px-2 py-0.5 rounded-full text-xs ${t.status==="paid"?"bg-green-100 text-green-800":t.status==="overdue"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.status})})]})]})},t.id))})]}),n.notes&&e.jsxs("div",{"data-loc":"client/src/pages/CRM.tsx:837",children:[e.jsx("h3",{"data-loc":"client/src/pages/CRM.tsx:838",className:"font-semibold mb-3",children:"Notizen"}),e.jsx("p",{"data-loc":"client/src/pages/CRM.tsx:839",className:"text-sm text-muted-foreground whitespace-pre-wrap",children:n.notes})]}),e.jsx("div",{"data-loc":"client/src/pages/CRM.tsx:843",className:"flex justify-end pt-4",children:e.jsx(u,{"data-loc":"client/src/pages/CRM.tsx:844",variant:"outline",onClick:p,children:"Schlie√üen"})})]})]})})}export{Le as default};
