import{j as y,N as o,A as s,x as t,L as n}from"./index-BN9GAmQT.js";import{B as e}from"./button-B7XicF_D.js";import{C as d}from"./card-DDCG5iAJ.js";import{B as g}from"./badge-DuBy3M6P.js";import{A as w}from"./arrow-left-DYl8JD6p.js";import{P as x}from"./plus-Bs9J4-Yt.js";import{M as u}from"./mail-fgvT38PL.js";import{U as v}from"./users-BEPVjVsG.js";import{C as b}from"./clock-C0SPg0PF.js";import{P as k,a as C}from"./play-l-NmOMZ4.js";import{T as S}from"./trash-2-BGEcaC5X.js";import"./index-Ci_qB1WW.js";function Q(){const[p,E]=y.useState(1),h=20,{data:i,isLoading:A,refetch:r}=o.newsletterAutomation.list.useQuery({page:p,pageSize:h}),l=o.newsletterAutomation.toggleStatus.useMutation({onSuccess:()=>{s.success("Automation status updated"),r()},onError:a=>{s.error(a.message||"Failed to update status")}}),m=o.newsletterAutomation.delete.useMutation({onSuccess:()=>{s.success("Automation deleted"),r()},onError:a=>{s.error(a.message||"Failed to delete automation")}}),M=(a,c)=>{const N=c==="active"?"paused":"active";l.mutate({id:a,status:N})},j=(a,c)=>{confirm(`Are you sure you want to delete automation "${c}"?`)&&m.mutate({id:a})},f=a=>{switch(a){case"welcome":return"Welcome Email";case"birthday":return"Birthday";case"re_engagement":return"Re-Engagement";case"custom":return"Custom Trigger";default:return a}};return t.jsx("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:75",className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-6",children:t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:76",className:"max-w-7xl mx-auto",children:[t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:78",className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:79",className:"flex items-center gap-4",children:[t.jsx(n,{"data-loc":"client/src/pages/AutomationManagement.tsx:80",href:"/admin/newsletter",children:t.jsx(e,{"data-loc":"client/src/pages/AutomationManagement.tsx:81",variant:"ghost",size:"icon",children:t.jsx(w,{"data-loc":"client/src/pages/AutomationManagement.tsx:82",className:"w-5 h-5"})})}),t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:85",children:[t.jsx("h1",{"data-loc":"client/src/pages/AutomationManagement.tsx:86",className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Email Automations"}),t.jsx("p",{"data-loc":"client/src/pages/AutomationManagement.tsx:89",className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage automated email workflows and sequences"})]})]}),t.jsx(n,{"data-loc":"client/src/pages/AutomationManagement.tsx:94",href:"/admin/automation/create",children:t.jsxs(e,{"data-loc":"client/src/pages/AutomationManagement.tsx:95",className:"gap-2",children:[t.jsx(x,{"data-loc":"client/src/pages/AutomationManagement.tsx:96",className:"w-4 h-4"}),"Create Automation"]})})]}),A?t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:104",className:"text-center py-12",children:[t.jsx("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:105",className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),t.jsx("p",{"data-loc":"client/src/pages/AutomationManagement.tsx:106",className:"text-gray-600 dark:text-gray-400 mt-4",children:"Loading automations..."})]}):i?.automations.length===0?t.jsxs(d,{"data-loc":"client/src/pages/AutomationManagement.tsx:111",className:"p-12 text-center",children:[t.jsx(u,{"data-loc":"client/src/pages/AutomationManagement.tsx:112",className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{"data-loc":"client/src/pages/AutomationManagement.tsx:113",className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No automations yet"}),t.jsx("p",{"data-loc":"client/src/pages/AutomationManagement.tsx:116",className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first automation to start sending automated emails"}),t.jsx(n,{"data-loc":"client/src/pages/AutomationManagement.tsx:119",href:"/admin/automation/create",children:t.jsxs(e,{"data-loc":"client/src/pages/AutomationManagement.tsx:120",children:[t.jsx(x,{"data-loc":"client/src/pages/AutomationManagement.tsx:121",className:"w-4 h-4 mr-2"}),"Create Automation"]})})]}):t.jsx("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:127",className:"space-y-4",children:i?.automations.map(a=>t.jsx(d,{"data-loc":"client/src/pages/AutomationManagement.tsx:129",className:"p-6 hover:shadow-lg transition-shadow",children:t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:130",className:"flex items-start justify-between",children:[t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:131",className:"flex-1",children:[t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:132",className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{"data-loc":"client/src/pages/AutomationManagement.tsx:133",className:"text-xl font-semibold text-gray-900 dark:text-white",children:a.name}),t.jsx(g,{"data-loc":"client/src/pages/AutomationManagement.tsx:136",variant:a.status==="active"?"default":"secondary",children:a.status}),t.jsx(g,{"data-loc":"client/src/pages/AutomationManagement.tsx:141",variant:"outline",children:f(a.triggerType)})]}),a.description&&t.jsx("p",{"data-loc":"client/src/pages/AutomationManagement.tsx:147",className:"text-gray-600 dark:text-gray-400 mb-4",children:a.description}),t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:152",className:"flex items-center gap-6 text-sm text-gray-600 dark:text-gray-400",children:[t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:153",className:"flex items-center gap-2",children:[t.jsx(u,{"data-loc":"client/src/pages/AutomationManagement.tsx:154",className:"w-4 h-4"}),t.jsxs("span",{"data-loc":"client/src/pages/AutomationManagement.tsx:155",children:[a.stepCount||0," steps"]})]}),a.segmentId&&t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:158",className:"flex items-center gap-2",children:[t.jsx(v,{"data-loc":"client/src/pages/AutomationManagement.tsx:159",className:"w-4 h-4"}),t.jsxs("span",{"data-loc":"client/src/pages/AutomationManagement.tsx:160",children:["Segment #",a.segmentId]})]}),t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:163",className:"flex items-center gap-2",children:[t.jsx(b,{"data-loc":"client/src/pages/AutomationManagement.tsx:164",className:"w-4 h-4"}),t.jsxs("span",{"data-loc":"client/src/pages/AutomationManagement.tsx:165",children:["Created ",new Date(a.createdAt).toLocaleDateString()]})]})]})]}),t.jsxs("div",{"data-loc":"client/src/pages/AutomationManagement.tsx:172",className:"flex items-center gap-2",children:[t.jsx(e,{"data-loc":"client/src/pages/AutomationManagement.tsx:173",variant:"outline",size:"icon",onClick:()=>M(a.id,a.status),disabled:l.isPending,children:a.status==="active"?t.jsx(k,{"data-loc":"client/src/pages/AutomationManagement.tsx:182",className:"w-4 h-4"}):t.jsx(C,{"data-loc":"client/src/pages/AutomationManagement.tsx:184",className:"w-4 h-4"})}),t.jsx(n,{"data-loc":"client/src/pages/AutomationManagement.tsx:187",href:`/admin/automation/edit/${a.id}`,children:t.jsx(e,{"data-loc":"client/src/pages/AutomationManagement.tsx:188",variant:"outline",children:"Edit"})}),t.jsx(e,{"data-loc":"client/src/pages/AutomationManagement.tsx:190",variant:"outline",size:"icon",onClick:()=>j(a.id,a.name),disabled:m.isPending,children:t.jsx(S,{"data-loc":"client/src/pages/AutomationManagement.tsx:196",className:"w-4 h-4 text-red-500"})})]})]})},a.id))}),!1]})})}export{Q as default};
