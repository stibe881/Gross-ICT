import{J as f,N as o,x as a}from"./index-BN9GAmQT.js";import{B as g}from"./button-B7XicF_D.js";import{C as s}from"./card-DDCG5iAJ.js";import{B as N}from"./badge-DuBy3M6P.js";import{A as y}from"./arrow-left-DYl8JD6p.js";import{F as v}from"./file-text-zOWEdpec.js";import{T as w}from"./trending-up-q9Xt4TNZ.js";import{C as m}from"./circle-alert-CBZAY2D5.js";import{R as L}from"./refresh-cw-DbwZ9LS7.js";import{R as p,C as k,X as R,Y as V,T as b,L as T,a as A}from"./generateCategoricalChart-B5qIq3um.js";import{L as S,a as K}from"./LineChart-ljMg4o6_.js";import{P as z,a as E}from"./PieChart-3gGku0Mc.js";import"./index-Ci_qB1WW.js";import"./index-CqUluVxK.js";function Z(){const[,i]=f(),{data:r,isLoading:u}=o.contractDashboard.getStatistics.useQuery(),{data:n,isLoading:C}=o.contractDashboard.getExpiringContracts.useQuery({days:90}),{data:l,isLoading:D}=o.contractDashboard.getRevenueForecast.useQuery(),{data:c,isLoading:F}=o.contractDashboard.getRenewalRate.useQuery(),d=t=>{const e=typeof t=="string"?parseFloat(t):t;return new Intl.NumberFormat("de-CH",{style:"currency",currency:"CHF"}).format(e)},j=t=>new Date(t).toLocaleDateString("de-CH"),x=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6"];return a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:32",className:"min-h-screen bg-background",children:a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:33",className:"container mx-auto py-8",children:[a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:34",className:"flex items-center gap-4 mb-8",children:[a.jsxs(g,{"data-loc":"client/src/pages/ContractDashboard.tsx:35",variant:"ghost",onClick:()=>i("/contracts"),size:"sm",children:[a.jsx(y,{"data-loc":"client/src/pages/ContractDashboard.tsx:40",className:"h-4 w-4 mr-2"}),"Zur√ºck"]}),a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:43",children:[a.jsx("h1",{"data-loc":"client/src/pages/ContractDashboard.tsx:44",className:"text-3xl font-bold",children:"Vertrags-Dashboard"}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:45",className:"text-muted-foreground mt-1",children:"√úbersicht √ºber Ihre Vertr√§ge, Umsatzprognosen und Verl√§ngerungsraten"})]})]}),a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:52",className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsxs(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:53",className:"p-6",children:[a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:54",className:"flex items-center justify-between mb-2",children:a.jsx(v,{"data-loc":"client/src/pages/ContractDashboard.tsx:55",className:"h-8 w-8 text-blue-500"})}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:57",className:"text-2xl font-bold",children:r?.activeContracts||0}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:58",className:"text-sm text-muted-foreground",children:"Aktive Vertr√§ge"})]}),a.jsxs(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:61",className:"p-6",children:[a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:62",className:"flex items-center justify-between mb-2",children:a.jsx(w,{"data-loc":"client/src/pages/ContractDashboard.tsx:63",className:"h-8 w-8 text-green-500"})}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:65",className:"text-2xl font-bold",children:d(r?.totalValue||0)}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:66",className:"text-sm text-muted-foreground",children:"Gesamtwert"})]}),a.jsxs(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:69",className:"p-6",children:[a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:70",className:"flex items-center justify-between mb-2",children:a.jsx(m,{"data-loc":"client/src/pages/ContractDashboard.tsx:71",className:"h-8 w-8 text-orange-500"})}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:73",className:"text-2xl font-bold",children:r?.expiringSoon||0}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:74",className:"text-sm text-muted-foreground",children:"Laufen in 30 Tagen aus"})]}),a.jsxs(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:77",className:"p-6",children:[a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:78",className:"flex items-center justify-between mb-2",children:a.jsx(L,{"data-loc":"client/src/pages/ContractDashboard.tsx:79",className:"h-8 w-8 text-purple-500"})}),a.jsxs("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:81",className:"text-2xl font-bold",children:[c?.renewalRate||0,"%"]}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:82",className:"text-sm text-muted-foreground",children:"Verl√§ngerungsrate"})]})]}),a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:87",className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsxs(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:89",className:"p-6",children:[a.jsx("h3",{"data-loc":"client/src/pages/ContractDashboard.tsx:90",className:"text-lg font-semibold mb-4",children:"Umsatzprognose (12 Monate)"}),D?a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:92",className:"h-64 flex items-center justify-center",children:a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:93",className:"text-muted-foreground",children:"Lade Prognose..."})}):l&&l.length>0?a.jsx(p,{"data-loc":"client/src/pages/ContractDashboard.tsx:96",width:"100%",height:300,children:a.jsxs(S,{"data-loc":"client/src/pages/ContractDashboard.tsx:97",data:l,children:[a.jsx(k,{"data-loc":"client/src/pages/ContractDashboard.tsx:98",strokeDasharray:"3 3",stroke:"#333"}),a.jsx(R,{"data-loc":"client/src/pages/ContractDashboard.tsx:99",dataKey:"month",stroke:"#888",tick:{fill:"#888"}}),a.jsx(V,{"data-loc":"client/src/pages/ContractDashboard.tsx:104",stroke:"#888",tick:{fill:"#888"}}),a.jsx(b,{"data-loc":"client/src/pages/ContractDashboard.tsx:105",contentStyle:{backgroundColor:"#1f1f1f",border:"1px solid #333",borderRadius:"8px"},formatter:t=>d(t)}),a.jsx(T,{"data-loc":"client/src/pages/ContractDashboard.tsx:113",wrapperStyle:{color:"#888"}}),a.jsx(K,{"data-loc":"client/src/pages/ContractDashboard.tsx:114",type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Umsatz"})]})}):a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:124",className:"h-64 flex items-center justify-center",children:a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:125",className:"text-muted-foreground",children:"Keine Daten verf√ºgbar"})})]}),a.jsxs(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:131",className:"p-6",children:[a.jsx("h3",{"data-loc":"client/src/pages/ContractDashboard.tsx:132",className:"text-lg font-semibold mb-4",children:"Vertr√§ge nach Status"}),u?a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:134",className:"h-64 flex items-center justify-center",children:a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:135",className:"text-muted-foreground",children:"Lade Statistiken..."})}):r?.statusDistribution&&r.statusDistribution.length>0?a.jsx(p,{"data-loc":"client/src/pages/ContractDashboard.tsx:138",width:"100%",height:300,children:a.jsxs(z,{"data-loc":"client/src/pages/ContractDashboard.tsx:139",children:[a.jsx(E,{"data-loc":"client/src/pages/ContractDashboard.tsx:140",data:r.statusDistribution,dataKey:"count",nameKey:"status",cx:"50%",cy:"50%",outerRadius:100,label:t=>`${t.status}: ${t.count}`,children:r.statusDistribution.map((t,e)=>a.jsx(A,{"data-loc":"client/src/pages/ContractDashboard.tsx:150",fill:x[e%x.length]},`cell-${e}`))}),a.jsx(b,{"data-loc":"client/src/pages/ContractDashboard.tsx:153",contentStyle:{backgroundColor:"#1f1f1f",border:"1px solid #333",borderRadius:"8px"}})]})}):a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:163",className:"h-64 flex items-center justify-center",children:a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:164",className:"text-muted-foreground",children:"Keine Daten verf√ºgbar"})})]})]}),a.jsxs(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:171",className:"p-6",children:[a.jsx("h3",{"data-loc":"client/src/pages/ContractDashboard.tsx:172",className:"text-lg font-semibold mb-4",children:"Ablaufende Vertr√§ge (n√§chste 90 Tage)"}),C?a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:176",className:"py-8 text-center",children:a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:177",className:"text-muted-foreground",children:"Lade Vertr√§ge..."})}):!n||n.length===0?a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:180",className:"py-8 text-center",children:[a.jsx(m,{"data-loc":"client/src/pages/ContractDashboard.tsx:181",className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:182",className:"text-muted-foreground",children:"Keine Vertr√§ge laufen in den n√§chsten 90 Tagen aus"})]}):a.jsx("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:187",className:"space-y-3",children:n.map(t=>{const e=Math.ceil((new Date(t.endDate).getTime()-new Date().getTime())/864e5),h=e<=30?"high":e<=60?"medium":"low";return a.jsx(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:201",className:`p-4 border-l-4 ${h==="high"?"border-l-red-500":h==="medium"?"border-l-orange-500":"border-l-yellow-500"}`,children:a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:211",className:"flex items-start justify-between",children:[a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:212",className:"flex-1",children:[a.jsx("h4",{"data-loc":"client/src/pages/ContractDashboard.tsx:213",className:"font-semibold mb-1",children:t.title}),a.jsxs("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:214",className:"text-sm text-muted-foreground mb-2",children:["Vertragsnummer: ",t.contractNumber]}),a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:217",className:"flex flex-wrap gap-3 text-sm",children:[a.jsxs("span",{"data-loc":"client/src/pages/ContractDashboard.tsx:218",children:["üìÖ Endet: ",j(t.endDate)]}),a.jsxs("span",{"data-loc":"client/src/pages/ContractDashboard.tsx:219",children:["‚è±Ô∏è In ",e," Tagen"]}),a.jsxs("span",{"data-loc":"client/src/pages/ContractDashboard.tsx:220",children:["üí∞ ",d(t.totalAmount)]}),t.autoRenew===1&&a.jsx(N,{"data-loc":"client/src/pages/ContractDashboard.tsx:222",variant:"outline",className:"text-green-500",children:"Auto-Verl√§ngerung"})]})]}),a.jsx(g,{"data-loc":"client/src/pages/ContractDashboard.tsx:228",variant:"outline",size:"sm",onClick:()=>i("/contracts"),children:"Details"})]})},t.id)})})]}),c&&a.jsxs(s,{"data-loc":"client/src/pages/ContractDashboard.tsx:245",className:"p-6 mt-6",children:[a.jsx("h3",{"data-loc":"client/src/pages/ContractDashboard.tsx:246",className:"text-lg font-semibold mb-4",children:"Verl√§ngerungsrate (letzte 12 Monate)"}),a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:247",className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:248",className:"text-center",children:[a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:249",className:"text-3xl font-bold text-red-500",children:c.totalExpired}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:250",className:"text-sm text-muted-foreground mt-1",children:"Abgelaufen"})]}),a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:252",className:"text-center",children:[a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:253",className:"text-3xl font-bold text-green-500",children:c.totalRenewed}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:254",className:"text-sm text-muted-foreground mt-1",children:"Verl√§ngert"})]}),a.jsxs("div",{"data-loc":"client/src/pages/ContractDashboard.tsx:256",className:"text-center",children:[a.jsxs("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:257",className:"text-3xl font-bold text-blue-500",children:[c.renewalRate,"%"]}),a.jsx("p",{"data-loc":"client/src/pages/ContractDashboard.tsx:258",className:"text-sm text-muted-foreground mt-1",children:"Erfolgsrate"})]})]})]})]})})}export{Z as default};
