import{j as l,N as h,A as y,x as a}from"./index-BN9GAmQT.js";import{C as r}from"./card-DDCG5iAJ.js";import{B as n}from"./button-B7XicF_D.js";import{I as N}from"./input-DAxyQcQ6.js";import{S as z,a as R,b as V,c as O,d as m}from"./select-lpC4X7iX.js";import{T as Q,a as _,b as f,c,d as G,e as i}from"./table-CCi6V4m7.js";import{D as K,a as U,b as W,c as X,e as Z}from"./dialog-BFxkyGdG.js";import{B as g}from"./badge-DuBy3M6P.js";import{M as v}from"./mail-fgvT38PL.js";import{C as w}from"./circle-check-CegIR20y.js";import{C as k}from"./circle-x-vF5gbwUM.js";import{T as $}from"./trending-up-q9Xt4TNZ.js";import{S as q}from"./search-DYS7RNfR.js";import{R as S}from"./refresh-cw-DbwZ9LS7.js";import{C as J}from"./circle-alert-CBZAY2D5.js";import{E as Y}from"./eye-DH5-FCbl.js";import{C as aa}from"./clock-C0SPg0PF.js";import"./index-Ci_qB1WW.js";import"./index-DYYK5dbJ.js";import"./index-DkLA8Hun.js";import"./index-FM6g0UGI.js";import"./chevron-up-CGjsbtlF.js";import"./check-B0XS7teL.js";function fa(){const[o,p]=l.useState(1),[x,C]=l.useState("all"),[b,T]=l.useState(""),[E,A]=l.useState(""),[e,M]=l.useState(null),[B,D]=l.useState(!1),{data:d,isLoading:F}=h.emailLogs.stats.useQuery(),{data:t,isLoading:H,refetch:L}=h.emailLogs.list.useQuery({page:o,pageSize:20,status:x==="all"?void 0:x,recipientEmail:b||void 0,templateName:E||void 0}),j=h.emailLogs.retry.useMutation({onSuccess:()=>{y.success("Email resent successfully"),L()},onError:s=>{y.error(`Failed to resend email: ${s.message}`)}}),P=s=>{confirm("Are you sure you want to retry sending this email?")&&j.mutate({id:s})},I=s=>{M(s),D(!0)},u=s=>{switch(s){case"sent":return a.jsxs(g,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:88",className:"bg-green-500/10 text-green-600 hover:bg-green-500/20",children:[a.jsx(w,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:89",className:"w-3 h-3 mr-1"}),"Sent"]});case"failed":return a.jsxs(g,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:95",className:"bg-red-500/10 text-red-600 hover:bg-red-500/20",children:[a.jsx(k,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:96",className:"w-3 h-3 mr-1"}),"Failed"]});case"pending":return a.jsxs(g,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:102",className:"bg-yellow-500/10 text-yellow-600 hover:bg-yellow-500/20",children:[a.jsx(aa,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:103",className:"w-3 h-3 mr-1"}),"Pending"]});default:return a.jsx(g,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:108",variant:"outline",children:s})}};return a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:113",className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-6",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:114",className:"container mx-auto max-w-7xl",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:116",className:"mb-8",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:117",className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:118",className:"p-2 bg-blue-500/10 rounded-lg",children:a.jsx(v,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:119",className:"w-6 h-6 text-blue-600"})}),a.jsx("h1",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:121",className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Email Versandprotokoll"})]}),a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:125",className:"text-gray-600 dark:text-gray-400",children:"Überwachen Sie alle versendeten E-Mails mit Status und Details"})]}),!F&&d&&a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:132",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx(r,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:133",className:"p-6 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:134",className:"flex items-center justify-between",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:135",children:[a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:136",className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Emails"}),a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:139",className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.overall.total})]}),a.jsx(v,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:143",className:"w-10 h-10 text-blue-500 opacity-20"})]})}),a.jsx(r,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:147",className:"p-6 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:148",className:"flex items-center justify-between",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:149",children:[a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:150",className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Erfolgreich"}),a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:153",className:"text-2xl font-bold text-green-600",children:d.overall.sent})]}),a.jsx(w,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:157",className:"w-10 h-10 text-green-500 opacity-20"})]})}),a.jsx(r,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:161",className:"p-6 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:162",className:"flex items-center justify-between",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:163",children:[a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:164",className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Fehlgeschlagen"}),a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:167",className:"text-2xl font-bold text-red-600",children:d.overall.failed})]}),a.jsx(k,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:171",className:"w-10 h-10 text-red-500 opacity-20"})]})}),a.jsx(r,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:175",className:"p-6 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:176",className:"flex items-center justify-between",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:177",children:[a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:178",className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Erfolgsrate"}),a.jsxs("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:181",className:"text-2xl font-bold text-blue-600",children:[d.overall.successRate,"%"]})]}),a.jsx($,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:185",className:"w-10 h-10 text-blue-500 opacity-20"})]})})]}),a.jsx(r,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:192",className:"p-6 mb-6 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:193",className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:194",className:"flex-1",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:195",className:"relative",children:[a.jsx(q,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:196",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(N,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:197",placeholder:"Empfänger-Email suchen...",value:b,onChange:s=>T(s.target.value),className:"pl-10"})]})}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:206",className:"flex-1",children:a.jsx(N,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:207",placeholder:"Template-Name suchen...",value:E,onChange:s=>A(s.target.value)})}),a.jsxs(z,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:214",value:x,onValueChange:C,children:[a.jsx(R,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:215",className:"w-full md:w-48",children:a.jsx(V,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:216",placeholder:"Status filtern"})}),a.jsxs(O,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:218",children:[a.jsx(m,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:219",value:"all",children:"Alle Status"}),a.jsx(m,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:220",value:"sent",children:"Erfolgreich"}),a.jsx(m,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:221",value:"failed",children:"Fehlgeschlagen"}),a.jsx(m,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:222",value:"pending",children:"Ausstehend"})]})]}),a.jsxs(n,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:226",variant:"outline",onClick:()=>L(),className:"w-full md:w-auto",children:[a.jsx(S,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:231",className:"w-4 h-4 mr-2"}),"Aktualisieren"]})]})}),a.jsx(r,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:238",className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:239",className:"p-6",children:[a.jsx("h2",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:240",className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Email-Protokolle"}),H?a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:245",className:"flex justify-center items-center py-12",children:a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:246",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):!t||t.logs.length===0?a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:249",className:"text-center py-12",children:[a.jsx(J,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:250",className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:251",className:"text-gray-600 dark:text-gray-400",children:"Keine E-Mail-Protokolle gefunden"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:257",className:"overflow-x-auto",children:a.jsxs(Q,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:258",children:[a.jsx(_,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:259",children:a.jsxs(f,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:260",children:[a.jsx(c,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:261",children:"Status"}),a.jsx(c,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:262",children:"Empfänger"}),a.jsx(c,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:263",children:"Betreff"}),a.jsx(c,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:264",children:"Template"}),a.jsx(c,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:265",children:"Gesendet am"}),a.jsx(c,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:266",className:"text-right",children:"Aktionen"})]})}),a.jsx(G,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:269",children:t.logs.map(s=>a.jsxs(f,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:271",children:[a.jsx(i,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:272",children:u(s.status)}),a.jsx(i,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:273",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:274",children:[a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:275",className:"font-medium text-gray-900 dark:text-white",children:s.recipientName||"—"}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:278",className:"text-sm text-gray-500",children:s.recipientEmail})]})}),a.jsx(i,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:283",className:"max-w-xs truncate",children:s.subject}),a.jsx(i,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:286",children:s.templateName?a.jsx(g,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:288",variant:"outline",children:s.templateName}):a.jsx("span",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:290",className:"text-gray-400",children:"—"})}),a.jsx(i,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:293",children:s.sentAt?new Date(s.sentAt).toLocaleString("de-CH"):s.createdAt?new Date(s.createdAt).toLocaleString("de-CH"):"—"}),a.jsx(i,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:300",className:"text-right",children:a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:301",className:"flex justify-end gap-2",children:[a.jsx(n,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:302",variant:"ghost",size:"sm",onClick:()=>I(s),children:a.jsx(Y,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:307",className:"w-4 h-4"})}),s.status==="failed"&&a.jsx(n,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:310",variant:"ghost",size:"sm",onClick:()=>P(s.id),disabled:j.isPending,children:a.jsx(S,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:316",className:"w-4 h-4"})})]})})]},s.id))})]})}),t.pagination.totalPages>1&&a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:329",className:"flex items-center justify-between mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:330",className:"text-sm text-gray-600 dark:text-gray-400",children:["Seite ",t.pagination.page," von"," ",t.pagination.totalPages," (",t.pagination.totalCount," ","Einträge)"]}),a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:335",className:"flex gap-2",children:[a.jsx(n,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:336",variant:"outline",size:"sm",onClick:()=>p(o-1),disabled:o===1,children:"Zurück"}),a.jsx(n,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:344",variant:"outline",size:"sm",onClick:()=>p(o+1),disabled:o>=t.pagination.totalPages,children:"Weiter"})]})]})]})]})}),a.jsx(K,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:361",open:B,onOpenChange:D,children:a.jsxs(U,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:362",className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(W,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:363",children:[a.jsx(X,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:364",children:"Email Details"}),a.jsx(Z,{"data-loc":"client/src/pages/EmailLogDashboard.tsx:365",children:"Vollständige Informationen zu dieser E-Mail"})]}),e&&a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:371",className:"space-y-4",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:372",className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:373",children:[a.jsx("label",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:374",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Status"}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:377",className:"mt-1",children:u(e.status)})]}),a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:379",children:[a.jsx("label",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:380",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Template"}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:383",className:"mt-1",children:e.templateName||"—"})]}),a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:387",children:[a.jsx("label",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:388",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Empfänger"}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:391",className:"mt-1",children:e.recipientEmail})]}),a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:393",children:[a.jsx("label",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:394",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Erstellt am"}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:397",className:"mt-1",children:new Date(e.createdAt).toLocaleString("de-CH")})]})]}),a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:403",children:[a.jsx("label",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:404",className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Betreff"}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:407",className:"mt-1 p-3 bg-gray-50 dark:bg-gray-800 rounded",children:e.subject})]}),e.errorMessage&&a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:413",children:[a.jsx("label",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:414",className:"text-sm font-medium text-red-600",children:"Fehlermeldung"}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:417",className:"mt-1 p-3 bg-red-50 dark:bg-red-900/20 rounded text-red-600",children:e.errorMessage})]}),a.jsxs("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:423",children:[a.jsx("label",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:424",className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Email-Inhalt (HTML)"}),a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:427",className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-900 max-h-96 overflow-y-auto",children:a.jsx("div",{"data-loc":"client/src/pages/EmailLogDashboard.tsx:428",dangerouslySetInnerHTML:{__html:e.body}})})]})]})]})})]})})}export{fa as default};
