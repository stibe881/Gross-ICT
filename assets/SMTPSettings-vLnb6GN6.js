import{c as T,N as o,A as n,j as P,x as e}from"./index-BN9GAmQT.js";import{D as j}from"./DashboardLayout-BV_zGHwq.js";import{C as g,a as x,b as m,c as f,d as S}from"./card-DDCG5iAJ.js";import{B as p}from"./button-B7XicF_D.js";import{I as r}from"./input-DAxyQcQ6.js";import{L as i}from"./label-WV9rmlgK.js";import{S as N}from"./switch-pOM7cBrf.js";import{M as v}from"./mail-fgvT38PL.js";import{C as b}from"./circle-alert-CBZAY2D5.js";import{S as y}from"./save-DcPehqtW.js";import{C}from"./circle-check-big-DSSwzQTT.js";import"./index-DgoHzKAC.js";import"./index-BxbciWQS.js";import"./index-Ci_qB1WW.js";import"./dropdown-menu-CPeOI1vM.js";import"./index-DYYK5dbJ.js";import"./index-DkLA8Hun.js";import"./index-DE5s7y_t.js";import"./dialog-BFxkyGdG.js";import"./skeleton-B4p3r7MP.js";import"./users-BEPVjVsG.js";import"./log-out-Del1bcAp.js";import"./index-FM6g0UGI.js";const E=T("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);function Y(){const{data:a,refetch:h}=o.smtp.getSettings.useQuery(),l=o.smtp.updateSettings.useMutation({onSuccess:()=>{n.success("SMTP-Einstellungen gespeichert"),h()},onError:s=>{n.error(`Fehler: ${s.message}`)}}),d=o.smtp.testConnection.useMutation({onSuccess:()=>{n.success("SMTP-Verbindung erfolgreich getestet!")},onError:s=>{n.error(`Verbindungstest fehlgeschlagen: ${s.message}`)}}),[t,c]=P.useState({host:a?.host||"",port:a?.port||587,secure:a?.secure||!1,user:a?.user||"",password:"",fromEmail:a?.fromEmail||"noreply@gross-ict.ch",fromName:a?.fromName||"Gross ICT"}),u=s=>{s.preventDefault(),l.mutate(t)},M=()=>{d.mutate()};return e.jsx(j,{"data-loc":"client/src/pages/SMTPSettings.tsx:53",children:e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:54",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:55",children:[e.jsx("h1",{"data-loc":"client/src/pages/SMTPSettings.tsx:56",className:"text-3xl font-bold",children:"SMTP-Einstellungen"}),e.jsx("p",{"data-loc":"client/src/pages/SMTPSettings.tsx:57",className:"text-muted-foreground mt-2",children:"Konfigurieren Sie Ihren E-Mail-Server für den Versand von System-E-Mails"})]}),e.jsxs(g,{"data-loc":"client/src/pages/SMTPSettings.tsx:62",children:[e.jsxs(x,{"data-loc":"client/src/pages/SMTPSettings.tsx:63",children:[e.jsxs(m,{"data-loc":"client/src/pages/SMTPSettings.tsx:64",className:"flex items-center gap-2",children:[e.jsx(v,{"data-loc":"client/src/pages/SMTPSettings.tsx:65",className:"w-5 h-5"}),"E-Mail-Server Konfiguration"]}),e.jsx(f,{"data-loc":"client/src/pages/SMTPSettings.tsx:68",children:"Geben Sie die SMTP-Zugangsdaten Ihres E-Mail-Providers ein"})]}),e.jsx(S,{"data-loc":"client/src/pages/SMTPSettings.tsx:72",children:e.jsxs("form",{"data-loc":"client/src/pages/SMTPSettings.tsx:73",onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:74",className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:75",className:"space-y-2",children:[e.jsx(i,{"data-loc":"client/src/pages/SMTPSettings.tsx:76",htmlFor:"host",children:"SMTP Host"}),e.jsx(r,{"data-loc":"client/src/pages/SMTPSettings.tsx:77",id:"host",placeholder:"smtp.gmail.com",value:t.host,onChange:s=>c({...t,host:s.target.value}),required:!0}),e.jsx("p",{"data-loc":"client/src/pages/SMTPSettings.tsx:84",className:"text-xs text-muted-foreground",children:"z.B. smtp.gmail.com, smtp.office365.com"})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:89",className:"space-y-2",children:[e.jsx(i,{"data-loc":"client/src/pages/SMTPSettings.tsx:90",htmlFor:"port",children:"Port"}),e.jsx(r,{"data-loc":"client/src/pages/SMTPSettings.tsx:91",id:"port",type:"number",placeholder:"587",value:t.port,onChange:s=>c({...t,port:parseInt(s.target.value)}),required:!0}),e.jsx("p",{"data-loc":"client/src/pages/SMTPSettings.tsx:99",className:"text-xs text-muted-foreground",children:"Standard: 587 (TLS) oder 465 (SSL)"})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:104",className:"space-y-2",children:[e.jsx(i,{"data-loc":"client/src/pages/SMTPSettings.tsx:105",htmlFor:"user",children:"Benutzername / E-Mail"}),e.jsx(r,{"data-loc":"client/src/pages/SMTPSettings.tsx:106",id:"user",type:"email",placeholder:"ihre-email@domain.com",value:t.user,onChange:s=>c({...t,user:s.target.value}),required:!0})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:116",className:"space-y-2",children:[e.jsx(i,{"data-loc":"client/src/pages/SMTPSettings.tsx:117",htmlFor:"password",children:"Passwort"}),e.jsx(r,{"data-loc":"client/src/pages/SMTPSettings.tsx:118",id:"password",type:"password",placeholder:"••••••••",value:t.password,onChange:s=>c({...t,password:s.target.value})}),e.jsx("p",{"data-loc":"client/src/pages/SMTPSettings.tsx:125",className:"text-xs text-muted-foreground",children:"Leer lassen, um bestehendes Passwort beizubehalten"})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:130",className:"space-y-2",children:[e.jsx(i,{"data-loc":"client/src/pages/SMTPSettings.tsx:131",htmlFor:"fromEmail",children:"Absender E-Mail"}),e.jsx(r,{"data-loc":"client/src/pages/SMTPSettings.tsx:132",id:"fromEmail",type:"email",placeholder:"noreply@gross-ict.ch",value:t.fromEmail,onChange:s=>c({...t,fromEmail:s.target.value}),required:!0})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:142",className:"space-y-2",children:[e.jsx(i,{"data-loc":"client/src/pages/SMTPSettings.tsx:143",htmlFor:"fromName",children:"Absender Name"}),e.jsx(r,{"data-loc":"client/src/pages/SMTPSettings.tsx:144",id:"fromName",placeholder:"Gross ICT",value:t.fromName,onChange:s=>c({...t,fromName:s.target.value}),required:!0})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:154",className:"flex items-center space-x-2 p-4 bg-muted rounded-lg",children:[e.jsx(N,{"data-loc":"client/src/pages/SMTPSettings.tsx:155",id:"secure",checked:t.secure,onCheckedChange:s=>c({...t,secure:s})}),e.jsx(i,{"data-loc":"client/src/pages/SMTPSettings.tsx:160",htmlFor:"secure",className:"cursor-pointer",children:"SSL/TLS Verschlüsselung verwenden"})]}),e.jsx("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:165",className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:166",className:"flex gap-3",children:[e.jsx(b,{"data-loc":"client/src/pages/SMTPSettings.tsx:167",className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:168",className:"space-y-2 text-sm",children:[e.jsx("p",{"data-loc":"client/src/pages/SMTPSettings.tsx:169",className:"font-semibold text-blue-900 dark:text-blue-100",children:"Wichtige Hinweise:"}),e.jsxs("ul",{"data-loc":"client/src/pages/SMTPSettings.tsx:172",className:"list-disc list-inside space-y-1 text-blue-800 dark:text-blue-200",children:[e.jsx("li",{"data-loc":"client/src/pages/SMTPSettings.tsx:173",children:"Gmail: Verwenden Sie ein App-Passwort (nicht Ihr normales Passwort)"}),e.jsx("li",{"data-loc":"client/src/pages/SMTPSettings.tsx:174",children:"Office 365: Aktivieren Sie SMTP AUTH in den Admin-Einstellungen"}),e.jsx("li",{"data-loc":"client/src/pages/SMTPSettings.tsx:175",children:"Testen Sie die Verbindung nach dem Speichern"})]})]})]})}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:181",className:"flex gap-4",children:[e.jsxs(p,{"data-loc":"client/src/pages/SMTPSettings.tsx:182",type:"submit",disabled:l.isPending,children:[e.jsx(y,{"data-loc":"client/src/pages/SMTPSettings.tsx:183",className:"w-4 h-4 mr-2"}),l.isPending?"Speichert...":"Einstellungen speichern"]}),e.jsxs(p,{"data-loc":"client/src/pages/SMTPSettings.tsx:186",type:"button",variant:"outline",onClick:M,disabled:d.isPending||!a,children:[e.jsx(E,{"data-loc":"client/src/pages/SMTPSettings.tsx:192",className:"w-4 h-4 mr-2"}),d.isPending?"Teste...":"Verbindung testen"]})]})]})})]}),a&&e.jsxs(g,{"data-loc":"client/src/pages/SMTPSettings.tsx:201",children:[e.jsx(x,{"data-loc":"client/src/pages/SMTPSettings.tsx:202",children:e.jsxs(m,{"data-loc":"client/src/pages/SMTPSettings.tsx:203",className:"flex items-center gap-2",children:[e.jsx(C,{"data-loc":"client/src/pages/SMTPSettings.tsx:204",className:"w-5 h-5 text-green-600"}),"Aktuelle Konfiguration"]})}),e.jsx(S,{"data-loc":"client/src/pages/SMTPSettings.tsx:208",children:e.jsxs("dl",{"data-loc":"client/src/pages/SMTPSettings.tsx:209",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:210",children:[e.jsx("dt",{"data-loc":"client/src/pages/SMTPSettings.tsx:211",className:"text-sm font-medium text-muted-foreground",children:"SMTP Host"}),e.jsx("dd",{"data-loc":"client/src/pages/SMTPSettings.tsx:212",className:"mt-1 text-sm font-mono",children:a.host||"Nicht konfiguriert"})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:214",children:[e.jsx("dt",{"data-loc":"client/src/pages/SMTPSettings.tsx:215",className:"text-sm font-medium text-muted-foreground",children:"Port"}),e.jsx("dd",{"data-loc":"client/src/pages/SMTPSettings.tsx:216",className:"mt-1 text-sm font-mono",children:a.port||"Nicht konfiguriert"})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:218",children:[e.jsx("dt",{"data-loc":"client/src/pages/SMTPSettings.tsx:219",className:"text-sm font-medium text-muted-foreground",children:"Benutzername"}),e.jsx("dd",{"data-loc":"client/src/pages/SMTPSettings.tsx:220",className:"mt-1 text-sm font-mono",children:a.user||"Nicht konfiguriert"})]}),e.jsxs("div",{"data-loc":"client/src/pages/SMTPSettings.tsx:222",children:[e.jsx("dt",{"data-loc":"client/src/pages/SMTPSettings.tsx:223",className:"text-sm font-medium text-muted-foreground",children:"Verschlüsselung"}),e.jsx("dd",{"data-loc":"client/src/pages/SMTPSettings.tsx:224",className:"mt-1 text-sm",children:a.secure?e.jsx("span",{"data-loc":"client/src/pages/SMTPSettings.tsx:226",className:"text-green-600 font-medium",children:"SSL/TLS aktiviert"}):e.jsx("span",{"data-loc":"client/src/pages/SMTPSettings.tsx:228",className:"text-orange-600 font-medium",children:"Nicht verschlüsselt"})})]})]})})]})]})})}export{Y as default};
