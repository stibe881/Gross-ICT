import{j as g,N as w,A as m,x as e,J as ee}from"./index-BN9GAmQT.js";import{T as oe,a as re,b as Y,c as W}from"./tabs-BqpNVkZh.js";import{B as x}from"./button-B7XicF_D.js";import{I as p}from"./input-DAxyQcQ6.js";import{C as z,a as de,b as xe,d as ue}from"./card-DDCG5iAJ.js";import{S as E,a as H,b as M,c as U,d}from"./select-lpC4X7iX.js";import{D as V,a as B,b as K,c as _}from"./dialog-BFxkyGdG.js";import{P as Z}from"./plus-Bs9J4-Yt.js";import{S as se}from"./search-DYS7RNfR.js";import{F as G}from"./file-text-zOWEdpec.js";import{E as te}from"./eye-DH5-FCbl.js";import{D as ae}from"./download-_y-9cJJ1.js";import{A as pe}from"./arrow-right-DrTepnru.js";import{F as ge,T as me,L as he,h as X,E as ve,C as je,a as be,b as Ie,P as fe,c as Ne,p as Ce,d as Qe,e as ye,i as we}from"./index-KUW4fVzl.js";import{A as Se}from"./arrow-left-DYl8JD6p.js";import{C as Re}from"./chart-column-8Hy86w9_.js";import"./index-DE5s7y_t.js";import"./index-DYYK5dbJ.js";import"./index-Ci_qB1WW.js";import"./index-DkLA8Hun.js";import"./index-FM6g0UGI.js";import"./chevron-up-CGjsbtlF.js";import"./check-B0XS7teL.js";function Fe(){const[f,I]=g.useState(""),[Q,r]=g.useState("all"),[N,S]=g.useState(new Date().getFullYear()),[o,l]=g.useState(!1),[C,y]=g.useState(null),{data:h,isLoading:v,refetch:R}=w.invoices.all.useQuery({search:f||void 0,status:Q!=="all"?Q:void 0,year:N}),{data:L}=w.customers.all.useQuery(),T=w.pdf.generateInvoicePDF.useMutation({onSuccess:s=>{const n=atob(s.data),b=new Array(n.length);for(let O=0;O<n.length;O++)b[O]=n.charCodeAt(O);const i=new Uint8Array(b),D=new Blob([i],{type:"application/pdf"}),P=window.URL.createObjectURL(D),A=document.createElement("a");A.href=P,A.download=s.filename,document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(P),m.success("PDF erfolgreich heruntergeladen")},onError:s=>{m.error(`Fehler beim PDF-Download: ${s.message}`)}}),j=(s,n)=>{T.mutate({invoiceId:s})},F=s=>{y(s)},c=s=>{switch(s){case"draft":return"bg-gray-500";case"sent":return"bg-blue-500";case"paid":return"bg-green-500";case"overdue":return"bg-red-500";case"cancelled":return"bg-gray-400";default:return"bg-gray-500"}},a=s=>{switch(s){case"draft":return"Entwurf";case"sent":return"Versendet";case"paid":return"Bezahlt";case"overdue":return"Überfällig";case"cancelled":return"Storniert";default:return s}};return e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:88",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:89",className:"flex items-center justify-between mb-6",children:[e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:90"}),e.jsxs(x,{"data-loc":"client/src/pages/Invoices.tsx:91",onClick:()=>l(!0),className:"gap-2",children:[e.jsx(Z,{"data-loc":"client/src/pages/Invoices.tsx:92",className:"w-4 h-4"}),"Neue Rechnung"]})]}),e.jsx(z,{"data-loc":"client/src/pages/Invoices.tsx:98",className:"p-4 mb-6",children:e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:99",className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:100",className:"relative",children:[e.jsx(se,{"data-loc":"client/src/pages/Invoices.tsx:101",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:102",placeholder:"Suche nach Rechnungsnummer...",value:f,onChange:s=>I(s.target.value),className:"pl-10"})]}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:110",value:Q,onValueChange:r,children:[e.jsx(H,{"data-loc":"client/src/pages/Invoices.tsx:111",children:e.jsx(M,{"data-loc":"client/src/pages/Invoices.tsx:112",placeholder:"Status"})}),e.jsxs(U,{"data-loc":"client/src/pages/Invoices.tsx:114",children:[e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:115",value:"all",children:"Alle Status"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:116",value:"draft",children:"Entwurf"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:117",value:"sent",children:"Versendet"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:118",value:"paid",children:"Bezahlt"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:119",value:"overdue",children:"Überfällig"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:120",value:"cancelled",children:"Storniert"})]})]}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:124",value:N.toString(),onValueChange:s=>S(parseInt(s)),children:[e.jsx(H,{"data-loc":"client/src/pages/Invoices.tsx:125",children:e.jsx(M,{"data-loc":"client/src/pages/Invoices.tsx:126",placeholder:"Jahr"})}),e.jsx(U,{"data-loc":"client/src/pages/Invoices.tsx:128",children:[2025,2024,2023,2022].map(s=>e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:130",value:s.toString(),children:s},s))})]}),e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:135",variant:"outline",onClick:()=>{I(""),r("all"),S(new Date().getFullYear())},children:"Zurücksetzen"})]})}),v?e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:147",className:"text-center py-12",children:e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:148",className:"text-muted-foreground",children:"Lade Rechnungen..."})}):!h||h.length===0?e.jsxs(z,{"data-loc":"client/src/pages/Invoices.tsx:151",className:"p-12 text-center",children:[e.jsx(G,{"data-loc":"client/src/pages/Invoices.tsx:152",className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{"data-loc":"client/src/pages/Invoices.tsx:153",className:"text-lg font-semibold mb-2",children:"Keine Rechnungen gefunden"}),e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:154",className:"text-muted-foreground mb-4",children:"Erstellen Sie Ihre erste Rechnung, um loszulegen."}),e.jsxs(x,{"data-loc":"client/src/pages/Invoices.tsx:157",onClick:()=>l(!0),children:[e.jsx(Z,{"data-loc":"client/src/pages/Invoices.tsx:158",className:"w-4 h-4 mr-2"}),"Erste Rechnung erstellen"]})]}):e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:163",className:"space-y-4",children:h.map(s=>e.jsx(z,{"data-loc":"client/src/pages/Invoices.tsx:165",className:"p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:166",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:167",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:168",className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{"data-loc":"client/src/pages/Invoices.tsx:169",className:"text-lg font-semibold",children:s.invoiceNumber}),e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:170",className:`px-2 py-1 rounded-full text-xs text-white ${c(s.status)}`,children:a(s.status)})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:174",className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:175",children:[e.jsx("strong",{"data-loc":"client/src/pages/Invoices.tsx:175",children:"Kunde:"})," ",s.customer?.name||"Unbekannt"]}),e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:176",children:[e.jsx("strong",{"data-loc":"client/src/pages/Invoices.tsx:176",children:"Datum:"})," ",new Date(s.invoiceDate).toLocaleDateString("de-CH")]}),e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:177",children:[e.jsx("strong",{"data-loc":"client/src/pages/Invoices.tsx:177",children:"Fällig:"})," ",new Date(s.dueDate).toLocaleDateString("de-CH")]}),s.paidDate&&e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:179",children:[e.jsx("strong",{"data-loc":"client/src/pages/Invoices.tsx:179",children:"Bezahlt am:"})," ",new Date(s.paidDate).toLocaleDateString("de-CH")]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:183",className:"text-right",children:[e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:184",className:"text-2xl font-bold text-primary mb-4",children:[parseFloat(s.totalAmount).toFixed(2)," ",s.currency]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:187",className:"flex gap-2",children:[e.jsxs(x,{"data-loc":"client/src/pages/Invoices.tsx:188",variant:"outline",size:"sm",onClick:()=>F(s.id),children:[e.jsx(te,{"data-loc":"client/src/pages/Invoices.tsx:193",className:"w-4 h-4 mr-1"}),"Ansehen"]}),e.jsxs(x,{"data-loc":"client/src/pages/Invoices.tsx:196",variant:"outline",size:"sm",onClick:()=>j(s.id,s.invoiceNumber),children:[e.jsx(ae,{"data-loc":"client/src/pages/Invoices.tsx:201",className:"w-4 h-4 mr-1"}),"PDF"]})]})]})]})},s.id))}),e.jsx(ke,{"data-loc":"client/src/pages/Invoices.tsx:213",open:o,onOpenChange:l,customers:L||[],onSuccess:()=>{R(),l(!1)}}),C&&e.jsx(De,{"data-loc":"client/src/pages/Invoices.tsx:225",invoiceId:C,onClose:()=>y(null),onSuccess:R})]})}function ke({open:f,onOpenChange:I,customers:Q,onSuccess:r}){const{data:N}=w.products.all.useQuery({isActive:!0}),[S,o]=g.useState(null),[l,C]=g.useState(""),[y,h]=g.useState(""),[v,R]=g.useState([{description:"",quantity:"1",unit:"Stunden",unitPrice:"0",vatRate:"8.10",discount:"0"}]),[L,T]=g.useState(!1),[j,F]=g.useState({name:"",email:"",phone:"",address:"",city:"",zip:"",country:"Schweiz",type:"company"}),[c,a]=g.useState(!1),[s,n]=g.useState({name:"",description:"",unit:"Stunden",unitPrice:"",vatRate:"8.10",category:"",isActive:!0}),[b,i]=g.useState(null),D=w.customers.create.useMutation({onSuccess:t=>{m.success("Kunde erfolgreich erstellt"),o(t.id),T(!1),F({name:"",email:"",phone:"",address:"",city:"",zip:"",country:"Schweiz",type:"company"}),r()},onError:t=>{m.error(`Fehler: ${t.message}`)}}),P=w.products.create.useMutation({onSuccess:t=>{m.success("Produkt erfolgreich erstellt"),b!==null&&J(b,t.id.toString()),a(!1),n({name:"",description:"",unit:"Stunden",unitPrice:"",vatRate:"8.10",category:"",isActive:!0}),i(null),r()},onError:t=>{m.error(`Fehler: ${t.message}`)}}),A=w.invoices.create.useMutation({onSuccess:()=>{m.success("Rechnung erfolgreich erstellt"),r(),O()},onError:t=>{m.error(`Fehler: ${t.message}`)}}),O=()=>{o(null),C(""),h(""),R([{description:"",quantity:"1",unit:"Stunden",unitPrice:"0",vatRate:"8.10",discount:"0"}])},ce=()=>{R([...v,{description:"",quantity:"1",unit:"Stunden",unitPrice:"0",vatRate:"8.10",discount:"0"}])},ne=t=>{R(v.filter((k,u)=>u!==t))},$=(t,k,u)=>{const q=[...v];q[t][k]=u,R(q)},J=(t,k)=>{if(!k||!N)return;const u=N.find(ie=>ie.id===parseInt(k));if(!u)return;const q=[...v];q[t]={...q[t],description:u.name,unit:u.unit,unitPrice:u.unitPrice,vatRate:u.vatRate},R(q)},le=()=>{if(!S||!l||v.length===0){m.error("Bitte füllen Sie alle Pflichtfelder aus");return}A.mutate({customerId:S,dueDate:new Date(l),notes:y,items:v})};return e.jsxs(V,{"data-loc":"client/src/pages/Invoices.tsx:376",open:f,onOpenChange:I,children:[e.jsxs(B,{"data-loc":"client/src/pages/Invoices.tsx:377",className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(K,{"data-loc":"client/src/pages/Invoices.tsx:378",children:e.jsx(_,{"data-loc":"client/src/pages/Invoices.tsx:379",children:"Neue Rechnung erstellen"})}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:382",className:"space-y-4 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:383",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:384",className:"text-sm font-medium mb-2 block",children:"Kunde *"}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:385",value:S?.toString()||"",onValueChange:t=>{t==="__new__"?T(!0):o(parseInt(t))},children:[e.jsx(H,{"data-loc":"client/src/pages/Invoices.tsx:392",children:e.jsx(M,{"data-loc":"client/src/pages/Invoices.tsx:393",placeholder:"Kunde auswählen"})}),e.jsxs(U,{"data-loc":"client/src/pages/Invoices.tsx:395",children:[e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:396",value:"__new__",className:"text-primary font-medium",children:"+ Neuen Kunden erstellen"}),Q.map(t=>e.jsxs(d,{"data-loc":"client/src/pages/Invoices.tsx:400",value:t.id.toString(),children:[t.name," (",t.email,")"]},t.id))]})]})]}),e.jsx(V,{"data-loc":"client/src/pages/Invoices.tsx:409",open:L,onOpenChange:T,children:e.jsxs(B,{"data-loc":"client/src/pages/Invoices.tsx:410",className:"max-w-2xl",children:[e.jsx(K,{"data-loc":"client/src/pages/Invoices.tsx:411",children:e.jsx(_,{"data-loc":"client/src/pages/Invoices.tsx:412",children:"Neuen Kunden erstellen"})}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:414",className:"space-y-4 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:415",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:416",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:417",className:"text-sm font-medium mb-2 block",children:"Name *"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:418",value:j.name,onChange:t=>F({...j,name:t.target.value}),placeholder:"Firmenname oder Name"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:424",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:425",className:"text-sm font-medium mb-2 block",children:"Typ *"}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:426",value:j.type,onValueChange:t=>F({...j,type:t}),children:[e.jsx(H,{"data-loc":"client/src/pages/Invoices.tsx:430",children:e.jsx(M,{"data-loc":"client/src/pages/Invoices.tsx:431"})}),e.jsxs(U,{"data-loc":"client/src/pages/Invoices.tsx:433",children:[e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:434",value:"company",children:"Firma"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:435",value:"individual",children:"Privatperson"})]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:440",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:441",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:442",className:"text-sm font-medium mb-2 block",children:"E-Mail *"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:443",type:"email",value:j.email,onChange:t=>F({...j,email:t.target.value}),placeholder:"kunde@example.com"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:450",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:451",className:"text-sm font-medium mb-2 block",children:"Telefon"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:452",value:j.phone,onChange:t=>F({...j,phone:t.target.value}),placeholder:"+41 79 123 45 67"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:459",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:460",className:"text-sm font-medium mb-2 block",children:"Adresse"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:461",value:j.address,onChange:t=>F({...j,address:t.target.value}),placeholder:"Strasse und Hausnummer"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:467",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:468",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:469",className:"text-sm font-medium mb-2 block",children:"PLZ"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:470",value:j.zip,onChange:t=>F({...j,zip:t.target.value}),placeholder:"6144"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:476",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:477",className:"text-sm font-medium mb-2 block",children:"Ort"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:478",value:j.city,onChange:t=>F({...j,city:t.target.value}),placeholder:"Zell"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:484",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:485",className:"text-sm font-medium mb-2 block",children:"Land"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:486",value:j.country,onChange:t=>F({...j,country:t.target.value}),placeholder:"Schweiz"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:493",className:"flex justify-end gap-2 mt-6",children:[e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:494",variant:"outline",onClick:()=>T(!1),children:"Abbrechen"}),e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:497",onClick:()=>{if(!j.name||!j.email){m.error("Bitte füllen Sie Name und E-Mail aus");return}D.mutate(j)},disabled:D.isPending,children:D.isPending?"Erstellt...":"Kunde erstellen"})]})]})]})}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:514",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:515",className:"text-sm font-medium mb-2 block",children:"Fälligkeitsdatum *"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:516",type:"date",value:l,onChange:t=>C(t.target.value)})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:523",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:524",className:"text-sm font-medium mb-2 block",children:"Notizen"}),e.jsx("textarea",{"data-loc":"client/src/pages/Invoices.tsx:525",className:"w-full min-h-[80px] px-3 py-2 rounded-md border border-input bg-background",value:y,onChange:t=>h(t.target.value),placeholder:"Interne Notizen..."})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:533",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:534",className:"flex items-center justify-between mb-2",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:535",className:"text-sm font-medium",children:"Positionen *"}),e.jsxs(x,{"data-loc":"client/src/pages/Invoices.tsx:536",size:"sm",variant:"outline",onClick:ce,children:[e.jsx(Z,{"data-loc":"client/src/pages/Invoices.tsx:537",className:"w-4 h-4 mr-1"}),"Position hinzufügen"]})]}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:542",className:"space-y-3",children:v.map((t,k)=>e.jsx(z,{"data-loc":"client/src/pages/Invoices.tsx:544",className:"p-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:545",className:"grid grid-cols-12 gap-2",children:[e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:546",className:"col-span-12 mb-2",children:e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:547",onValueChange:u=>{u==="__new__"?(i(k),a(!0)):J(k,u)},children:[e.jsx(H,{"data-loc":"client/src/pages/Invoices.tsx:555",children:e.jsx(M,{"data-loc":"client/src/pages/Invoices.tsx:556",placeholder:"Produkt aus Katalog wählen (optional)"})}),e.jsxs(U,{"data-loc":"client/src/pages/Invoices.tsx:558",children:[e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:559",value:"__new__",className:"text-primary font-medium",children:"+ Neues Produkt erstellen"}),N?.map(u=>e.jsxs(d,{"data-loc":"client/src/pages/Invoices.tsx:563",value:u.id.toString(),children:[u.name," - ",parseFloat(u.unitPrice).toFixed(2)," CHF/",u.unit]},u.id))]})]})}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:570",className:"col-span-12",children:e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:571",placeholder:"Beschreibung",value:t.description,onChange:u=>$(k,"description",u.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:577",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:578",type:"number",placeholder:"Menge",value:t.quantity,onChange:u=>$(k,"quantity",u.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:585",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:586",placeholder:"Einheit",value:t.unit,onChange:u=>$(k,"unit",u.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:592",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:593",type:"number",step:"0.01",placeholder:"Preis",value:t.unitPrice,onChange:u=>$(k,"unitPrice",u.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:601",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:602",type:"number",step:"0.01",placeholder:"MwSt %",value:t.vatRate,onChange:u=>$(k,"vatRate",u.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:610",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:611",type:"number",step:"0.01",placeholder:"Rabatt %",value:t.discount,onChange:u=>$(k,"discount",u.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:619",className:"col-span-2 flex items-center justify-end",children:v.length>1&&e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:621",size:"sm",variant:"ghost",onClick:()=>ne(k),children:"Entfernen"})})]})},k))})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:636",className:"flex justify-end gap-2 pt-4",children:[e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:637",variant:"outline",onClick:()=>I(!1),children:"Abbrechen"}),e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:640",onClick:le,disabled:A.isPending,children:A.isPending?"Erstelle...":"Rechnung erstellen"})]})]})]}),e.jsx(V,{"data-loc":"client/src/pages/Invoices.tsx:648",open:c,onOpenChange:a,children:e.jsxs(B,{"data-loc":"client/src/pages/Invoices.tsx:649",className:"max-w-2xl",children:[e.jsx(K,{"data-loc":"client/src/pages/Invoices.tsx:650",children:e.jsx(_,{"data-loc":"client/src/pages/Invoices.tsx:651",children:"Neues Produkt erstellen"})}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:653",className:"space-y-4 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:654",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:655",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:656",className:"text-sm font-medium mb-2 block",children:"Produktname *"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:657",value:s.name,onChange:t=>n({...s,name:t.target.value}),placeholder:"z.B. IT-Support"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:663",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:664",className:"text-sm font-medium mb-2 block",children:"Kategorie"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:665",value:s.category,onChange:t=>n({...s,category:t.target.value}),placeholder:"z.B. Dienstleistung"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:672",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:673",className:"text-sm font-medium mb-2 block",children:"Beschreibung"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:674",value:s.description,onChange:t=>n({...s,description:t.target.value}),placeholder:"Kurze Produktbeschreibung"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:680",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:681",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:682",className:"text-sm font-medium mb-2 block",children:"Einheit *"}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:683",value:s.unit,onValueChange:t=>n({...s,unit:t}),children:[e.jsx(H,{"data-loc":"client/src/pages/Invoices.tsx:687",children:e.jsx(M,{"data-loc":"client/src/pages/Invoices.tsx:688"})}),e.jsxs(U,{"data-loc":"client/src/pages/Invoices.tsx:690",children:[e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:691",value:"Stunden",children:"Stunden"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:692",value:"Stück",children:"Stück"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:693",value:"Tage",children:"Tage"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:694",value:"Monate",children:"Monate"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:695",value:"Pauschal",children:"Pauschal"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:699",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:700",className:"text-sm font-medium mb-2 block",children:"Preis (CHF) *"}),e.jsx(p,{"data-loc":"client/src/pages/Invoices.tsx:701",type:"number",step:"0.01",value:s.unitPrice,onChange:t=>n({...s,unitPrice:t.target.value}),placeholder:"120.00"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:709",children:[e.jsx("label",{"data-loc":"client/src/pages/Invoices.tsx:710",className:"text-sm font-medium mb-2 block",children:"MwSt. (%) *"}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:711",value:s.vatRate,onValueChange:t=>n({...s,vatRate:t}),children:[e.jsx(H,{"data-loc":"client/src/pages/Invoices.tsx:715",children:e.jsx(M,{"data-loc":"client/src/pages/Invoices.tsx:716"})}),e.jsxs(U,{"data-loc":"client/src/pages/Invoices.tsx:718",children:[e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:719",value:"0.00",children:"0.00%"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:720",value:"2.60",children:"2.60%"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:721",value:"3.80",children:"3.80%"}),e.jsx(d,{"data-loc":"client/src/pages/Invoices.tsx:722",value:"8.10",children:"8.10%"})]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:727",className:"flex justify-end gap-2 mt-6",children:[e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:728",variant:"outline",onClick:()=>a(!1),children:"Abbrechen"}),e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:731",onClick:()=>{if(!s.name||!s.unitPrice){m.error("Bitte füllen Sie Name und Preis aus");return}P.mutate(s)},disabled:P.isPending,children:P.isPending?"Erstellt...":"Produkt erstellen"})]})]})]})})]})}function De({invoiceId:f,onClose:I,onSuccess:Q}){const{data:r,isLoading:N}=w.invoices.byId.useQuery({id:f}),S=w.invoices.markPaid.useMutation({onSuccess:()=>{m.success("Rechnung als bezahlt markiert"),Q(),I()}}),o=w.email.sendInvoice.useMutation({onSuccess:l=>{m.success("Rechnung erfolgreich per E-Mail versendet"),l.previewUrl&&console.log("E-Mail Vorschau:",l.previewUrl),Q()},onError:l=>{m.error(`Fehler beim Versenden: ${l.message}`)}});return N||!r?e.jsx(V,{"data-loc":"client/src/pages/Invoices.tsx:777",open:!0,onOpenChange:I,children:e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:778",children:e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:779",children:"Lade Rechnung..."})})}):e.jsx(V,{"data-loc":"client/src/pages/Invoices.tsx:786",open:!0,onOpenChange:I,children:e.jsxs(B,{"data-loc":"client/src/pages/Invoices.tsx:787",className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(K,{"data-loc":"client/src/pages/Invoices.tsx:788",children:e.jsxs(_,{"data-loc":"client/src/pages/Invoices.tsx:789",children:["Rechnung ",r.invoiceNumber]})}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:792",className:"space-y-4 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:793",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:794",children:[e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:795",className:"text-sm text-muted-foreground",children:"Kunde"}),e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:796",className:"font-medium",children:r.customer?.name}),e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:797",className:"text-sm",children:r.customer?.email})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:799",children:[e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:800",className:"text-sm text-muted-foreground",children:"Status"}),e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:801",className:"font-medium",children:r.status})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:803",children:[e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:804",className:"text-sm text-muted-foreground",children:"Rechnungsdatum"}),e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:805",className:"font-medium",children:new Date(r.invoiceDate).toLocaleDateString("de-CH")})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:807",children:[e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:808",className:"text-sm text-muted-foreground",children:"Fälligkeitsdatum"}),e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:809",className:"font-medium",children:new Date(r.dueDate).toLocaleDateString("de-CH")})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:813",children:[e.jsx("h3",{"data-loc":"client/src/pages/Invoices.tsx:814",className:"font-semibold mb-2",children:"Positionen"}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:815",className:"space-y-2",children:r.items.map((l,C)=>e.jsxs(z,{"data-loc":"client/src/pages/Invoices.tsx:817",className:"p-3",children:[e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:818",className:"font-medium",children:l.description}),e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:819",className:"text-sm text-muted-foreground",children:[l.quantity," ",l.unit," × ",parseFloat(l.unitPrice).toFixed(2)," CHF",parseFloat(l.discount)>0&&` (${l.discount}% Rabatt)`,"= ",parseFloat(l.total).toFixed(2)," CHF"]})]},C))})]}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:829",className:"border-t pt-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:830",className:"space-y-1 text-right",children:[e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:831",children:["Zwischensumme: ",parseFloat(r.subtotal).toFixed(2)," CHF"]}),parseFloat(r.discountAmount)>0&&e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:833",children:["Rabatt: -",parseFloat(r.discountAmount).toFixed(2)," CHF"]}),e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:835",children:["MwSt: ",parseFloat(r.vatAmount).toFixed(2)," CHF"]}),e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:836",className:"text-xl font-bold",children:["Total: ",parseFloat(r.totalAmount).toFixed(2)," CHF"]})]})}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:842",className:"flex justify-end gap-2 pt-4",children:[e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:843",variant:"outline",onClick:()=>o.mutate({invoiceId:f}),disabled:o.isPending,children:o.isPending?"Wird gesendet...":"Per E-Mail versenden"}),r.status!=="paid"&&e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:851",onClick:()=>S.mutate({id:f}),children:"Als bezahlt markieren"}),e.jsx(x,{"data-loc":"client/src/pages/Invoices.tsx:855",variant:"outline",onClick:I,children:"Schließen"})]})]})]})})}function Pe(){const[,f]=ee(),[I,Q]=g.useState(""),[r,N]=g.useState("all"),[S,o]=g.useState(!1),[l,C]=g.useState(null),{data:y,isLoading:h,refetch:v}=w.quotes.all.useQuery({search:I||void 0,status:r!=="all"?r:void 0}),{data:R}=w.customers.all.useQuery(),L=w.pdf.generateQuotePDF.useMutation({onSuccess:a=>{const s=atob(a.data),n=new Array(s.length);for(let A=0;A<s.length;A++)n[A]=s.charCodeAt(A);const b=new Uint8Array(n),i=new Blob([b],{type:"application/pdf"}),D=window.URL.createObjectURL(i),P=document.createElement("a");P.href=D,P.download=a.filename,document.body.appendChild(P),P.click(),document.body.removeChild(P),window.URL.revokeObjectURL(D),m.success("PDF erfolgreich heruntergeladen")},onError:a=>{m.error(`Fehler beim PDF-Download: ${a.message}`)}}),T=a=>{L.mutate({quoteId:a})},j=a=>{C(a)},F=a=>{switch(a){case"draft":return"bg-gray-500";case"sent":return"bg-blue-500";case"accepted":return"bg-green-500";case"rejected":return"bg-red-500";case"expired":return"bg-gray-400";default:return"bg-gray-500"}},c=a=>{switch(a){case"draft":return"Entwurf";case"sent":return"Versendet";case"accepted":return"Akzeptiert";case"rejected":return"Abgelehnt";case"expired":return"Abgelaufen";default:return a}};return e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:88",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:89",className:"flex items-center justify-between mb-6",children:[e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:90"}),e.jsxs(x,{"data-loc":"client/src/pages/Quotes.tsx:91",onClick:()=>o(!0),className:"gap-2",children:[e.jsx(Z,{"data-loc":"client/src/pages/Quotes.tsx:92",className:"w-4 h-4"}),"Neues Angebot"]})]}),e.jsx(z,{"data-loc":"client/src/pages/Quotes.tsx:98",className:"p-4 mb-6",children:e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:99",className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:100",className:"relative",children:[e.jsx(se,{"data-loc":"client/src/pages/Quotes.tsx:101",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:102",placeholder:"Suche nach Angebotsnummer...",value:I,onChange:a=>Q(a.target.value),className:"pl-10"})]}),e.jsxs(E,{"data-loc":"client/src/pages/Quotes.tsx:110",value:r,onValueChange:N,children:[e.jsx(H,{"data-loc":"client/src/pages/Quotes.tsx:111",children:e.jsx(M,{"data-loc":"client/src/pages/Quotes.tsx:112",placeholder:"Status"})}),e.jsxs(U,{"data-loc":"client/src/pages/Quotes.tsx:114",children:[e.jsx(d,{"data-loc":"client/src/pages/Quotes.tsx:115",value:"all",children:"Alle Status"}),e.jsx(d,{"data-loc":"client/src/pages/Quotes.tsx:116",value:"draft",children:"Entwurf"}),e.jsx(d,{"data-loc":"client/src/pages/Quotes.tsx:117",value:"sent",children:"Versendet"}),e.jsx(d,{"data-loc":"client/src/pages/Quotes.tsx:118",value:"accepted",children:"Akzeptiert"}),e.jsx(d,{"data-loc":"client/src/pages/Quotes.tsx:119",value:"rejected",children:"Abgelehnt"}),e.jsx(d,{"data-loc":"client/src/pages/Quotes.tsx:120",value:"expired",children:"Abgelaufen"})]})]}),e.jsx(x,{"data-loc":"client/src/pages/Quotes.tsx:124",variant:"outline",onClick:()=>{Q(""),N("all")},children:"Zurücksetzen"})]})}),h?e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:135",className:"text-center py-12",children:e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:136",className:"text-muted-foreground",children:"Lade Angebote..."})}):!y||y.length===0?e.jsxs(z,{"data-loc":"client/src/pages/Quotes.tsx:139",className:"p-12 text-center",children:[e.jsx(G,{"data-loc":"client/src/pages/Quotes.tsx:140",className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{"data-loc":"client/src/pages/Quotes.tsx:141",className:"text-lg font-semibold mb-2",children:"Keine Angebote gefunden"}),e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:142",className:"text-muted-foreground mb-4",children:"Erstellen Sie Ihr erstes Angebot, um loszulegen."}),e.jsxs(x,{"data-loc":"client/src/pages/Quotes.tsx:145",onClick:()=>o(!0),children:[e.jsx(Z,{"data-loc":"client/src/pages/Quotes.tsx:146",className:"w-4 h-4 mr-2"}),"Erstes Angebot erstellen"]})]}):e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:151",className:"space-y-4",children:y.map(a=>e.jsx(z,{"data-loc":"client/src/pages/Quotes.tsx:153",className:"p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:154",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:155",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:156",className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{"data-loc":"client/src/pages/Quotes.tsx:157",className:"text-lg font-semibold",children:a.quoteNumber}),e.jsx("span",{"data-loc":"client/src/pages/Quotes.tsx:158",className:`px-2 py-1 rounded-full text-xs text-white ${F(a.status)}`,children:c(a.status)})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:162",className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:163",children:[e.jsx("strong",{"data-loc":"client/src/pages/Quotes.tsx:163",children:"Kunde:"})," ",a.customer?.name||"Unbekannt"]}),e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:164",children:[e.jsx("strong",{"data-loc":"client/src/pages/Quotes.tsx:164",children:"Datum:"})," ",new Date(a.quoteDate).toLocaleDateString("de-CH")]}),e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:165",children:[e.jsx("strong",{"data-loc":"client/src/pages/Quotes.tsx:165",children:"Gültig bis:"})," ",new Date(a.validUntil).toLocaleDateString("de-CH")]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:168",className:"text-right",children:[e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:169",className:"text-2xl font-bold text-primary mb-4",children:[parseFloat(a.totalAmount).toFixed(2)," ",a.currency]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:172",className:"flex gap-2",children:[e.jsxs(x,{"data-loc":"client/src/pages/Quotes.tsx:173",variant:"outline",size:"sm",onClick:()=>j(a.id),children:[e.jsx(te,{"data-loc":"client/src/pages/Quotes.tsx:178",className:"w-4 h-4 mr-1"}),"Ansehen"]}),e.jsxs(x,{"data-loc":"client/src/pages/Quotes.tsx:181",variant:"outline",size:"sm",onClick:()=>T(a.id),children:[e.jsx(ae,{"data-loc":"client/src/pages/Quotes.tsx:186",className:"w-4 h-4 mr-1"}),"PDF"]})]})]})]})},a.id))}),e.jsx(Ae,{"data-loc":"client/src/pages/Quotes.tsx:198",open:S,onOpenChange:o,customers:R||[],onSuccess:()=>{v(),o(!1)}}),l&&e.jsx(Te,{"data-loc":"client/src/pages/Quotes.tsx:210",quoteId:l,onClose:()=>C(null),onSuccess:v,onConvertToInvoice:()=>{v(),C(null),f("/invoices")}})]})}function Ae({open:f,onOpenChange:I,customers:Q,onSuccess:r}){const{data:N}=w.products.all.useQuery({isActive:!0}),[S,o]=g.useState(null),[l,C]=g.useState(""),[y,h]=g.useState(""),[v,R]=g.useState([{description:"",quantity:"1",unit:"Stunden",unitPrice:"0",vatRate:"8.10",discount:"0"}]),L=w.quotes.create.useMutation({onSuccess:()=>{m.success("Angebot erfolgreich erstellt"),r(),T()},onError:n=>{m.error(`Fehler: ${n.message}`)}}),T=()=>{o(null),C(""),h(""),R([{description:"",quantity:"1",unit:"Stunden",unitPrice:"0",vatRate:"8.10",discount:"0"}])},j=()=>{R([...v,{description:"",quantity:"1",unit:"Stunden",unitPrice:"0",vatRate:"8.10",discount:"0"}])},F=n=>{R(v.filter((b,i)=>i!==n))},c=(n,b,i)=>{const D=[...v];D[n][b]=i,R(D)},a=(n,b)=>{if(!b||!N)return;const i=N.find(P=>P.id===parseInt(b));if(!i)return;const D=[...v];D[n]={...D[n],description:i.name,unit:i.unit,unitPrice:i.unitPrice,vatRate:i.vatRate},R(D)},s=()=>{if(!S||!l||v.length===0){m.error("Bitte füllen Sie alle Pflichtfelder aus");return}L.mutate({customerId:S,validUntil:new Date(l),notes:y,items:v})};return e.jsx(V,{"data-loc":"client/src/pages/Quotes.tsx:298",open:f,onOpenChange:I,children:e.jsxs(B,{"data-loc":"client/src/pages/Quotes.tsx:299",className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(K,{"data-loc":"client/src/pages/Quotes.tsx:300",children:e.jsx(_,{"data-loc":"client/src/pages/Quotes.tsx:301",children:"Neues Angebot erstellen"})}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:304",className:"space-y-4 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:305",children:[e.jsx("label",{"data-loc":"client/src/pages/Quotes.tsx:306",className:"text-sm font-medium mb-2 block",children:"Kunde *"}),e.jsxs(E,{"data-loc":"client/src/pages/Quotes.tsx:307",value:S?.toString()||"",onValueChange:n=>o(parseInt(n)),children:[e.jsx(H,{"data-loc":"client/src/pages/Quotes.tsx:311",children:e.jsx(M,{"data-loc":"client/src/pages/Quotes.tsx:312",placeholder:"Kunde auswählen"})}),e.jsx(U,{"data-loc":"client/src/pages/Quotes.tsx:314",children:Q.map(n=>e.jsxs(d,{"data-loc":"client/src/pages/Quotes.tsx:316",value:n.id.toString(),children:[n.name," (",n.email,")"]},n.id))})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:324",children:[e.jsx("label",{"data-loc":"client/src/pages/Quotes.tsx:325",className:"text-sm font-medium mb-2 block",children:"Gültig bis *"}),e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:326",type:"date",value:l,onChange:n=>C(n.target.value)})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:333",children:[e.jsx("label",{"data-loc":"client/src/pages/Quotes.tsx:334",className:"text-sm font-medium mb-2 block",children:"Notizen"}),e.jsx("textarea",{"data-loc":"client/src/pages/Quotes.tsx:335",className:"w-full min-h-[80px] px-3 py-2 rounded-md border border-input bg-background",value:y,onChange:n=>h(n.target.value),placeholder:"Interne Notizen..."})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:343",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:344",className:"flex items-center justify-between mb-2",children:[e.jsx("label",{"data-loc":"client/src/pages/Quotes.tsx:345",className:"text-sm font-medium",children:"Positionen *"}),e.jsxs(x,{"data-loc":"client/src/pages/Quotes.tsx:346",size:"sm",variant:"outline",onClick:j,children:[e.jsx(Z,{"data-loc":"client/src/pages/Quotes.tsx:347",className:"w-4 h-4 mr-1"}),"Position hinzufügen"]})]}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:352",className:"space-y-3",children:v.map((n,b)=>e.jsx(z,{"data-loc":"client/src/pages/Quotes.tsx:354",className:"p-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:355",className:"grid grid-cols-12 gap-2",children:[e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:356",className:"col-span-12 mb-2",children:e.jsxs(E,{"data-loc":"client/src/pages/Quotes.tsx:357",onValueChange:i=>a(b,i),children:[e.jsx(H,{"data-loc":"client/src/pages/Quotes.tsx:358",children:e.jsx(M,{"data-loc":"client/src/pages/Quotes.tsx:359",placeholder:"Produkt aus Katalog wählen (optional)"})}),e.jsx(U,{"data-loc":"client/src/pages/Quotes.tsx:361",children:N?.map(i=>e.jsxs(d,{"data-loc":"client/src/pages/Quotes.tsx:363",value:i.id.toString(),children:[i.name," - ",parseFloat(i.unitPrice).toFixed(2)," CHF/",i.unit]},i.id))})]})}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:370",className:"col-span-12",children:e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:371",placeholder:"Beschreibung",value:n.description,onChange:i=>c(b,"description",i.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:377",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:378",type:"number",placeholder:"Menge",value:n.quantity,onChange:i=>c(b,"quantity",i.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:385",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:386",placeholder:"Einheit",value:n.unit,onChange:i=>c(b,"unit",i.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:392",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:393",type:"number",step:"0.01",placeholder:"Preis",value:n.unitPrice,onChange:i=>c(b,"unitPrice",i.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:401",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:402",type:"number",step:"0.01",placeholder:"MwSt %",value:n.vatRate,onChange:i=>c(b,"vatRate",i.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:410",className:"col-span-2",children:e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:411",type:"number",step:"0.01",placeholder:"Rabatt %",value:n.discount,onChange:i=>c(b,"discount",i.target.value)})}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:419",className:"col-span-2 flex items-center justify-end",children:v.length>1&&e.jsx(x,{"data-loc":"client/src/pages/Quotes.tsx:421",size:"sm",variant:"ghost",onClick:()=>F(b),children:"Entfernen"})})]})},b))})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:436",className:"flex justify-end gap-2 pt-4",children:[e.jsx(x,{"data-loc":"client/src/pages/Quotes.tsx:437",variant:"outline",onClick:()=>I(!1),children:"Abbrechen"}),e.jsx(x,{"data-loc":"client/src/pages/Quotes.tsx:440",onClick:s,disabled:L.isPending,children:L.isPending?"Erstelle...":"Angebot erstellen"})]})]})]})})}function Te({quoteId:f,onClose:I,onSuccess:Q,onConvertToInvoice:r}){const[N,S]=g.useState(""),{data:o,isLoading:l}=w.quotes.byId.useQuery({id:f}),C=w.quotes.convertToInvoice.useMutation({onSuccess:h=>{m.success(`Rechnung ${h.invoiceNumber} erfolgreich erstellt`),r()},onError:h=>{m.error(`Fehler: ${h.message}`)}}),y=()=>{if(!N){m.error("Bitte wählen Sie ein Fälligkeitsdatum");return}C.mutate({quoteId:f,dueDate:new Date(N)})};return l||!o?e.jsx(V,{"data-loc":"client/src/pages/Quotes.tsx:479",open:!0,onOpenChange:I,children:e.jsx(B,{"data-loc":"client/src/pages/Quotes.tsx:480",children:e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:481",children:"Lade Angebot..."})})}):e.jsx(V,{"data-loc":"client/src/pages/Quotes.tsx:488",open:!0,onOpenChange:I,children:e.jsxs(B,{"data-loc":"client/src/pages/Quotes.tsx:489",className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(K,{"data-loc":"client/src/pages/Quotes.tsx:490",children:e.jsxs(_,{"data-loc":"client/src/pages/Quotes.tsx:491",children:["Angebot ",o.quoteNumber]})}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:494",className:"space-y-4 mt-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:495",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:496",children:[e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:497",className:"text-sm text-muted-foreground",children:"Kunde"}),e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:498",className:"font-medium",children:o.customer?.name}),e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:499",className:"text-sm",children:o.customer?.email})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:501",children:[e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:502",className:"text-sm text-muted-foreground",children:"Status"}),e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:503",className:"font-medium",children:o.status})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:505",children:[e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:506",className:"text-sm text-muted-foreground",children:"Angebotsdatum"}),e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:507",className:"font-medium",children:new Date(o.quoteDate).toLocaleDateString("de-CH")})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:509",children:[e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:510",className:"text-sm text-muted-foreground",children:"Gültig bis"}),e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:511",className:"font-medium",children:new Date(o.validUntil).toLocaleDateString("de-CH")})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:515",children:[e.jsx("h3",{"data-loc":"client/src/pages/Quotes.tsx:516",className:"font-semibold mb-2",children:"Positionen"}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:517",className:"space-y-2",children:o.items.map((h,v)=>e.jsxs(z,{"data-loc":"client/src/pages/Quotes.tsx:519",className:"p-3",children:[e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:520",className:"font-medium",children:h.description}),e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:521",className:"text-sm text-muted-foreground",children:[h.quantity," ",h.unit," × ",parseFloat(h.unitPrice).toFixed(2)," CHF",parseFloat(h.discount)>0&&` (${h.discount}% Rabatt)`,"= ",parseFloat(h.total).toFixed(2)," CHF"]})]},v))})]}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:531",className:"border-t pt-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:532",className:"space-y-1 text-right",children:[e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:533",children:["Zwischensumme: ",parseFloat(o.subtotal).toFixed(2)," CHF"]}),parseFloat(o.discountAmount)>0&&e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:535",children:["Rabatt: -",parseFloat(o.discountAmount).toFixed(2)," CHF"]}),e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:537",children:["MwSt: ",parseFloat(o.vatAmount).toFixed(2)," CHF"]}),e.jsxs("p",{"data-loc":"client/src/pages/Quotes.tsx:538",className:"text-xl font-bold",children:["Total: ",parseFloat(o.totalAmount).toFixed(2)," CHF"]})]})}),o.status!=="accepted"&&!o.invoiceId&&e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:545",className:"border-t pt-4",children:[e.jsx("h3",{"data-loc":"client/src/pages/Quotes.tsx:546",className:"font-semibold mb-2",children:"In Rechnung umwandeln"}),e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:547",className:"flex gap-2 items-end",children:[e.jsxs("div",{"data-loc":"client/src/pages/Quotes.tsx:548",className:"flex-1",children:[e.jsx("label",{"data-loc":"client/src/pages/Quotes.tsx:549",className:"text-sm font-medium mb-2 block",children:"Fälligkeitsdatum"}),e.jsx(p,{"data-loc":"client/src/pages/Quotes.tsx:550",type:"date",value:N,onChange:h=>S(h.target.value)})]}),e.jsxs(x,{"data-loc":"client/src/pages/Quotes.tsx:556",onClick:y,disabled:C.isPending,children:[e.jsx(pe,{"data-loc":"client/src/pages/Quotes.tsx:557",className:"w-4 h-4 mr-2"}),C.isPending?"Erstelle...":"In Rechnung umwandeln"]})]})]}),o.invoiceId&&e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:565",className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:e.jsx("p",{"data-loc":"client/src/pages/Quotes.tsx:566",className:"text-sm text-green-600 dark:text-green-400",children:"✓ Dieses Angebot wurde bereits in eine Rechnung umgewandelt"})}),e.jsx("div",{"data-loc":"client/src/pages/Quotes.tsx:572",className:"flex justify-end gap-2 pt-4",children:e.jsx(x,{"data-loc":"client/src/pages/Quotes.tsx:573",variant:"outline",onClick:I,children:"Schließen"})})]})]})})}je.register(be,Ie,fe,Ne,Ce,Qe,ye,we);function ze(){const f=g.useRef(null),[I,Q]=g.useState(6),[r,N]=g.useState(null),[S,o]=g.useState(!1),{data:l,isLoading:C}=w.analytics.getRevenueByMonth.useQuery({months:I}),{data:y}=w.analytics.getInvoicesByMonth.useQuery({month:r||""},{enabled:!!r}),h=async()=>{if(f.current)try{const c=await X(f.current,{backgroundColor:"#000",scale:2}),a=document.createElement("a");a.download="umsatz-trend.png",a.href=c.toDataURL(),a.click(),m.success("Chart als PNG exportiert")}catch{m.error("Fehler beim Exportieren")}},v=async()=>{if(f.current)try{const c=await X(f.current,{backgroundColor:"#000",scale:2}),a=c.toDataURL("image/png"),s=new ve({orientation:"landscape",unit:"px",format:[c.width,c.height]});s.addImage(a,"PNG",0,0,c.width,c.height),s.save("umsatz-trend.pdf"),m.success("Chart als PDF exportiert")}catch{m.error("Fehler beim Exportieren")}},R=()=>{const c=l||[];if(c.length===0){m.error("Keine Daten zum Exportieren");return}const a=c.map(i=>`${i.month},${i.amount}`).join(`
`),s=`Monat,Betrag
`,n=new Blob([s+a],{type:"text/csv"}),b=document.createElement("a");b.download="umsatz-trend.csv",b.href=URL.createObjectURL(n),b.click(),m.success("Daten als CSV exportiert")},L=(c,a)=>{if(a.length>0&&l){const s=a[0].index,n=l[s];N(n.fullDate),o(!0)}},T={labels:l?.map(c=>c.month)||[],datasets:[{label:"Umsatz (CHF)",data:l?.map(c=>c.amount)||[],borderColor:"rgb(234, 179, 8)",backgroundColor:"rgba(234, 179, 8, 0.1)",fill:!0,tension:.4}]},j={responsive:!0,maintainAspectRatio:!1,onClick:L,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",padding:12,titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,callbacks:{label:c=>`Umsatz: CHF ${c.parsed.y.toLocaleString("de-CH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(255, 255, 255, 0.05)"},ticks:{color:"rgba(255, 255, 255, 0.6)",callback:c=>`CHF ${c.toLocaleString("de-CH")}`}},x:{grid:{display:!1},ticks:{color:"rgba(255, 255, 255, 0.6)"}}}},F=c=>{const a=typeof c=="string"?parseFloat(c):c;return new Intl.NumberFormat("de-CH",{style:"currency",currency:"CHF"}).format(a)};return e.jsxs(e.Fragment,{children:[e.jsxs(z,{"data-loc":"client/src/components/RevenueTrendChart.tsx:185",className:"bg-white/5 border-white/10",children:[e.jsx(de,{"data-loc":"client/src/components/RevenueTrendChart.tsx:186",children:e.jsxs("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:187",className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsx(xe,{"data-loc":"client/src/components/RevenueTrendChart.tsx:188",className:"text-lg",children:"Umsatz-Trend"}),e.jsxs("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:189",className:"flex items-center gap-2",children:[e.jsxs(E,{"data-loc":"client/src/components/RevenueTrendChart.tsx:190",value:I.toString(),onValueChange:c=>Q(parseInt(c)),children:[e.jsx(H,{"data-loc":"client/src/components/RevenueTrendChart.tsx:191",className:"w-[140px] h-8",children:e.jsx(M,{"data-loc":"client/src/components/RevenueTrendChart.tsx:192"})}),e.jsxs(U,{"data-loc":"client/src/components/RevenueTrendChart.tsx:194",children:[e.jsx(d,{"data-loc":"client/src/components/RevenueTrendChart.tsx:195",value:"3",children:"Letzte 3 Monate"}),e.jsx(d,{"data-loc":"client/src/components/RevenueTrendChart.tsx:196",value:"6",children:"Letzte 6 Monate"}),e.jsx(d,{"data-loc":"client/src/components/RevenueTrendChart.tsx:197",value:"12",children:"Letztes Jahr"}),e.jsx(d,{"data-loc":"client/src/components/RevenueTrendChart.tsx:198",value:"24",children:"Letzte 2 Jahre"})]})]}),e.jsx(x,{"data-loc":"client/src/components/RevenueTrendChart.tsx:201",variant:"ghost",size:"sm",onClick:h,className:"h-8 px-2",children:e.jsx(ge,{"data-loc":"client/src/components/RevenueTrendChart.tsx:207",className:"h-4 w-4"})}),e.jsx(x,{"data-loc":"client/src/components/RevenueTrendChart.tsx:209",variant:"ghost",size:"sm",onClick:v,className:"h-8 px-2",children:e.jsx(G,{"data-loc":"client/src/components/RevenueTrendChart.tsx:215",className:"h-4 w-4"})}),e.jsx(x,{"data-loc":"client/src/components/RevenueTrendChart.tsx:217",variant:"ghost",size:"sm",onClick:R,className:"h-8 px-2",children:e.jsx(me,{"data-loc":"client/src/components/RevenueTrendChart.tsx:223",className:"h-4 w-4"})})]})]})}),e.jsx(ue,{"data-loc":"client/src/components/RevenueTrendChart.tsx:228",children:C?e.jsx("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:230",className:"h-64 flex items-center justify-center",children:e.jsx("p",{"data-loc":"client/src/components/RevenueTrendChart.tsx:231",className:"text-muted-foreground",children:"Lade Daten..."})}):l&&l.length>0?e.jsx("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:234",ref:f,className:"h-64",children:e.jsx(he,{"data-loc":"client/src/components/RevenueTrendChart.tsx:235",data:T,options:j})}):e.jsx("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:238",className:"h-64 flex items-center justify-center",children:e.jsx("p",{"data-loc":"client/src/components/RevenueTrendChart.tsx:239",className:"text-muted-foreground",children:"Keine Umsatzdaten verfügbar"})})})]}),e.jsx(V,{"data-loc":"client/src/components/RevenueTrendChart.tsx:246",open:S,onOpenChange:o,children:e.jsxs(B,{"data-loc":"client/src/components/RevenueTrendChart.tsx:247",className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx(K,{"data-loc":"client/src/components/RevenueTrendChart.tsx:248",children:e.jsxs(_,{"data-loc":"client/src/components/RevenueTrendChart.tsx:249",children:["Rechnungsdetails - ",r&&l?.find(c=>c.fullDate===r)?.month]})}),e.jsx("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:253",className:"space-y-4",children:y&&y.length>0?e.jsxs("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:255",className:"space-y-2",children:[y.map(c=>e.jsx(z,{"data-loc":"client/src/components/RevenueTrendChart.tsx:257",className:"p-4 bg-white/5 border-white/10",children:e.jsxs("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:258",className:"flex justify-between items-start",children:[e.jsxs("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:259",children:[e.jsx("p",{"data-loc":"client/src/components/RevenueTrendChart.tsx:260",className:"font-semibold",children:c.invoiceNumber}),e.jsx("p",{"data-loc":"client/src/components/RevenueTrendChart.tsx:261",className:"text-sm text-muted-foreground",children:new Date(c.invoiceDate).toLocaleDateString("de-CH")})]}),e.jsxs("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:265",className:"text-right",children:[e.jsx("p",{"data-loc":"client/src/components/RevenueTrendChart.tsx:266",className:"font-semibold",children:F(c.totalAmount)}),e.jsx("p",{"data-loc":"client/src/components/RevenueTrendChart.tsx:267",className:"text-sm text-muted-foreground capitalize",children:c.status})]})]})},c.id)),e.jsx("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:272",className:"pt-4 border-t border-white/10",children:e.jsxs("div",{"data-loc":"client/src/components/RevenueTrendChart.tsx:273",className:"flex justify-between items-center font-bold",children:[e.jsx("span",{"data-loc":"client/src/components/RevenueTrendChart.tsx:274",children:"Gesamt:"}),e.jsx("span",{"data-loc":"client/src/components/RevenueTrendChart.tsx:275",children:F(y.reduce((c,a)=>c+parseFloat(a.totalAmount),0))})]})})]}):e.jsx("p",{"data-loc":"client/src/components/RevenueTrendChart.tsx:286",className:"text-muted-foreground text-center py-8",children:"Keine Rechnungen für diesen Monat"})})]})})]})}function ns(){const[f,I]=g.useState("invoices"),[,Q]=ee();return e.jsx("div",{"data-loc":"client/src/pages/Accounting.tsx:15",className:"min-h-screen bg-background",children:e.jsxs("div",{"data-loc":"client/src/pages/Accounting.tsx:16",className:"container mx-auto py-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/Accounting.tsx:17",className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Accounting.tsx:18",className:"flex items-center gap-4",children:[e.jsxs(x,{"data-loc":"client/src/pages/Accounting.tsx:19",variant:"ghost",onClick:()=>Q("/admin"),size:"sm",children:[e.jsx(Se,{"data-loc":"client/src/pages/Accounting.tsx:24",className:"h-4 w-4 mr-2"}),"Zurück"]}),e.jsxs("div",{"data-loc":"client/src/pages/Accounting.tsx:27",children:[e.jsx("h1",{"data-loc":"client/src/pages/Accounting.tsx:28",className:"text-3xl font-bold",children:"Buchhaltung"}),e.jsx("p",{"data-loc":"client/src/pages/Accounting.tsx:29",className:"text-muted-foreground mt-1",children:"Verwalten Sie Rechnungen und Angebote"})]})]}),e.jsxs(x,{"data-loc":"client/src/pages/Accounting.tsx:32",variant:"outline",onClick:()=>Q("/reporting"),className:"flex items-center gap-2",children:[e.jsx(Re,{"data-loc":"client/src/pages/Accounting.tsx:37",className:"h-4 w-4"}),"Reporting"]})]}),e.jsx("div",{"data-loc":"client/src/pages/Accounting.tsx:43",className:"mb-8",children:e.jsx(ze,{"data-loc":"client/src/pages/Accounting.tsx:44"})}),e.jsxs(oe,{"data-loc":"client/src/pages/Accounting.tsx:47",value:f,onValueChange:I,className:"w-full",children:[e.jsxs(re,{"data-loc":"client/src/pages/Accounting.tsx:48",className:"mb-6",children:[e.jsx(Y,{"data-loc":"client/src/pages/Accounting.tsx:49",value:"invoices",children:"Rechnungen"}),e.jsx(Y,{"data-loc":"client/src/pages/Accounting.tsx:50",value:"quotes",children:"Angebote"})]}),e.jsx(W,{"data-loc":"client/src/pages/Accounting.tsx:53",value:"invoices",className:"mt-0",children:e.jsx(Fe,{"data-loc":"client/src/pages/Accounting.tsx:54"})}),e.jsx(W,{"data-loc":"client/src/pages/Accounting.tsx:57",value:"quotes",className:"mt-0",children:e.jsx(Pe,{"data-loc":"client/src/pages/Accounting.tsx:58"})})]})]})})}export{ns as default};
