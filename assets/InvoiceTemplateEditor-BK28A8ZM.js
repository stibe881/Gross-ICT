import{N as h,j as d,A as p,x as e}from"./index-BN9GAmQT.js";import{L as N}from"./LoadingSkeleton-DmaNQS4_.js";import{B as o}from"./button-B7XicF_D.js";import{I as r}from"./input-DAxyQcQ6.js";import{C as n}from"./card-DDCG5iAJ.js";import{L as i}from"./label-WV9rmlgK.js";import{S as b}from"./save-DcPehqtW.js";import{P as y}from"./palette-BqcrBhrU.js";import{U as F}from"./upload-BZj3U29R.js";import{F as C}from"./file-text-zOWEdpec.js";import{E as w}from"./eye-DH5-FCbl.js";import"./skeleton-B4p3r7MP.js";import"./index-Ci_qB1WW.js";import"./dialog-BFxkyGdG.js";import"./index-DkLA8Hun.js";import"./index-BxbciWQS.js";function Z(){const{data:c,isLoading:E,refetch:u}=h.accountingSettings.get.useQuery(),[t,s]=d.useState({primaryColor:"#D4AF37",logoUrl:"",invoicePrefix:"",quotePrefix:"OFF-",invoiceFooter:"",quoteFooter:""}),[l,m]=d.useState("invoice"),x=h.accountingSettings.update.useMutation({onSuccess:()=>{p.success("Vorlageneinstellungen erfolgreich gespeichert"),u()},onError:a=>{p.error(`Fehler: ${a.message}`)}});d.useEffect(()=>{c&&s({primaryColor:c.primaryColor||"#D4AF37",logoUrl:c.logoUrl||"",invoicePrefix:c.invoicePrefix||"",quotePrefix:c.quotePrefix||"OFF-",invoiceFooter:c.invoiceFooter||"",quoteFooter:c.quoteFooter||""})},[c]);const j=()=>{c&&x.mutate({companyName:c.companyName,companyEmail:c.companyEmail||"",...t})},I=async a=>{const g=a.target.files?.[0];if(!g)return;p.info("Logo-Upload wird in Produktion über S3 implementiert");const v=new FileReader;v.onload=T=>{const f=T.target?.result;s({...t,logoUrl:f})},v.readAsDataURL(g)};return E?e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:76",className:"min-h-screen bg-background p-8",children:e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:77",className:"container mx-auto",children:e.jsx(N,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:78",variant:"form",rows:8})})}):e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:85",className:"min-h-screen bg-background",children:e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:86",className:"container mx-auto py-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:87",className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:88",children:[e.jsx("h1",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:89",className:"text-3xl font-bold",children:"Rechnungsvorlagen-Editor"}),e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:90",className:"text-muted-foreground mt-1",children:"Passen Sie das Design Ihrer Rechnungen und Offerten an"})]}),e.jsxs(o,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:94",onClick:j,disabled:x.isPending,className:"gap-2",children:[e.jsx(b,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:95",className:"w-4 h-4"}),"Speichern"]})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:100",className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:102",className:"space-y-6",children:[e.jsxs(n,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:104",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:105",className:"flex items-center gap-2 mb-4",children:[e.jsx(y,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:106",className:"w-5 h-5 text-primary"}),e.jsx("h2",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:107",className:"text-xl font-semibold",children:"Farben"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:110",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:111",children:[e.jsx(i,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:112",htmlFor:"primaryColor",children:"Primärfarbe"}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:113",className:"flex gap-3 mt-2",children:[e.jsx(r,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:114",id:"primaryColor",type:"color",value:t.primaryColor,onChange:a=>s({...t,primaryColor:a.target.value}),className:"w-20 h-10 cursor-pointer"}),e.jsx(r,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:121",type:"text",value:t.primaryColor,onChange:a=>s({...t,primaryColor:a.target.value}),placeholder:"#D4AF37",className:"flex-1"})]}),e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:129",className:"text-xs text-muted-foreground mt-1",children:"Wird für Akzente, Rahmen und Hervorhebungen verwendet"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:134",className:"grid grid-cols-3 gap-2",children:[e.jsxs(o,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:135",variant:"outline",size:"sm",onClick:()=>s({...t,primaryColor:"#D4AF37"}),className:"gap-2",children:[e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:141",className:"w-4 h-4 rounded",style:{backgroundColor:"#D4AF37"}}),"Gold"]}),e.jsxs(o,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:144",variant:"outline",size:"sm",onClick:()=>s({...t,primaryColor:"#2563eb"}),className:"gap-2",children:[e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:150",className:"w-4 h-4 rounded",style:{backgroundColor:"#2563eb"}}),"Blau"]}),e.jsxs(o,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:153",variant:"outline",size:"sm",onClick:()=>s({...t,primaryColor:"#16a34a"}),className:"gap-2",children:[e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:159",className:"w-4 h-4 rounded",style:{backgroundColor:"#16a34a"}}),"Grün"]})]})]})]}),e.jsxs(n,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:167",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:168",className:"flex items-center gap-2 mb-4",children:[e.jsx(F,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:169",className:"w-5 h-5 text-primary"}),e.jsx("h2",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:170",className:"text-xl font-semibold",children:"Logo"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:173",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:174",children:[e.jsx(i,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:175",htmlFor:"logoUpload",children:"Logo hochladen"}),e.jsx(r,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:176",id:"logoUpload",type:"file",accept:"image/*",onChange:I,className:"mt-2"}),e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:183",className:"text-xs text-muted-foreground mt-1",children:"Empfohlen: PNG oder SVG, max. 500x200 Pixel"})]}),t.logoUrl&&e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:189",className:"border rounded-lg p-4 bg-muted/50",children:[e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:190",className:"text-sm font-medium mb-2",children:"Aktuelle Logo-Vorschau:"}),e.jsx("img",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:191",src:t.logoUrl,alt:"Logo Preview",className:"max-h-24 object-contain"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:199",children:[e.jsx(i,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:200",htmlFor:"logoUrl",children:"Logo-URL (alternativ)"}),e.jsx(r,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:201",id:"logoUrl",type:"url",value:t.logoUrl,onChange:a=>s({...t,logoUrl:a.target.value}),placeholder:"https://example.com/logo.png",className:"mt-2"})]})]})]}),e.jsxs(n,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:214",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:215",className:"flex items-center gap-2 mb-4",children:[e.jsx(C,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:216",className:"w-5 h-5 text-primary"}),e.jsx("h2",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:217",className:"text-xl font-semibold",children:"Dokument-Einstellungen"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:220",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:221",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:222",children:[e.jsx(i,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:223",htmlFor:"invoicePrefix",children:"Rechnungs-Präfix"}),e.jsx(r,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:224",id:"invoicePrefix",value:t.invoicePrefix,onChange:a=>s({...t,invoicePrefix:a.target.value}),placeholder:"RE-",className:"mt-2"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:232",children:[e.jsx(i,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:233",htmlFor:"quotePrefix",children:"Offerten-Präfix"}),e.jsx(r,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:234",id:"quotePrefix",value:t.quotePrefix,onChange:a=>s({...t,quotePrefix:a.target.value}),placeholder:"OFF-",className:"mt-2"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:244",children:[e.jsx(i,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:245",htmlFor:"invoiceFooter",children:"Rechnungs-Fußzeile"}),e.jsx("textarea",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:246",id:"invoiceFooter",value:t.invoiceFooter,onChange:a=>s({...t,invoiceFooter:a.target.value}),placeholder:"Vielen Dank für Ihr Vertrauen...",className:"w-full mt-2 min-h-[80px] px-3 py-2 rounded-md border border-input bg-background text-sm"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:255",children:[e.jsx(i,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:256",htmlFor:"quoteFooter",children:"Offerten-Fußzeile"}),e.jsx("textarea",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:257",id:"quoteFooter",value:t.quoteFooter,onChange:a=>s({...t,quoteFooter:a.target.value}),placeholder:"Gerne stehen wir für Fragen zur Verfügung...",className:"w-full mt-2 min-h-[80px] px-3 py-2 rounded-md border border-input bg-background text-sm"})]})]})]})]}),e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:270",className:"space-y-6",children:e.jsxs(n,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:271",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:272",className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:273",className:"flex items-center gap-2",children:[e.jsx(w,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:274",className:"w-5 h-5 text-primary"}),e.jsx("h2",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:275",className:"text-xl font-semibold",children:"Vorschau"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:277",className:"flex gap-2",children:[e.jsx(o,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:278",variant:l==="invoice"?"default":"outline",size:"sm",onClick:()=>m("invoice"),children:"Rechnung"}),e.jsx(o,{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:285",variant:l==="quote"?"default":"outline",size:"sm",onClick:()=>m("quote"),children:"Offerte"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:296",className:"border rounded-lg p-8 bg-white text-black min-h-[600px]",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:298",className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:299",children:[t.logoUrl&&e.jsx("img",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:301",src:t.logoUrl,alt:"Company Logo",className:"max-h-16 mb-4"}),e.jsx("h3",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:307",className:"text-lg font-bold",children:"Gross ICT"}),e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:308",className:"text-sm text-gray-600",children:"Musterstrasse 123"}),e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:309",className:"text-sm text-gray-600",children:"8000 Zürich"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:311",className:"text-right",children:[e.jsx("h1",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:312",className:"text-3xl font-bold",style:{color:t.primaryColor},children:l==="invoice"?"RECHNUNG":"OFFERTE"}),e.jsxs("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:315",className:"text-sm text-gray-600 mt-2",children:["Nr: ",l==="invoice"?t.invoicePrefix:t.quotePrefix,"2024-001"]}),e.jsxs("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:318",className:"text-sm text-gray-600",children:["Datum: ",new Date().toLocaleDateString("de-CH")]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:323",className:"mb-8",children:[e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:324",className:"font-semibold",children:"Kunde:"}),e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:325",children:"Musterfirma AG"}),e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:326",className:"text-sm text-gray-600",children:"Beispielweg 456"}),e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:327",className:"text-sm text-gray-600",children:"8001 Zürich"})]}),e.jsxs("table",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:331",className:"w-full mb-8",children:[e.jsx("thead",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:332",children:e.jsxs("tr",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:333",style:{backgroundColor:`${t.primaryColor}20`,borderLeft:`4px solid ${t.primaryColor}`},children:[e.jsx("th",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:334",className:"text-left p-2 text-sm",children:"Beschreibung"}),e.jsx("th",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:335",className:"text-right p-2 text-sm",children:"Menge"}),e.jsx("th",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:336",className:"text-right p-2 text-sm",children:"Preis"}),e.jsx("th",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:337",className:"text-right p-2 text-sm",children:"Total"})]})}),e.jsxs("tbody",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:340",children:[e.jsxs("tr",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:341",className:"border-b",children:[e.jsx("td",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:342",className:"p-2 text-sm",children:"IT-Support Paket"}),e.jsx("td",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:343",className:"text-right p-2 text-sm",children:"1 Monat"}),e.jsx("td",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:344",className:"text-right p-2 text-sm",children:"1'500.00"}),e.jsx("td",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:345",className:"text-right p-2 text-sm",children:"1'500.00"})]}),e.jsxs("tr",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:347",className:"border-b",children:[e.jsx("td",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:348",className:"p-2 text-sm",children:"Server-Wartung"}),e.jsx("td",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:349",className:"text-right p-2 text-sm",children:"2 Std."}),e.jsx("td",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:350",className:"text-right p-2 text-sm",children:"150.00"}),e.jsx("td",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:351",className:"text-right p-2 text-sm",children:"300.00"})]})]})]}),e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:357",className:"flex justify-end mb-8",children:e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:358",className:"w-64",children:[e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:359",className:"flex justify-between py-1 text-sm",children:[e.jsx("span",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:360",children:"Zwischensumme:"}),e.jsx("span",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:361",children:"1'800.00 CHF"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:363",className:"flex justify-between py-1 text-sm",children:[e.jsx("span",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:364",children:"MwSt (8.1%):"}),e.jsx("span",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:365",children:"145.80 CHF"})]}),e.jsxs("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:367",className:"flex justify-between py-2 font-bold border-t-2",style:{borderColor:t.primaryColor},children:[e.jsx("span",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:368",children:"Gesamtbetrag:"}),e.jsx("span",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:369",children:"1'945.80 CHF"})]})]})}),(l==="invoice"?t.invoiceFooter:t.quoteFooter)&&e.jsx("div",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:376",className:"border-t pt-4 mt-8",children:e.jsx("p",{"data-loc":"client/src/pages/InvoiceTemplateEditor.tsx:377",className:"text-xs text-gray-600 whitespace-pre-wrap",children:l==="invoice"?t.invoiceFooter:t.quoteFooter})})]})]})})]})]})})}export{Z as default};
