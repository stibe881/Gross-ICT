import{c as ie,N as d,x as e,j as o,A as n,Q as Xe,J as Ye,S as et,T as be}from"./index-BN9GAmQT.js";import{B as m}from"./button-B7XicF_D.js";import{C as b,d as N,a as y,c as $,b as D}from"./card-DDCG5iAJ.js";import{B as z}from"./badge-DuBy3M6P.js";import{S as L,a as A,b as B,c as E,d as s}from"./select-lpC4X7iX.js";import{T as tt}from"./TicketDetail-CuXYoXNA.js";import{C as at}from"./clock-C0SPg0PF.js";import{C as st}from"./calendar-lP7qctBn.js";import{T as ct}from"./trending-up-q9Xt4TNZ.js";import{R as je,C as Te,X as fe,Y as we,T as Me,L as nt,B as it}from"./generateCategoricalChart-B5qIq3um.js";import{L as lt,a as R}from"./LineChart-ljMg4o6_.js";import{B as rt}from"./BarChart-UulCzpsw.js";import{D as Le,a as Ae,b as Be,c as Ee,d as ot,e as dt,f as mt,X as te}from"./dialog-BFxkyGdG.js";import{I as G}from"./input-DAxyQcQ6.js";import{T as gt}from"./textarea-CUpb7IQY.js";import{L as O}from"./label-WV9rmlgK.js";import{L as Oe}from"./loader-circle-ClqFH6Ch.js";import{S as xt}from"./save-DcPehqtW.js";import{T as ht}from"./trash-2-BGEcaC5X.js";import{A as pt}from"./arrow-left-DYl8JD6p.js";import{P as ve}from"./plus-Bs9J4-Yt.js";import{R as ae}from"./receipt-UyHtgOCh.js";import{C as Ne}from"./circle-user-ClVuwODR.js";import{B as ye}from"./book-open-DJlXj3jr.js";import{C as se,a as ut}from"./chevron-up-CGjsbtlF.js";import{S as ce}from"./settings-Cg8CoMio.js";import{U as De}from"./users-BEPVjVsG.js";import{P as Se}from"./package-eFkwOH1x.js";import{B as Ce}from"./bell-zmoD-L3x.js";import{L as Fe}from"./log-out-Del1bcAp.js";import{M as kt}from"./menu-CAMq4GAl.js";import{T as Pe}from"./ticket-BVKPZXvN.js";import{S as bt}from"./search-DYS7RNfR.js";import{F as ne}from"./filter-CeMfskc8.js";import{C as jt}from"./chart-column-8Hy86w9_.js";import"./index-Ci_qB1WW.js";import"./index-DYYK5dbJ.js";import"./index-DkLA8Hun.js";import"./index-FM6g0UGI.js";import"./check-B0XS7teL.js";import"./checkbox-BA-qCqmw.js";import"./user-DNKQZcJU.js";import"./message-square-D2-VYrWV.js";import"./file-text-zOWEdpec.js";import"./download-_y-9cJJ1.js";import"./lock-CN5MT7S2.js";import"./send-C6irG-PM.js";import"./index-CqUluVxK.js";import"./index-BxbciWQS.js";const ze=ie("FileStack",[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]]);const Tt=ie("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const _=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function ft(){const{data:a,isLoading:S}=d.tickets.detailedStats.useQuery();if(S)return e.jsx("div",{"data-loc":"client/src/components/DashboardStatistics.tsx:11",className:"grid gap-4",children:e.jsx(b,{"data-loc":"client/src/components/DashboardStatistics.tsx:12",className:"bg-white/5 border-white/10",children:e.jsxs(N,{"data-loc":"client/src/components/DashboardStatistics.tsx:13",className:"py-12 text-center",children:[e.jsx("div",{"data-loc":"client/src/components/DashboardStatistics.tsx:14",className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{"data-loc":"client/src/components/DashboardStatistics.tsx:15",className:"text-gray-400 mt-4",children:"Lade Statistiken..."})]})})});if(!a)return null;const i=Math.round(a.avgResolutionTimeHours*10)/10,h=a.ticketsLast7Days,f=a.ticketsLast30Days,p=a.ticketsByDay.slice(-14);return e.jsxs("div",{"data-loc":"client/src/components/DashboardStatistics.tsx:32",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/components/DashboardStatistics.tsx:34",className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(b,{"data-loc":"client/src/components/DashboardStatistics.tsx:35",className:"bg-white/5 border-white/10",children:e.jsxs(y,{"data-loc":"client/src/components/DashboardStatistics.tsx:36",className:"pb-3",children:[e.jsxs($,{"data-loc":"client/src/components/DashboardStatistics.tsx:37",className:"text-gray-400 flex items-center gap-2",children:[e.jsx(at,{"data-loc":"client/src/components/DashboardStatistics.tsx:38",className:"h-4 w-4"}),"Durchschn. Bearbeitungszeit"]}),e.jsxs(D,{"data-loc":"client/src/components/DashboardStatistics.tsx:41",className:"text-3xl font-bold text-white",children:[i,"h"]})]})}),e.jsx(b,{"data-loc":"client/src/components/DashboardStatistics.tsx:47",className:"bg-white/5 border-white/10",children:e.jsxs(y,{"data-loc":"client/src/components/DashboardStatistics.tsx:48",className:"pb-3",children:[e.jsxs($,{"data-loc":"client/src/components/DashboardStatistics.tsx:49",className:"text-gray-400 flex items-center gap-2",children:[e.jsx(st,{"data-loc":"client/src/components/DashboardStatistics.tsx:50",className:"h-4 w-4"}),"Letzte 7 Tage"]}),e.jsx(D,{"data-loc":"client/src/components/DashboardStatistics.tsx:53",className:"text-3xl font-bold text-white",children:h})]})}),e.jsx(b,{"data-loc":"client/src/components/DashboardStatistics.tsx:59",className:"bg-white/5 border-white/10",children:e.jsxs(y,{"data-loc":"client/src/components/DashboardStatistics.tsx:60",className:"pb-3",children:[e.jsxs($,{"data-loc":"client/src/components/DashboardStatistics.tsx:61",className:"text-gray-400 flex items-center gap-2",children:[e.jsx(ct,{"data-loc":"client/src/components/DashboardStatistics.tsx:62",className:"h-4 w-4"}),"Letzte 30 Tage"]}),e.jsx(D,{"data-loc":"client/src/components/DashboardStatistics.tsx:65",className:"text-3xl font-bold text-white",children:f})]})})]}),e.jsxs(b,{"data-loc":"client/src/components/DashboardStatistics.tsx:73",className:"bg-white/5 border-white/10",children:[e.jsxs(y,{"data-loc":"client/src/components/DashboardStatistics.tsx:74",children:[e.jsx(D,{"data-loc":"client/src/components/DashboardStatistics.tsx:75",className:"text-white",children:"Tickets nach Kategorie (Letzte 14 Tage)"}),e.jsx($,{"data-loc":"client/src/components/DashboardStatistics.tsx:76",className:"text-gray-400",children:"Entwicklung der Ticket-Kategorien über die Zeit"})]}),e.jsx(N,{"data-loc":"client/src/components/DashboardStatistics.tsx:80",children:e.jsx(je,{"data-loc":"client/src/components/DashboardStatistics.tsx:81",width:"100%",height:300,children:e.jsxs(lt,{"data-loc":"client/src/components/DashboardStatistics.tsx:82",data:p,children:[e.jsx(Te,{"data-loc":"client/src/components/DashboardStatistics.tsx:83",strokeDasharray:"3 3",stroke:"#333"}),e.jsx(fe,{"data-loc":"client/src/components/DashboardStatistics.tsx:84",dataKey:"date",stroke:"#888",tickFormatter:g=>{const l=new Date(g);return`${l.getDate()}.${l.getMonth()+1}`}}),e.jsx(we,{"data-loc":"client/src/components/DashboardStatistics.tsx:92",stroke:"#888"}),e.jsx(Me,{"data-loc":"client/src/components/DashboardStatistics.tsx:93",contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(nt,{"data-loc":"client/src/components/DashboardStatistics.tsx:97"}),e.jsx(R,{"data-loc":"client/src/components/DashboardStatistics.tsx:98",type:"monotone",dataKey:"network",stroke:"#3b82f6",name:"Netzwerk",strokeWidth:2}),e.jsx(R,{"data-loc":"client/src/components/DashboardStatistics.tsx:99",type:"monotone",dataKey:"security",stroke:"#ef4444",name:"Sicherheit",strokeWidth:2}),e.jsx(R,{"data-loc":"client/src/components/DashboardStatistics.tsx:100",type:"monotone",dataKey:"hardware",stroke:"#f59e0b",name:"Hardware",strokeWidth:2}),e.jsx(R,{"data-loc":"client/src/components/DashboardStatistics.tsx:101",type:"monotone",dataKey:"software",stroke:"#10b981",name:"Software",strokeWidth:2}),e.jsx(R,{"data-loc":"client/src/components/DashboardStatistics.tsx:102",type:"monotone",dataKey:"email",stroke:"#8b5cf6",name:"E-Mail",strokeWidth:2}),e.jsx(R,{"data-loc":"client/src/components/DashboardStatistics.tsx:103",type:"monotone",dataKey:"other",stroke:"#6b7280",name:"Sonstiges",strokeWidth:2})]})})})]}),e.jsxs(b,{"data-loc":"client/src/components/DashboardStatistics.tsx:110",className:"bg-white/5 border-white/10",children:[e.jsxs(y,{"data-loc":"client/src/components/DashboardStatistics.tsx:111",children:[e.jsx(D,{"data-loc":"client/src/components/DashboardStatistics.tsx:112",className:"text-white",children:"Tickets nach Kategorie (Gesamt)"}),e.jsx($,{"data-loc":"client/src/components/DashboardStatistics.tsx:113",className:"text-gray-400",children:"Verteilung aller Tickets nach Kategorien"})]}),e.jsx(N,{"data-loc":"client/src/components/DashboardStatistics.tsx:117",children:e.jsx(je,{"data-loc":"client/src/components/DashboardStatistics.tsx:118",width:"100%",height:300,children:e.jsxs(rt,{"data-loc":"client/src/components/DashboardStatistics.tsx:119",data:[{name:"Netzwerk",count:p.reduce((g,l)=>g+(l.network||0),0)},{name:"Sicherheit",count:p.reduce((g,l)=>g+(l.security||0),0)},{name:"Hardware",count:p.reduce((g,l)=>g+(l.hardware||0),0)},{name:"Software",count:p.reduce((g,l)=>g+(l.software||0),0)},{name:"E-Mail",count:p.reduce((g,l)=>g+(l.email||0),0)},{name:"Sonstiges",count:p.reduce((g,l)=>g+(l.other||0),0)}],children:[e.jsx(Te,{"data-loc":"client/src/components/DashboardStatistics.tsx:127",strokeDasharray:"3 3",stroke:"#333"}),e.jsx(fe,{"data-loc":"client/src/components/DashboardStatistics.tsx:128",dataKey:"name",stroke:"#888"}),e.jsx(we,{"data-loc":"client/src/components/DashboardStatistics.tsx:129",stroke:"#888"}),e.jsx(Me,{"data-loc":"client/src/components/DashboardStatistics.tsx:130",contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(it,{"data-loc":"client/src/components/DashboardStatistics.tsx:134",dataKey:"count",fill:"#f59e0b",name:"Anzahl"})]})})})]})]})}function wt({open:a,onOpenChange:S}){const[i,h]=o.useState(""),[f,p]=o.useState(""),[g,l]=o.useState(""),[M,C]=o.useState(""),[j,T]=o.useState(""),[F,v]=o.useState("other"),[P,I]=o.useState("medium"),H=d.useUtils(),K=d.tickets.create.useMutation({onSuccess:()=>{n.success("Ticket erfolgreich erstellt"),H.tickets.filtered.invalidate(),H.tickets.stats.invalidate(),c(),S(!1)},onError:r=>{n.error("Fehler beim Erstellen des Tickets: "+r.message)}}),c=()=>{h(""),p(""),l(""),C(""),T(""),v("other"),I("medium")},k=r=>{if(r.preventDefault(),!i.trim()||!f.trim()||!M.trim()||!j.trim()){n.error("Bitte füllen Sie alle Pflichtfelder aus");return}K.mutate({customerName:i,customerEmail:f,company:g||void 0,subject:M,message:j,category:F,priority:P})};return e.jsx(Le,{"data-loc":"client/src/components/CreateTicketDialog.tsx:77",open:a,onOpenChange:S,children:e.jsxs(Ae,{"data-loc":"client/src/components/CreateTicketDialog.tsx:78",className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Be,{"data-loc":"client/src/components/CreateTicketDialog.tsx:79",children:e.jsx(Ee,{"data-loc":"client/src/components/CreateTicketDialog.tsx:80",children:"Ticket für Kunden erstellen"})}),e.jsxs("form",{"data-loc":"client/src/components/CreateTicketDialog.tsx:82",onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:84",className:"space-y-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("h3",{"data-loc":"client/src/components/CreateTicketDialog.tsx:85",className:"font-semibold text-sm",children:"Kundeninformationen"}),e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:86",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:87",className:"space-y-2",children:[e.jsxs(O,{"data-loc":"client/src/components/CreateTicketDialog.tsx:88",htmlFor:"customerName",children:["Name ",e.jsx("span",{"data-loc":"client/src/components/CreateTicketDialog.tsx:89",className:"text-destructive",children:"*"})]}),e.jsx(G,{"data-loc":"client/src/components/CreateTicketDialog.tsx:91",id:"customerName",value:i,onChange:r=>h(r.target.value),placeholder:"Max Mustermann",required:!0})]}),e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:99",className:"space-y-2",children:[e.jsxs(O,{"data-loc":"client/src/components/CreateTicketDialog.tsx:100",htmlFor:"customerEmail",children:["E-Mail ",e.jsx("span",{"data-loc":"client/src/components/CreateTicketDialog.tsx:101",className:"text-destructive",children:"*"})]}),e.jsx(G,{"data-loc":"client/src/components/CreateTicketDialog.tsx:103",id:"customerEmail",type:"email",value:f,onChange:r=>p(r.target.value),placeholder:"max@beispiel.ch",required:!0})]})]}),e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:113",className:"space-y-2",children:[e.jsx(O,{"data-loc":"client/src/components/CreateTicketDialog.tsx:114",htmlFor:"company",children:"Firma (optional)"}),e.jsx(G,{"data-loc":"client/src/components/CreateTicketDialog.tsx:115",id:"company",value:g,onChange:r=>l(r.target.value),placeholder:"Beispiel AG"})]})]}),e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:125",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:126",className:"space-y-2",children:[e.jsxs(O,{"data-loc":"client/src/components/CreateTicketDialog.tsx:127",htmlFor:"subject",children:["Betreff ",e.jsx("span",{"data-loc":"client/src/components/CreateTicketDialog.tsx:128",className:"text-destructive",children:"*"})]}),e.jsx(G,{"data-loc":"client/src/components/CreateTicketDialog.tsx:130",id:"subject",value:M,onChange:r=>C(r.target.value),placeholder:"Kurze Beschreibung des Problems",required:!0})]}),e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:139",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:140",className:"space-y-2",children:[e.jsx(O,{"data-loc":"client/src/components/CreateTicketDialog.tsx:141",htmlFor:"category",children:"Kategorie"}),e.jsxs(L,{"data-loc":"client/src/components/CreateTicketDialog.tsx:142",value:F,onValueChange:r=>v(r),children:[e.jsx(A,{"data-loc":"client/src/components/CreateTicketDialog.tsx:143",id:"category",children:e.jsx(B,{"data-loc":"client/src/components/CreateTicketDialog.tsx:144"})}),e.jsxs(E,{"data-loc":"client/src/components/CreateTicketDialog.tsx:146",children:[e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:147",value:"general",children:"Allgemein"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:148",value:"network",children:"Netzwerk"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:149",value:"hardware",children:"Hardware"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:150",value:"software",children:"Software"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:151",value:"email",children:"E-Mail"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:152",value:"security",children:"Sicherheit"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:153",value:"other",children:"Sonstiges"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:158",className:"space-y-2",children:[e.jsx(O,{"data-loc":"client/src/components/CreateTicketDialog.tsx:159",htmlFor:"priority",children:"Priorität"}),e.jsxs(L,{"data-loc":"client/src/components/CreateTicketDialog.tsx:160",value:P,onValueChange:r=>I(r),children:[e.jsx(A,{"data-loc":"client/src/components/CreateTicketDialog.tsx:161",id:"priority",children:e.jsx(B,{"data-loc":"client/src/components/CreateTicketDialog.tsx:162"})}),e.jsxs(E,{"data-loc":"client/src/components/CreateTicketDialog.tsx:164",children:[e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:165",value:"low",children:"Niedrig"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:166",value:"medium",children:"Normal"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:167",value:"high",children:"Hoch"}),e.jsx(s,{"data-loc":"client/src/components/CreateTicketDialog.tsx:168",value:"urgent",children:"Dringend"})]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:174",className:"space-y-2",children:[e.jsxs(O,{"data-loc":"client/src/components/CreateTicketDialog.tsx:175",htmlFor:"message",children:["Beschreibung ",e.jsx("span",{"data-loc":"client/src/components/CreateTicketDialog.tsx:176",className:"text-destructive",children:"*"})]}),e.jsx(gt,{"data-loc":"client/src/components/CreateTicketDialog.tsx:178",id:"message",value:j,onChange:r=>T(r.target.value),placeholder:"Detaillierte Beschreibung des Problems...",rows:6,required:!0})]})]}),e.jsxs("div",{"data-loc":"client/src/components/CreateTicketDialog.tsx:189",className:"flex justify-end gap-3 pt-4",children:[e.jsx(m,{"data-loc":"client/src/components/CreateTicketDialog.tsx:190",type:"button",variant:"outline",onClick:()=>{c(),S(!1)},disabled:K.isPending,children:"Abbrechen"}),e.jsxs(m,{"data-loc":"client/src/components/CreateTicketDialog.tsx:201",type:"submit",disabled:K.isPending,children:[K.isPending&&e.jsx(Oe,{"data-loc":"client/src/components/CreateTicketDialog.tsx:203",className:"mr-2 h-4 w-4 animate-spin"}),"Ticket erstellen"]})]})]})]})})}function Mt({filterType:a,currentFilters:S,onApplyPreset:i}){const[h,f]=o.useState(!1),[p,g]=o.useState(""),[l,M]=o.useState(!1),C=d.useUtils(),{data:j}=d.filterPresets.list.useQuery({filterType:a}),T=d.filterPresets.create.useMutation({onSuccess:()=>{n.success("Filter-Preset gespeichert"),C.filterPresets.list.invalidate(),f(!1),g(""),M(!1)},onError:c=>{n.error(`Fehler: ${c.message}`)}}),F=d.filterPresets.delete.useMutation({onSuccess:()=>{n.success("Filter-Preset gelöscht"),C.filterPresets.list.invalidate()},onError:c=>{n.error(`Fehler: ${c.message}`)}}),v=d.filterPresets.update.useMutation({onSuccess:()=>{n.success("Filter-Preset aktualisiert"),C.filterPresets.list.invalidate()},onError:c=>{n.error(`Fehler: ${c.message}`)}}),P=()=>{if(!p.trim()){n.error("Bitte geben Sie einen Namen ein");return}T.mutate({name:p,filterType:a,filters:JSON.stringify(S),isDefault:l})},I=c=>{try{const k=JSON.parse(c.filters);i(k),n.success(`Filter "${c.name}" angewendet`)}catch{n.error("Fehler beim Laden des Presets")}},H=c=>{v.mutate({id:c.id,isDefault:!c.isDefault})},K=c=>{confirm("Möchten Sie dieses Preset wirklich löschen?")&&F.mutate({id:c})};return e.jsxs("div",{"data-loc":"client/src/components/FilterPresets.tsx:104",className:"space-y-3",children:[e.jsxs("div",{"data-loc":"client/src/components/FilterPresets.tsx:105",className:"flex items-center justify-between",children:[e.jsx("h3",{"data-loc":"client/src/components/FilterPresets.tsx:106",className:"text-sm font-medium text-gray-400",children:"Gespeicherte Filter"}),e.jsxs(Le,{"data-loc":"client/src/components/FilterPresets.tsx:107",open:h,onOpenChange:f,children:[e.jsx(ot,{"data-loc":"client/src/components/FilterPresets.tsx:108",asChild:!0,children:e.jsxs(m,{"data-loc":"client/src/components/FilterPresets.tsx:109",variant:"outline",size:"sm",className:"border-white/20 bg-white/5 hover:bg-white/10",children:[e.jsx(xt,{"data-loc":"client/src/components/FilterPresets.tsx:114",className:"h-4 w-4 mr-2"}),"Aktuellen Filter speichern"]})}),e.jsxs(Ae,{"data-loc":"client/src/components/FilterPresets.tsx:118",className:"bg-black/95 border-white/10",children:[e.jsxs(Be,{"data-loc":"client/src/components/FilterPresets.tsx:119",children:[e.jsx(Ee,{"data-loc":"client/src/components/FilterPresets.tsx:120",children:"Filter-Preset speichern"}),e.jsx(dt,{"data-loc":"client/src/components/FilterPresets.tsx:121",children:"Speichern Sie die aktuellen Filtereinstellungen für schnellen Zugriff."})]}),e.jsxs("div",{"data-loc":"client/src/components/FilterPresets.tsx:125",className:"space-y-4 py-4",children:[e.jsxs("div",{"data-loc":"client/src/components/FilterPresets.tsx:126",className:"space-y-2",children:[e.jsx(O,{"data-loc":"client/src/components/FilterPresets.tsx:127",htmlFor:"preset-name",children:"Preset-Name"}),e.jsx(G,{"data-loc":"client/src/components/FilterPresets.tsx:128",id:"preset-name",value:p,onChange:c=>g(c.target.value),placeholder:"z.B. Dringende offene Tickets",className:"bg-white/5 border-white/10"})]}),e.jsxs("div",{"data-loc":"client/src/components/FilterPresets.tsx:136",className:"flex items-center space-x-2",children:[e.jsx("input",{"data-loc":"client/src/components/FilterPresets.tsx:137",type:"checkbox",id:"is-default",checked:l,onChange:c=>M(c.target.checked),className:"rounded border-white/20 bg-white/5"}),e.jsx(O,{"data-loc":"client/src/components/FilterPresets.tsx:144",htmlFor:"is-default",className:"text-sm font-normal",children:"Als Standard-Filter markieren"})]})]}),e.jsxs(mt,{"data-loc":"client/src/components/FilterPresets.tsx:149",children:[e.jsx(m,{"data-loc":"client/src/components/FilterPresets.tsx:150",variant:"outline",onClick:()=>f(!1),className:"border-white/20 bg-white/5",children:"Abbrechen"}),e.jsx(m,{"data-loc":"client/src/components/FilterPresets.tsx:157",onClick:P,disabled:T.isPending,children:T.isPending?"Speichern...":"Speichern"})]})]})]})]}),j&&j.length>0?e.jsx("div",{"data-loc":"client/src/components/FilterPresets.tsx:166",className:"flex flex-wrap gap-2",children:j.map(c=>e.jsxs("div",{"data-loc":"client/src/components/FilterPresets.tsx:168",className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors group",children:[e.jsx(m,{"data-loc":"client/src/components/FilterPresets.tsx:172",variant:"ghost",size:"sm",onClick:()=>I(c),className:"h-auto p-0 hover:bg-transparent",children:e.jsx("span",{"data-loc":"client/src/components/FilterPresets.tsx:178",className:"text-sm",children:c.name})}),c.isDefault&&e.jsx(_,{"data-loc":"client/src/components/FilterPresets.tsx:182",className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),e.jsxs("div",{"data-loc":"client/src/components/FilterPresets.tsx:185",className:"flex items-center gap-1 ml-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(m,{"data-loc":"client/src/components/FilterPresets.tsx:186",variant:"ghost",size:"sm",onClick:()=>H(c),className:"h-5 w-5 p-0 hover:bg-white/10",title:c.isDefault?"Als Standard entfernen":"Als Standard setzen",children:e.jsx(_,{"data-loc":"client/src/components/FilterPresets.tsx:193",className:`h-3 w-3 ${c.isDefault?"fill-yellow-400 text-yellow-400":""}`})}),e.jsx(m,{"data-loc":"client/src/components/FilterPresets.tsx:195",variant:"ghost",size:"sm",onClick:()=>K(c.id),className:"h-5 w-5 p-0 hover:bg-red-500/20 text-red-400",title:"Löschen",children:e.jsx(ht,{"data-loc":"client/src/components/FilterPresets.tsx:202",className:"h-3 w-3"})})]})]},c.id))}):e.jsx("p",{"data-loc":"client/src/components/FilterPresets.tsx:209",className:"text-sm text-gray-500",children:"Keine gespeicherten Filter. Speichern Sie häufig verwendete Filtereinstellungen für schnellen Zugriff."})]})}function wa(){const{user:a,loading:S}=Xe(),[,i]=Ye(),{socket:h,connected:f}=et(),[p,g]=o.useState(null),[l,M]=o.useState(""),[C,j]=o.useState(void 0),[T,F]=o.useState(void 0),[v,P]=o.useState(void 0),[I,H]=o.useState(!1),[K,c]=o.useState(!1),[k,r]=o.useState([]),[le,w]=o.useState(!1),[re,Q]=o.useState(!1),[oe,de]=o.useState(!1),[me,W]=o.useState(!1),u=d.useUtils(),{data:V,isLoading:Ie}=d.tickets.filtered.useQuery({search:l||void 0,status:C,priority:T,category:v},{enabled:!!a&&(a.role==="admin"||a.role==="support")}),{data:U}=d.tickets.stats.useQuery(void 0,{enabled:!!a&&(a.role==="admin"||a.role==="support")}),{data:ge}=d.invoices.all.useQuery({status:"pending"},{enabled:!!a&&a.role==="admin"}),{data:Ke}=d.reminderLog.list.useQuery({page:1,pageSize:100},{enabled:!!a&&a.role==="admin"}),{data:Ve}=d.customers.all.useQuery(void 0,{enabled:!!a&&a.role==="admin"});ge?.filter(t=>t.status==="pending").length;const q=Ke?.logs?.filter(t=>t.status==="sent"&&t.daysOverdue>0).length||0;Ve?.length,V?.filter(t=>{const x=new Date;return new Date(t.createdAt).toDateString()===x.toDateString()}).length;const xe=V?.filter(t=>t.priority==="urgent"&&t.status==="open").slice(0,3)||[],he=ge?.filter(t=>t.status!=="pending"||!t.dueDate?!1:new Date(t.dueDate)<new Date).slice(0,3)||[],Z=xe.length+he.length+(q>0?1:0);o.useEffect(()=>{if(!(!h||!f))return h.on("ticket:created",()=>{u.tickets.filtered.invalidate(),u.tickets.stats.invalidate(),n.success("Neues Ticket erstellt",{description:"Dashboard wurde aktualisiert"})}),h.on("ticket:updated",()=>{u.tickets.filtered.invalidate(),u.tickets.stats.invalidate()}),h.on("invoice:created",()=>{u.invoices.all.invalidate(),n.success("Neue Rechnung erstellt",{description:"Dashboard wurde aktualisiert"})}),h.on("invoice:updated",()=>{u.invoices.all.invalidate()}),h.on("reminder:created",()=>{u.reminderLog.list.invalidate(),n.info("Neue Mahnung gesendet",{description:"Dashboard wurde aktualisiert"})}),h.on("customer:created",()=>{u.customers.all.invalidate(),n.success("Neuer Kunde erstellt",{description:"Dashboard wurde aktualisiert"})}),()=>{h.off("ticket:created"),h.off("ticket:updated"),h.off("invoice:created"),h.off("invoice:updated"),h.off("reminder:created"),h.off("customer:created")}},[h,f,u]);const{data:X}=d.favorites.list.useQuery(void 0,{enabled:!!a&&a.role==="admin"});d.favorites.toggle.useMutation({onSuccess:t=>{u.favorites.list.invalidate(),n.success(t.action==="added"?"Zu Favoriten hinzugefügt":"Aus Favoriten entfernt")},onError:t=>{n.error(t.message||"Fehler beim Aktualisieren der Favoriten")}});const $e=["accounting","crm","reminders","statistics"],[pe,He]=o.useState(()=>{const t=localStorage.getItem("dashboardCardOrder");return t?JSON.parse(t):$e}),[Y,Re]=o.useState(()=>localStorage.getItem("dashboardTemplate")||"default"),ee={default:{name:"Standard",description:"Ausgewogene Ansicht aller Funktionen",cardOrder:["accounting","crm","reminders","statistics"],showCharts:!0,showTickets:!0},finance:{name:"Finanzen",description:"Fokus auf Buchhaltung und Rechnungen",cardOrder:["accounting","reminders","crm","statistics"],showCharts:!0,showTickets:!1},support:{name:"Support",description:"Fokus auf Tickets und Kundenservice",cardOrder:["statistics","crm","accounting","reminders"],showCharts:!1,showTickets:!0},management:{name:"Management",description:"Übersicht mit Statistiken und Charts",cardOrder:["statistics","accounting","crm","reminders"],showCharts:!0,showTickets:!1}},Qe=t=>{const x=ee[t];x&&(He(x.cardOrder),Re(t),localStorage.setItem("dashboardCardOrder",JSON.stringify(x.cardOrder)),localStorage.setItem("dashboardTemplate",t),n.success(`Vorlage "${x.name}" aktiviert`))};o.useEffect(()=>{localStorage.setItem("dashboardCardOrder",JSON.stringify(pe))},[pe]);const{data:Ue}=d.tickets.supportStaff.useQuery(void 0,{enabled:!!a&&a.role==="admin"}),{data:yt}=d.tickets.overdue.useQuery(void 0,{enabled:!!a&&(a.role==="admin"||a.role==="support"),refetchInterval:6e4}),Ge=d.tickets.assign.useMutation({onSuccess:()=>{n.success("Ticket zugewiesen"),u.tickets.filtered.invalidate()},onError:()=>{n.error("Fehler beim Zuweisen")}}),ue=d.tickets.update.useMutation({onSuccess:()=>{n.success("Ticket aktualisiert"),u.tickets.all.invalidate(),u.tickets.stats.invalidate()},onError:t=>{n.error(t.message||"Fehler beim Aktualisieren")}}),We=d.tickets.bulkDelete.useMutation({onSuccess:t=>{n.success(`${t.count} Ticket(s) erfolgreich gelöscht`),r([]),u.tickets.filtered.invalidate()},onError:t=>{n.error(t.message||"Fehler beim Löschen")}}),Ze=d.tickets.bulkUpdateStatus.useMutation({onSuccess:t=>{n.success(`${t.count} Ticket(s) Status aktualisiert`),r([]),u.tickets.filtered.invalidate()},onError:t=>{n.error(t.message||"Fehler beim Aktualisieren")}}),Je=d.tickets.bulkUpdatePriority.useMutation({onSuccess:t=>{n.success(`${t.count} Ticket(s) Priorität aktualisiert`),r([]),u.tickets.filtered.invalidate()},onError:t=>{n.error(t.message||"Fehler beim Aktualisieren")}});d.tickets.bulkAssign.useMutation({onSuccess:t=>{n.success(`${t.count} Ticket(s) zugewiesen`),r([]),u.tickets.filtered.invalidate()},onError:t=>{n.error(`Fehler: ${t.message}`)}});const J=d.auth.logout.useMutation({onSuccess:()=>{n.success("Erfolgreich abgemeldet"),i("/login")}});if(S||Ie)return e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:312",className:"min-h-screen flex items-center justify-center bg-black",children:e.jsx(Oe,{"data-loc":"client/src/pages/TicketManagement.tsx:313",className:"h-8 w-8 animate-spin text-primary"})});if(!a||!["admin","support","accounting"].includes(a.role))return i("/login"),null;if(a.role==="accounting")return i("/accounting-dashboard"),null;const _e=t=>{switch(t){case"open":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"in_progress":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"resolved":return"bg-green-500/20 text-green-400 border-green-500/30";case"closed":return"bg-gray-500/20 text-gray-400 border-gray-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},qe=t=>{switch(t){case"urgent":return"bg-red-500/20 text-red-400 border-red-500/30";case"high":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"low":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:360",className:"min-h-screen bg-black text-white",children:[e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:362",className:"border-b border-white/10 bg-white/5 backdrop-blur-xl",children:e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:363",className:"container mx-auto px-4 py-4",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:364",className:"flex justify-between items-center",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:365",className:"flex items-center gap-4",children:[e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:366",variant:"ghost",onClick:()=>i("/admin"),className:"hover:bg-white/10",size:"sm",children:[e.jsx(pt,{"data-loc":"client/src/pages/TicketManagement.tsx:372",className:"h-4 w-4 mr-2"}),"Zurück"]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:375",children:[e.jsx("h1",{"data-loc":"client/src/pages/TicketManagement.tsx:376",className:"text-xl md:text-2xl font-bold",children:"Ticket-Verwaltung"}),e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:377",className:"text-xs md:text-sm text-gray-400",children:"Support-Tickets verwalten"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:381",className:"hidden lg:flex items-center gap-2",children:[e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:382",variant:"default",onClick:()=>c(!0),className:"bg-primary hover:bg-primary/90",size:"sm",children:[e.jsx(ve,{"data-loc":"client/src/pages/TicketManagement.tsx:388",className:"h-4 w-4 mr-2"}),"Ticket erstellen"]}),a?.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:393",variant:"outline",onClick:()=>i("/accounting"),className:"border-white/20 bg-white/5 hover:bg-white/10",size:"sm",children:[e.jsx(ae,{"data-loc":"client/src/pages/TicketManagement.tsx:399",className:"h-4 w-4 mr-2"}),"Buchhaltung"]}),e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:402",variant:"outline",onClick:()=>i("/crm"),className:"border-white/20 bg-white/5 hover:bg-white/10",size:"sm",children:[e.jsx(Ne,{"data-loc":"client/src/pages/TicketManagement.tsx:408",className:"h-4 w-4 mr-2"}),"CRM"]}),e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:411",variant:"outline",onClick:()=>i("/admin/knowledge-base"),className:"border-white/20 bg-white/5 hover:bg-white/10",size:"sm",children:[e.jsx(ye,{"data-loc":"client/src/pages/TicketManagement.tsx:417",className:"h-4 w-4 mr-2"}),"Wissensdatenbank"]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:422",className:"relative",children:[e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:423",variant:"outline",onClick:()=>de(!oe),className:"border-white/20 bg-white/5 hover:bg-white/10",size:"sm",children:[e.jsx(Tt,{"data-loc":"client/src/pages/TicketManagement.tsx:429",className:"h-4 w-4 mr-2"}),"Vorlage",e.jsx(se,{"data-loc":"client/src/pages/TicketManagement.tsx:431",className:"h-3 w-3 ml-1"})]}),oe&&e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:434",className:"absolute right-0 mt-2 w-64 bg-black/95 border border-white/10 rounded-lg shadow-xl z-50 backdrop-blur-xl",children:e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:435",className:"py-2",children:Object.entries(ee).map(([t,x])=>e.jsx("button",{"data-loc":"client/src/pages/TicketManagement.tsx:437",onClick:()=>{Qe(t),de(!1)},className:`w-full px-4 py-3 text-left hover:bg-white/10 transition-colors ${Y===t?"bg-white/5":""}`,children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:447",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:448",children:[e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:449",className:"text-sm font-semibold",children:x.name}),e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:450",className:"text-xs text-gray-400 mt-0.5",children:x.description})]}),Y===t&&e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:453",className:"h-2 w-2 rounded-full bg-primary"})]})},t))})})]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:464",className:"relative",children:[e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:465",variant:"outline",onClick:()=>Q(!re),className:"border-white/20 bg-white/5 hover:bg-white/10",size:"sm",children:[e.jsx(ce,{"data-loc":"client/src/pages/TicketManagement.tsx:471",className:"h-4 w-4 mr-2"}),"Verwaltung",e.jsx(se,{"data-loc":"client/src/pages/TicketManagement.tsx:473",className:"h-3 w-3 ml-1"})]}),re&&e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:476",className:"absolute right-0 mt-2 w-56 bg-black/95 border border-white/10 rounded-lg shadow-xl z-50 backdrop-blur-xl",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:477",className:"py-2",children:[e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:478",onClick:()=>{i("/user-management"),Q(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-white/10 flex items-center gap-2",children:[e.jsx(De,{"data-loc":"client/src/pages/TicketManagement.tsx:485",className:"h-4 w-4"}),"Benutzerverwaltung"]}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:488",onClick:()=>{i("/products"),Q(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-white/10 flex items-center gap-2",children:[e.jsx(Se,{"data-loc":"client/src/pages/TicketManagement.tsx:495",className:"h-4 w-4"}),"Produkte"]}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:498",onClick:()=>{i("/templates"),Q(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-white/10 flex items-center gap-2",children:[e.jsx(ze,{"data-loc":"client/src/pages/TicketManagement.tsx:505",className:"h-4 w-4"}),"Vorlagen"]}),e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:508",className:"border-t border-white/10 my-2"}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:509",onClick:()=>{i("/notification-settings"),Q(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-white/10 flex items-center gap-2",children:[e.jsx(ce,{"data-loc":"client/src/pages/TicketManagement.tsx:516",className:"h-4 w-4"}),"Benachrichtigungen"]})]})})]})]}),a?.role==="admin"&&e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:528",className:"relative",children:[e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:529",variant:"outline",onClick:()=>W(!me),className:"border-white/20 bg-white/5 hover:bg-white/10 relative",size:"sm",children:[e.jsx(Ce,{"data-loc":"client/src/pages/TicketManagement.tsx:535",className:"h-4 w-4"}),Z>0&&e.jsx("span",{"data-loc":"client/src/pages/TicketManagement.tsx:537",className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 rounded-full text-xs flex items-center justify-center font-bold",children:Z})]}),me&&e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:543",className:"absolute right-0 mt-2 w-80 bg-black/95 border border-white/10 rounded-lg shadow-xl z-50 backdrop-blur-xl max-h-96 overflow-y-auto",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:544",className:"p-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:545",className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{"data-loc":"client/src/pages/TicketManagement.tsx:546",className:"font-semibold",children:"Benachrichtigungen"}),e.jsx(z,{"data-loc":"client/src/pages/TicketManagement.tsx:547",variant:"secondary",className:"bg-red-500/20 text-red-400",children:Z})]}),Z===0?e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:553",className:"text-sm text-gray-400 text-center py-4",children:"Keine neuen Benachrichtigungen"}):e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:555",className:"space-y-2",children:[xe.map(t=>e.jsx("button",{"data-loc":"client/src/pages/TicketManagement.tsx:558",onClick:()=>{g(t.id),W(!1)},className:"w-full p-3 bg-red-500/10 hover:bg-red-500/20 rounded-lg text-left border border-red-500/30 transition-colors",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:566",className:"flex items-start gap-2",children:[e.jsx(be,{"data-loc":"client/src/pages/TicketManagement.tsx:567",className:"h-4 w-4 text-red-400 mt-0.5"}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:568",className:"flex-1",children:[e.jsxs("p",{"data-loc":"client/src/pages/TicketManagement.tsx:569",className:"text-sm font-medium",children:["Dringendes Ticket #",t.id]}),e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:570",className:"text-xs text-gray-400 line-clamp-1",children:t.subject})]})]})},`ticket-${t.id}`)),he.map(t=>e.jsx("button",{"data-loc":"client/src/pages/TicketManagement.tsx:578",onClick:()=>{i(`/accounting/invoices/${t.id}`),W(!1)},className:"w-full p-3 bg-orange-500/10 hover:bg-orange-500/20 rounded-lg text-left border border-orange-500/30 transition-colors",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:586",className:"flex items-start gap-2",children:[e.jsx(ae,{"data-loc":"client/src/pages/TicketManagement.tsx:587",className:"h-4 w-4 text-orange-400 mt-0.5"}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:588",className:"flex-1",children:[e.jsxs("p",{"data-loc":"client/src/pages/TicketManagement.tsx:589",className:"text-sm font-medium",children:["Überfällige Rechnung ",t.invoiceNumber]}),e.jsxs("p",{"data-loc":"client/src/pages/TicketManagement.tsx:590",className:"text-xs text-gray-400",children:["Fällig seit ",new Date(t.dueDate).toLocaleDateString("de-DE")]})]})]})},`invoice-${t.id}`)),q>0&&e.jsx("button",{"data-loc":"client/src/pages/TicketManagement.tsx:598",onClick:()=>{i("/accounting/reminders"),W(!1)},className:"w-full p-3 bg-purple-500/10 hover:bg-purple-500/20 rounded-lg text-left border border-purple-500/30 transition-colors",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:605",className:"flex items-start gap-2",children:[e.jsx(Ce,{"data-loc":"client/src/pages/TicketManagement.tsx:606",className:"h-4 w-4 text-purple-400 mt-0.5"}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:607",className:"flex-1",children:[e.jsxs("p",{"data-loc":"client/src/pages/TicketManagement.tsx:608",className:"text-sm font-medium",children:[q," überfällige Mahnungen"]}),e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:609",className:"text-xs text-gray-400",children:"Jetzt überprüfen"})]})]})})]})]})})]}),e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:622",variant:"outline",onClick:()=>J.mutate(),disabled:J.isPending,className:"border-white/20 bg-white/5 hover:bg-white/10",size:"sm",children:[e.jsx(Fe,{"data-loc":"client/src/pages/TicketManagement.tsx:629",className:"h-4 w-4 mr-2"}),"Abmelden"]})]}),e.jsx(m,{"data-loc":"client/src/pages/TicketManagement.tsx:635",variant:"outline",onClick:()=>w(!le),className:"lg:hidden border-white/20 bg-white/5 hover:bg-white/10",size:"sm",children:e.jsx(kt,{"data-loc":"client/src/pages/TicketManagement.tsx:641",className:"h-5 w-5"})})]})})}),le&&e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:649",className:"lg:hidden fixed inset-0 z-50 bg-black/80 backdrop-blur-sm",onClick:()=>w(!1),children:e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:650",className:"absolute right-0 top-0 h-full w-80 max-w-[85vw] bg-black border-l border-white/10 shadow-2xl overflow-y-auto",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:654",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:655",className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{"data-loc":"client/src/pages/TicketManagement.tsx:656",className:"text-xl font-bold",children:"Menü"}),e.jsx("button",{"data-loc":"client/src/pages/TicketManagement.tsx:657",onClick:()=>w(!1),className:"p-2 hover:bg-white/10 rounded-full",children:e.jsx(te,{"data-loc":"client/src/pages/TicketManagement.tsx:658",className:"h-5 w-5"})})]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:662",className:"space-y-2",children:[e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:663",onClick:()=>{c(!0),w(!1)},className:"w-full px-4 py-3 bg-primary hover:bg-primary/90 rounded-lg text-left font-medium flex items-center gap-3",children:[e.jsx(ve,{"data-loc":"client/src/pages/TicketManagement.tsx:670",className:"h-5 w-5"}),"Ticket erstellen"]}),a?.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:676",className:"border-t border-white/10 my-4"}),e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:677",className:"text-xs font-semibold text-gray-400 uppercase tracking-wider px-2 mb-2",children:"Hauptmenü"}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:679",onClick:()=>{i("/accounting"),w(!1)},className:"w-full px-4 py-3 hover:bg-white/10 rounded-lg text-left flex items-center gap-3",children:[e.jsx(ae,{"data-loc":"client/src/pages/TicketManagement.tsx:686",className:"h-5 w-5"}),"Buchhaltung"]}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:690",onClick:()=>{i("/crm"),w(!1)},className:"w-full px-4 py-3 hover:bg-white/10 rounded-lg text-left flex items-center gap-3",children:[e.jsx(Ne,{"data-loc":"client/src/pages/TicketManagement.tsx:697",className:"h-5 w-5"}),"CRM"]}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:701",onClick:()=>{i("/admin/knowledge-base"),w(!1)},className:"w-full px-4 py-3 hover:bg-white/10 rounded-lg text-left flex items-center gap-3",children:[e.jsx(ye,{"data-loc":"client/src/pages/TicketManagement.tsx:708",className:"h-5 w-5"}),"Wissensdatenbank"]}),e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:712",className:"border-t border-white/10 my-4"}),e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:713",className:"text-xs font-semibold text-gray-400 uppercase tracking-wider px-2 mb-2",children:"Verwaltung"}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:715",onClick:()=>{i("/user-management"),w(!1)},className:"w-full px-4 py-3 hover:bg-white/10 rounded-lg text-left flex items-center gap-3",children:[e.jsx(De,{"data-loc":"client/src/pages/TicketManagement.tsx:722",className:"h-5 w-5"}),"Benutzerverwaltung"]}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:726",onClick:()=>{i("/products"),w(!1)},className:"w-full px-4 py-3 hover:bg-white/10 rounded-lg text-left flex items-center gap-3",children:[e.jsx(Se,{"data-loc":"client/src/pages/TicketManagement.tsx:733",className:"h-5 w-5"}),"Produkte"]}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:737",onClick:()=>{i("/templates"),w(!1)},className:"w-full px-4 py-3 hover:bg-white/10 rounded-lg text-left flex items-center gap-3",children:[e.jsx(ze,{"data-loc":"client/src/pages/TicketManagement.tsx:744",className:"h-5 w-5"}),"Vorlagen"]}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:748",onClick:()=>{i("/notification-settings"),w(!1)},className:"w-full px-4 py-3 hover:bg-white/10 rounded-lg text-left flex items-center gap-3",children:[e.jsx(ce,{"data-loc":"client/src/pages/TicketManagement.tsx:755",className:"h-5 w-5"}),"Benachrichtigungen"]})]}),e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:761",className:"border-t border-white/10 my-4"}),e.jsxs("button",{"data-loc":"client/src/pages/TicketManagement.tsx:763",onClick:()=>{J.mutate(),w(!1)},disabled:J.isPending,className:"w-full px-4 py-3 hover:bg-white/10 rounded-lg text-left flex items-center gap-3 text-red-400",children:[e.jsx(Fe,{"data-loc":"client/src/pages/TicketManagement.tsx:771",className:"h-5 w-5"}),"Abmelden"]})]})]})})}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:781",className:"container mx-auto px-4 py-8",children:[a?.role==="admin"&&X&&X.length>0&&e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:784",className:"mb-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:785",className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{"data-loc":"client/src/pages/TicketManagement.tsx:786",className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),e.jsx("h2",{"data-loc":"client/src/pages/TicketManagement.tsx:787",className:"text-xl font-bold",children:"Meine Favoriten"})]}),e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:789",className:"flex flex-wrap gap-3",children:X.map(t=>e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:791",variant:"outline",onClick:()=>i(t.itemPath),className:"border-yellow-400/30 bg-yellow-400/10 hover:bg-yellow-400/20 text-yellow-400",children:[e.jsx(_,{"data-loc":"client/src/pages/TicketManagement.tsx:797",className:"h-4 w-4 mr-2 fill-yellow-400"}),t.itemLabel]},t.id))})]}),!1,U&&e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:922",className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs(b,{"data-loc":"client/src/pages/TicketManagement.tsx:923",className:"bg-white/5 border-white/10 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>{j(void 0),F(void 0),P(void 0)},children:[e.jsx(y,{"data-loc":"client/src/pages/TicketManagement.tsx:931",className:"pb-3",children:e.jsx(D,{"data-loc":"client/src/pages/TicketManagement.tsx:932",className:"text-sm font-medium text-gray-400",children:"Total"})}),e.jsx(N,{"data-loc":"client/src/pages/TicketManagement.tsx:934",children:e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:935",className:"text-3xl font-bold text-white",children:U.total})})]}),e.jsxs(b,{"data-loc":"client/src/pages/TicketManagement.tsx:939",className:"bg-white/5 border-white/10 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>j("open"),children:[e.jsx(y,{"data-loc":"client/src/pages/TicketManagement.tsx:943",className:"pb-3",children:e.jsx(D,{"data-loc":"client/src/pages/TicketManagement.tsx:944",className:"text-sm font-medium text-gray-400",children:"Offen"})}),e.jsx(N,{"data-loc":"client/src/pages/TicketManagement.tsx:946",children:e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:947",className:"text-3xl font-bold text-blue-400",children:U.open})})]}),e.jsxs(b,{"data-loc":"client/src/pages/TicketManagement.tsx:951",className:"bg-white/5 border-white/10 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>j("in_progress"),children:[e.jsx(y,{"data-loc":"client/src/pages/TicketManagement.tsx:955",className:"pb-3",children:e.jsx(D,{"data-loc":"client/src/pages/TicketManagement.tsx:956",className:"text-sm font-medium text-gray-400",children:"In Bearbeitung"})}),e.jsx(N,{"data-loc":"client/src/pages/TicketManagement.tsx:958",children:e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:959",className:"text-3xl font-bold text-yellow-400",children:U.inProgress})})]}),e.jsxs(b,{"data-loc":"client/src/pages/TicketManagement.tsx:963",className:"bg-white/5 border-white/10 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>j("resolved"),children:[e.jsx(y,{"data-loc":"client/src/pages/TicketManagement.tsx:967",className:"pb-3",children:e.jsx(D,{"data-loc":"client/src/pages/TicketManagement.tsx:968",className:"text-sm font-medium text-gray-400",children:"Gelöst"})}),e.jsx(N,{"data-loc":"client/src/pages/TicketManagement.tsx:970",children:e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:971",className:"text-3xl font-bold text-green-400",children:U.resolved})})]})]}),(a?.role==="admin"||a?.role==="support")&&ee[Y]?.showTickets&&e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:979",className:"mb-8",children:[e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:980",className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{"data-loc":"client/src/pages/TicketManagement.tsx:981",className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Pe,{"data-loc":"client/src/pages/TicketManagement.tsx:982",className:"h-5 w-5 text-primary"}),"Alle Tickets"]})}),e.jsx(b,{"data-loc":"client/src/pages/TicketManagement.tsx:988",className:"bg-gradient-to-br from-white/10 to-white/5 border-white/20 mb-6 backdrop-blur-sm",children:e.jsxs(N,{"data-loc":"client/src/pages/TicketManagement.tsx:989",className:"p-6 space-y-6",children:[e.jsx(Mt,{"data-loc":"client/src/pages/TicketManagement.tsx:991",filterType:"tickets",currentFilters:{search:l,status:C,priority:T,category:v},onApplyPreset:t=>{M(t.search||""),j(t.status),F(t.priority),P(t.category)}}),e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1007",className:"border-t border-white/10 pt-6"}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1009",className:"relative group",children:[e.jsx(bt,{"data-loc":"client/src/pages/TicketManagement.tsx:1010",className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-primary transition-colors","aria-hidden":"true"}),e.jsx("input",{"data-loc":"client/src/pages/TicketManagement.tsx:1011",type:"text",placeholder:"Suche nach Ticket-Nr, Betreff, Kunde, E-Mail...",value:l,onChange:t=>M(t.target.value),"aria-label":"Ticket-Suche",className:"w-full pl-12 pr-12 py-4 bg-black/30 border-2 border-white/10 rounded-xl text-white placeholder:text-gray-400 focus:outline-none focus:border-primary focus:bg-black/40 transition-all duration-200 text-base"}),l&&e.jsx("button",{"data-loc":"client/src/pages/TicketManagement.tsx:1020",onClick:()=>M(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors p-1 hover:bg-white/10 rounded-lg",children:e.jsx(te,{"data-loc":"client/src/pages/TicketManagement.tsx:1024",className:"h-5 w-5"})})]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1030",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1032",className:"space-y-2",children:[e.jsxs("label",{"data-loc":"client/src/pages/TicketManagement.tsx:1033",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1034",className:"p-1.5 bg-yellow-500/20 rounded-lg",children:e.jsx(ne,{"data-loc":"client/src/pages/TicketManagement.tsx:1035",className:"h-4 w-4 text-yellow-400"})}),"Priorität"]}),e.jsxs(L,{"data-loc":"client/src/pages/TicketManagement.tsx:1039",value:T||"all",onValueChange:t=>F(t==="all"?void 0:t),children:[e.jsx(A,{"data-loc":"client/src/pages/TicketManagement.tsx:1040",className:"bg-black/30 border-2 border-white/10 hover:border-white/20 transition-colors h-12 text-base",children:e.jsx(B,{"data-loc":"client/src/pages/TicketManagement.tsx:1041"})}),e.jsxs(E,{"data-loc":"client/src/pages/TicketManagement.tsx:1043",children:[e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1044",value:"all",children:"Alle"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1045",value:"low",children:"Niedrig"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1046",value:"medium",children:"Mittel"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1047",value:"high",children:"Hoch"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1048",value:"urgent",children:"Dringend"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1054",className:"space-y-2",children:[e.jsxs("label",{"data-loc":"client/src/pages/TicketManagement.tsx:1055",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1056",className:"p-1.5 bg-purple-500/20 rounded-lg",children:e.jsx(ne,{"data-loc":"client/src/pages/TicketManagement.tsx:1057",className:"h-4 w-4 text-purple-400"})}),"Kategorie"]}),e.jsxs(L,{"data-loc":"client/src/pages/TicketManagement.tsx:1061",value:v||"all",onValueChange:t=>P(t==="all"?void 0:t),children:[e.jsx(A,{"data-loc":"client/src/pages/TicketManagement.tsx:1062",className:"bg-black/30 border-2 border-white/10 hover:border-white/20 transition-colors h-12 text-base",children:e.jsx(B,{"data-loc":"client/src/pages/TicketManagement.tsx:1063"})}),e.jsxs(E,{"data-loc":"client/src/pages/TicketManagement.tsx:1065",children:[e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1066",value:"all",children:"Alle"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1067",value:"network",children:"Netzwerk"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1068",value:"security",children:"Sicherheit"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1069",value:"hardware",children:"Hardware"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1070",value:"software",children:"Software"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1071",value:"email",children:"E-Mail"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1072",value:"other",children:"Sonstiges"})]})]})]})]}),(l||T||v)&&e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1080",className:"flex items-center gap-3 flex-wrap p-4 bg-black/20 rounded-lg border border-white/10",children:[e.jsxs("span",{"data-loc":"client/src/pages/TicketManagement.tsx:1081",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[e.jsx(ne,{"data-loc":"client/src/pages/TicketManagement.tsx:1082",className:"h-4 w-4"}),"Aktive Filter:"]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1085",className:"flex gap-2 flex-wrap",children:[l&&e.jsx(z,{"data-loc":"client/src/pages/TicketManagement.tsx:1087",variant:"outline",className:"bg-primary/20 text-primary border-primary/30 px-3 py-1",children:l}),T&&e.jsx(z,{"data-loc":"client/src/pages/TicketManagement.tsx:1092",variant:"outline",className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30 px-3 py-1",children:T}),v&&e.jsx(z,{"data-loc":"client/src/pages/TicketManagement.tsx:1097",variant:"outline",className:"bg-purple-500/20 text-purple-400 border-purple-500/30 px-3 py-1",children:v}),e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:1101",variant:"ghost",size:"sm",onClick:()=>{M(""),F(void 0),P(void 0)},className:"h-7 text-xs hover:bg-white/10",children:[e.jsx(te,{"data-loc":"client/src/pages/TicketManagement.tsx:1111",className:"h-3 w-3 mr-1"}),"Zurücksetzen"]})]})]})]})}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1121",className:"mb-8",children:[e.jsxs(m,{"data-loc":"client/src/pages/TicketManagement.tsx:1122",variant:"outline",onClick:()=>H(!I),className:"mb-4 border-white/20 bg-white/5 hover:bg-white/10 w-full justify-between",children:[e.jsxs("span",{"data-loc":"client/src/pages/TicketManagement.tsx:1127",className:"flex items-center gap-2",children:[e.jsx(jt,{"data-loc":"client/src/pages/TicketManagement.tsx:1128",className:"h-4 w-4"}),"Detaillierte Statistiken"]}),I?e.jsx(ut,{"data-loc":"client/src/pages/TicketManagement.tsx:1131",className:"h-4 w-4"}):e.jsx(se,{"data-loc":"client/src/pages/TicketManagement.tsx:1131",className:"h-4 w-4"})]}),I&&e.jsx(ft,{"data-loc":"client/src/pages/TicketManagement.tsx:1133"})]}),k.length>0&&e.jsx(b,{"data-loc":"client/src/pages/TicketManagement.tsx:1138",className:"bg-blue-500/10 border-blue-500/30 mb-4",children:e.jsx(N,{"data-loc":"client/src/pages/TicketManagement.tsx:1139",className:"py-4",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1140",className:"flex flex-wrap items-center gap-4",children:[e.jsxs("span",{"data-loc":"client/src/pages/TicketManagement.tsx:1141",className:"text-white font-medium",children:[k.length," Ticket(s) ausgewählt"]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1144",className:"flex gap-2",children:[e.jsx(m,{"data-loc":"client/src/pages/TicketManagement.tsx:1145",size:"sm",variant:"outline",onClick:()=>r([]),className:"border-white/20 bg-white/5 hover:bg-white/10",children:"Auswahl aufheben"}),e.jsx(m,{"data-loc":"client/src/pages/TicketManagement.tsx:1153",size:"sm",variant:"outline",onClick:()=>{V&&r(V.map(t=>t.id))},className:"border-white/20 bg-white/5 hover:bg-white/10",children:"Alle auswählen"})]}),e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1166",className:"h-6 w-px bg-white/20"}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1168",className:"flex flex-wrap gap-2",children:[e.jsxs(L,{"data-loc":"client/src/pages/TicketManagement.tsx:1169",onValueChange:t=>Ze.mutate({ticketIds:k,status:t}),children:[e.jsx(A,{"data-loc":"client/src/pages/TicketManagement.tsx:1170",className:"w-[140px] h-9 bg-white/5 border-white/20",children:e.jsx(B,{"data-loc":"client/src/pages/TicketManagement.tsx:1171",placeholder:"Status ändern"})}),e.jsxs(E,{"data-loc":"client/src/pages/TicketManagement.tsx:1173",children:[e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1174",value:"open",children:"Offen"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1175",value:"in_progress",children:"In Bearbeitung"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1176",value:"resolved",children:"Gelöst"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1177",value:"closed",children:"Geschlossen"})]})]}),e.jsxs(L,{"data-loc":"client/src/pages/TicketManagement.tsx:1181",onValueChange:t=>Je.mutate({ticketIds:k,priority:t}),children:[e.jsx(A,{"data-loc":"client/src/pages/TicketManagement.tsx:1182",className:"w-[140px] h-9 bg-white/5 border-white/20",children:e.jsx(B,{"data-loc":"client/src/pages/TicketManagement.tsx:1183",placeholder:"Priorität ändern"})}),e.jsxs(E,{"data-loc":"client/src/pages/TicketManagement.tsx:1185",children:[e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1186",value:"low",children:"Niedrig"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1187",value:"medium",children:"Mittel"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1188",value:"high",children:"Hoch"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1189",value:"urgent",children:"Dringend"})]})]}),e.jsx(m,{"data-loc":"client/src/pages/TicketManagement.tsx:1193",size:"sm",variant:"destructive",onClick:()=>{confirm(`Möchten Sie ${k.length} Ticket(s) wirklich löschen?`)&&We.mutate({ticketIds:k})},children:"Löschen"})]})]})})}),!V||V.length===0?e.jsx(b,{"data-loc":"client/src/pages/TicketManagement.tsx:1211",className:"bg-white/5 border-white/10",children:e.jsxs(N,{"data-loc":"client/src/pages/TicketManagement.tsx:1212",className:"py-12 text-center",children:[e.jsx(Pe,{"data-loc":"client/src/pages/TicketManagement.tsx:1213",className:"h-12 w-12 mx-auto mb-4 text-gray-500"}),e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:1214",className:"text-gray-400",children:"Keine Tickets vorhanden."})]})}):e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1218",className:"grid gap-4",children:V.map(t=>e.jsx(b,{"data-loc":"client/src/pages/TicketManagement.tsx:1220",className:"bg-white/5 border-white/10 hover:bg-white/10 transition-colors",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1224",className:"flex items-start gap-3 p-6",children:[e.jsx("input",{"data-loc":"client/src/pages/TicketManagement.tsx:1225",type:"checkbox",checked:k.includes(t.id),"aria-label":`Ticket #${t.id} auswählen`,onChange:x=>{x.stopPropagation(),x.target.checked?r([...k,t.id]):r(k.filter(ke=>ke!==t.id))},className:"mt-1 h-4 w-4 rounded border-gray-300"}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1239",className:"flex-1 cursor-pointer",onClick:()=>g(t.id),children:[e.jsx(y,{"data-loc":"client/src/pages/TicketManagement.tsx:1240",children:e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1241",className:"flex flex-col md:flex-row md:justify-between md:items-start gap-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1242",className:"flex-1",children:[e.jsxs(D,{"data-loc":"client/src/pages/TicketManagement.tsx:1243",className:"text-white",children:["#",t.id," - ",t.subject]}),e.jsxs($,{"data-loc":"client/src/pages/TicketManagement.tsx:1244",className:"text-gray-400",children:["Von: ",t.customerName," (",t.customerEmail,")",t.company&&` - ${t.company}`]}),e.jsxs($,{"data-loc":"client/src/pages/TicketManagement.tsx:1248",className:"text-gray-400",children:["Erstellt: ",new Date(t.createdAt).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1258",className:"flex gap-2 flex-wrap",children:[e.jsx(z,{"data-loc":"client/src/pages/TicketManagement.tsx:1259",className:vt(t.category),children:Nt(t.category)}),e.jsx(z,{"data-loc":"client/src/pages/TicketManagement.tsx:1262",className:qe(t.priority),children:t.priority}),e.jsx(z,{"data-loc":"client/src/pages/TicketManagement.tsx:1265",className:_e(t.status),children:t.status==="in_progress"?"In Bearbeitung":t.status==="open"?"Offen":t.status==="resolved"?"Gelöst":"Geschlossen"}),t.slaDueDate&&t.status!=="resolved"&&t.status!=="closed"&&e.jsxs(z,{"data-loc":"client/src/pages/TicketManagement.tsx:1269",className:new Date(t.slaDueDate)<new Date?"bg-red-500/20 text-red-400 border-red-500/30":"bg-green-500/20 text-green-400 border-green-500/30",children:[e.jsx(be,{"data-loc":"client/src/pages/TicketManagement.tsx:1270",className:"h-3 w-3 mr-1"}),new Date(t.slaDueDate)<new Date?"Überfällig":`Fällig: ${new Date(t.slaDueDate).toLocaleDateString("de-DE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}`]}),t.escalationLevel&&t.escalationLevel>0&&e.jsxs(z,{"data-loc":"client/src/pages/TicketManagement.tsx:1275",className:"bg-orange-500/20 text-orange-400 border-orange-500/30",children:["Eskalation Level ",t.escalationLevel]})]})]})}),e.jsxs(N,{"data-loc":"client/src/pages/TicketManagement.tsx:1282",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1283",children:[e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:1284",className:"text-sm font-medium text-gray-400 mb-1",children:"Nachricht:"}),e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:1285",className:"text-gray-300",children:t.message})]}),t.adminNotes&&e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1289",children:[e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:1290",className:"text-sm font-medium text-gray-400 mb-1",children:"Admin-Notizen:"}),e.jsx("p",{"data-loc":"client/src/pages/TicketManagement.tsx:1291",className:"text-gray-300",children:t.adminNotes})]}),e.jsx("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1295",className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4 border-t border-white/10",children:e.jsx(m,{"data-loc":"client/src/pages/TicketManagement.tsx:1296",variant:"outline",onClick:()=>g(t.id),className:"border-white/20 bg-white/5 hover:bg-white/10",children:"Details & Kommentare"})}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1305",className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4 border-t border-white/10",children:[e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1306",className:"flex-1",children:[e.jsx("label",{"data-loc":"client/src/pages/TicketManagement.tsx:1307",className:"text-sm text-gray-400 mb-2 block",children:"Status ändern:"}),e.jsxs(L,{"data-loc":"client/src/pages/TicketManagement.tsx:1308",value:t.status,onValueChange:x=>{ue.mutate({id:t.id,status:x})},children:[e.jsx(A,{"data-loc":"client/src/pages/TicketManagement.tsx:1317",className:"bg-white/10 border-white/20",children:e.jsx(B,{"data-loc":"client/src/pages/TicketManagement.tsx:1318"})}),e.jsxs(E,{"data-loc":"client/src/pages/TicketManagement.tsx:1320",children:[e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1321",value:"open",children:"Offen"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1322",value:"in_progress",children:"In Bearbeitung"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1323",value:"resolved",children:"Gelöst"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1324",value:"closed",children:"Geschlossen"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1329",className:"flex-1",children:[e.jsx("label",{"data-loc":"client/src/pages/TicketManagement.tsx:1330",className:"text-sm text-gray-400 mb-2 block",children:"Priorität ändern:"}),e.jsxs(L,{"data-loc":"client/src/pages/TicketManagement.tsx:1331",value:t.priority,onValueChange:x=>{ue.mutate({id:t.id,priority:x})},children:[e.jsx(A,{"data-loc":"client/src/pages/TicketManagement.tsx:1340",className:"bg-white/10 border-white/20",children:e.jsx(B,{"data-loc":"client/src/pages/TicketManagement.tsx:1341"})}),e.jsxs(E,{"data-loc":"client/src/pages/TicketManagement.tsx:1343",children:[e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1344",value:"low",children:"Niedrig"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1345",value:"medium",children:"Mittel"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1346",value:"high",children:"Hoch"}),e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1347",value:"urgent",children:"Dringend"})]})]})]}),a?.role==="admin"&&e.jsxs("div",{"data-loc":"client/src/pages/TicketManagement.tsx:1353",className:"flex-1",children:[e.jsx("label",{"data-loc":"client/src/pages/TicketManagement.tsx:1354",className:"text-sm text-gray-400 mb-2 block",children:"Zugewiesen an:"}),e.jsxs(L,{"data-loc":"client/src/pages/TicketManagement.tsx:1355",value:t.assignedTo?.toString()||"unassigned",onValueChange:x=>{Ge.mutate({ticketId:t.id,assignedTo:x==="unassigned"?null:parseInt(x)})},children:[e.jsx(A,{"data-loc":"client/src/pages/TicketManagement.tsx:1364",className:"bg-white/10 border-white/20",children:e.jsx(B,{"data-loc":"client/src/pages/TicketManagement.tsx:1365"})}),e.jsxs(E,{"data-loc":"client/src/pages/TicketManagement.tsx:1367",children:[e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1368",value:"unassigned",children:"Nicht zugewiesen"}),Ue?.map(x=>e.jsx(s,{"data-loc":"client/src/pages/TicketManagement.tsx:1370",value:x.id.toString(),children:x.name||x.email},x.id))]})]})]})]})]})]})]})},t.id))})]})]}),p&&e.jsx(tt,{"data-loc":"client/src/pages/TicketManagement.tsx:1392",ticketId:p,onClose:()=>g(null)}),e.jsx(wt,{"data-loc":"client/src/pages/TicketManagement.tsx:1395",open:K,onOpenChange:c})]})}function vt(a){switch(a){case"network":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"security":return"bg-red-500/20 text-red-400 border-red-500/30";case"hardware":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"software":return"bg-green-500/20 text-green-400 border-green-500/30";case"email":return"bg-cyan-500/20 text-cyan-400 border-cyan-500/30";case"other":default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}}function Nt(a){switch(a){case"network":return"Netzwerk";case"security":return"Sicherheit";case"hardware":return"Hardware";case"software":return"Software";case"email":return"E-Mail";case"other":default:return"Sonstiges"}}export{wa as default};
