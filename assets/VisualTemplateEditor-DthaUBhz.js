const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmailBuilder-DhJgb8Lx.js","assets/index-BN9GAmQT.js","assets/index-BmZWpvp-.css","assets/EmailBuilder-DutjtH23.css"])))=>i.map(i=>d[i]);
import{x as e,j as o,_ as V,J as f,al as w,N as p,A as c}from"./index-BN9GAmQT.js";import{B as g}from"./button-B7XicF_D.js";import{I as T}from"./input-DAxyQcQ6.js";import{L as u}from"./label-WV9rmlgK.js";import{S as C,a as N,b as S,c as k,d as L}from"./select-lpC4X7iX.js";import{C as v}from"./card-DDCG5iAJ.js";import{L as B}from"./loader-circle-ClqFH6Ch.js";import{D as P,a as z,b as D,c as _}from"./dialog-BFxkyGdG.js";import{A}from"./arrow-left-DYl8JD6p.js";import{E as F}from"./eye-DH5-FCbl.js";import{S as I}from"./save-DcPehqtW.js";import"./index-Ci_qB1WW.js";import"./index-BxbciWQS.js";import"./index-DYYK5dbJ.js";import"./index-DkLA8Hun.js";import"./index-FM6g0UGI.js";import"./chevron-up-CGjsbtlF.js";import"./check-B0XS7teL.js";const M=o.lazy(()=>V(()=>import("./EmailBuilder-DhJgb8Lx.js"),__vite__mapDeps([0,1,2,3])));function O(s){return e.jsx(o.Suspense,{"data-loc":"client/src/components/EmailBuilderLazy.tsx:15",fallback:e.jsx("div",{"data-loc":"client/src/components/EmailBuilderLazy.tsx:17",className:"flex items-center justify-center h-[700px] bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{"data-loc":"client/src/components/EmailBuilderLazy.tsx:18",className:"text-center",children:[e.jsx(B,{"data-loc":"client/src/components/EmailBuilderLazy.tsx:19",className:"w-8 h-8 animate-spin mx-auto mb-4 text-indigo-600"}),e.jsx("p",{"data-loc":"client/src/components/EmailBuilderLazy.tsx:20",className:"text-sm text-gray-600 dark:text-gray-400",children:"E-Mail-Builder wird geladen..."})]})}),children:e.jsx(M,{"data-loc":"client/src/components/EmailBuilderLazy.tsx:27",...s})})}const $=[{value:"newsletter",label:"Newsletter"},{value:"promotional",label:"Promotional"},{value:"announcement",label:"Announcement"},{value:"transactional",label:"Transactional"},{value:"other",label:"Other"}];function re(){const[,s]=f(),x=w(),l=x.id==="new"?null:Number(x.id),[t,i]=o.useState({name:"",description:"",category:"",htmlContent:"",cssContent:""}),[y,h]=o.useState(!1),{data:r}=p.newsletter.templates.list.useQuery(void 0,{enabled:!!l,select:a=>a.find(m=>m.id===l)});o.useState(()=>{r&&i({name:r.name,description:r.description||"",category:r.category||"",htmlContent:r.htmlContent,cssContent:""})});const n=p.newsletter.templates.create.useMutation({onSuccess:()=>{c.success("Template erfolgreich erstellt"),s("/newsletter/templates")},onError:a=>{c.error(`Fehler: ${a.message}`)}}),d=p.newsletter.templates.update.useMutation({onSuccess:()=>{c.success("Template erfolgreich aktualisiert"),s("/newsletter/templates")},onError:a=>{c.error(`Fehler: ${a.message}`)}}),E=()=>{if(!t.name||!t.htmlContent){c.error("Name und Inhalt sind erforderlich");return}const a=`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${t.name}</title>
  <style>${t.cssContent}</style>
</head>
<body>
  ${t.htmlContent}
</body>
</html>`;l?d.mutate({id:l,name:t.name,description:t.description||void 0,category:t.category||void 0,htmlContent:a}):n.mutate({name:t.name,description:t.description||void 0,category:t.category||void 0,htmlContent:a})},j=(a,m)=>{i({...t,htmlContent:a,cssContent:m})},b=()=>`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>${t.cssContent}</style>
</head>
<body style="margin: 0; padding: 0; font-family: Arial, sans-serif;">
  ${t.htmlContent}
</body>
</html>`;return e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:153",className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[e.jsx("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:155",className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:e.jsx("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:156",className:"container mx-auto px-6 py-4",children:e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:157",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:158",className:"flex items-center gap-4",children:[e.jsxs(g,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:159",onClick:()=>s("/newsletter/templates"),variant:"ghost",size:"sm",children:[e.jsx(A,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:164",className:"w-4 h-4 mr-2"}),"Zurück"]}),e.jsx("h1",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:167",className:"text-2xl font-bold text-gray-900 dark:text-white",children:l?"Template bearbeiten":"Neues Template erstellen"})]}),e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:171",className:"flex items-center gap-2",children:[e.jsxs(g,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:172",onClick:()=>h(!0),variant:"outline",disabled:!t.htmlContent,children:[e.jsx(F,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:177",className:"w-4 h-4 mr-2"}),"Vorschau"]}),e.jsxs(g,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:180",onClick:E,disabled:n.isPending||d.isPending,className:"bg-indigo-600 hover:bg-indigo-700",children:[e.jsx(I,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:185",className:"w-4 h-4 mr-2"}),n.isPending||d.isPending?"Speichere...":"Speichern"]})]})]})})}),e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:196",className:"container mx-auto px-6 py-6",children:[e.jsxs(v,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:197",className:"p-6 mb-6 bg-white dark:bg-gray-800",children:[e.jsx("h2",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:198",className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Template-Einstellungen"}),e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:201",className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:202",children:[e.jsx(u,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:203",htmlFor:"name",children:"Template-Name *"}),e.jsx(T,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:204",id:"name",placeholder:"z.B. Monatlicher Newsletter",value:t.name,onChange:a=>i({...t,name:a.target.value}),className:"mt-2"})]}),e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:214",children:[e.jsx(u,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:215",htmlFor:"category",children:"Kategorie"}),e.jsxs(C,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:216",value:t.category,onValueChange:a=>i({...t,category:a}),children:[e.jsx(N,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:222",className:"mt-2",children:e.jsx(S,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:223",placeholder:"Kategorie wählen"})}),e.jsx(k,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:225",children:$.map(a=>e.jsx(L,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:227",value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:234",children:[e.jsx(u,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:235",htmlFor:"description",children:"Beschreibung"}),e.jsx(T,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:236",id:"description",placeholder:"Optionale Beschreibung",value:t.description,onChange:a=>i({...t,description:a.target.value}),className:"mt-2"})]})]})]}),e.jsx(v,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:253",className:"p-0 bg-white dark:bg-gray-800 overflow-hidden",children:e.jsx(O,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:254",initialContent:t.htmlContent,onChange:j,onSave:E})})]}),e.jsx(P,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:263",open:y,onOpenChange:h,children:e.jsxs(z,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:264",className:"max-w-4xl max-h-[90vh]",children:[e.jsx(D,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:265",children:e.jsx(_,{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:266",children:"Template-Vorschau"})}),e.jsx("div",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:268",className:"border rounded-lg overflow-hidden bg-white",children:e.jsx("iframe",{"data-loc":"client/src/pages/VisualTemplateEditor.tsx:269",srcDoc:b(),className:"w-full h-[600px] border-0",title:"Template Preview"})})]})})]})}export{re as default};
