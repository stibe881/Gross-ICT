import{j as d,N as u,x as e}from"./index-BN9GAmQT.js";import{C as c}from"./card-DDCG5iAJ.js";import{B as o}from"./button-B7XicF_D.js";import{B as a}from"./badge-DuBy3M6P.js";import{S as m}from"./skeleton-B4p3r7MP.js";import{M as L}from"./mail-fgvT38PL.js";import{T as b}from"./trending-up-q9Xt4TNZ.js";import{C as j}from"./circle-x-vF5gbwUM.js";import{C as w}from"./calendar-lP7qctBn.js";import{R as C,C as S,X as T,Y as k,T as B,L as E,B as R}from"./generateCategoricalChart-B5qIq3um.js";import{B as z}from"./BarChart-UulCzpsw.js";import{C as F}from"./circle-alert-CBZAY2D5.js";import{C as A}from"./circle-check-big-DSSwzQTT.js";import"./index-Ci_qB1WW.js";import"./index-CqUluVxK.js";function q(){const[l,r]=d.useState(1),[g,x]=d.useState(),[p,h]=d.useState(),{data:n,isLoading:f}=u.reminderLog.list.useQuery({page:l,pageSize:20,status:g,reminderType:p}),{data:t,isLoading:N}=u.reminderLog.getStatistics.useQuery({days:30});if(N)return e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:29",className:"container py-8",children:[e.jsx("h1",{"data-loc":"client/src/pages/ReminderLog.tsx:30",className:"text-3xl font-bold mb-8",children:"Zahlungserinnerungs-Log"}),e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:31",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((s,i)=>e.jsxs(c,{"data-loc":"client/src/pages/ReminderLog.tsx:33",className:"p-6",children:[e.jsx(m,{"data-loc":"client/src/pages/ReminderLog.tsx:34",className:"h-4 w-24 mb-2"}),e.jsx(m,{"data-loc":"client/src/pages/ReminderLog.tsx:35",className:"h-8 w-32"})]},i))})]});const v=s=>{switch(s){case"sent":return e.jsxs(a,{"data-loc":"client/src/pages/ReminderLog.tsx:46",className:"bg-green-500",children:[e.jsx(A,{"data-loc":"client/src/pages/ReminderLog.tsx:46",className:"h-3 w-3 mr-1"}),"Gesendet"]});case"failed":return e.jsxs(a,{"data-loc":"client/src/pages/ReminderLog.tsx:48",variant:"destructive",children:[e.jsx(j,{"data-loc":"client/src/pages/ReminderLog.tsx:48",className:"h-3 w-3 mr-1"}),"Fehlgeschlagen"]});case"bounced":return e.jsxs(a,{"data-loc":"client/src/pages/ReminderLog.tsx:50",variant:"outline",children:[e.jsx(F,{"data-loc":"client/src/pages/ReminderLog.tsx:50",className:"h-3 w-3 mr-1"}),"Zurückgewiesen"]});default:return e.jsx(a,{"data-loc":"client/src/pages/ReminderLog.tsx:52",variant:"secondary",children:s})}},y=s=>{switch(s){case"1st":return e.jsx(a,{"data-loc":"client/src/pages/ReminderLog.tsx:59",variant:"outline",className:"bg-blue-50",children:"1. Erinnerung"});case"2nd":return e.jsx(a,{"data-loc":"client/src/pages/ReminderLog.tsx:61",variant:"outline",className:"bg-orange-50",children:"2. Erinnerung"});case"final":return e.jsx(a,{"data-loc":"client/src/pages/ReminderLog.tsx:63",variant:"outline",className:"bg-red-50",children:"Letzte Mahnung"});default:return e.jsx(a,{"data-loc":"client/src/pages/ReminderLog.tsx:65",variant:"secondary",children:s})}};return e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:70",className:"container py-8",children:[e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:71",className:"flex justify-between items-center mb-8",children:e.jsx("h1",{"data-loc":"client/src/pages/ReminderLog.tsx:72",className:"text-3xl font-bold",children:"Zahlungserinnerungs-Log"})}),e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:76",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(c,{"data-loc":"client/src/pages/ReminderLog.tsx:77",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:78",className:"flex items-center justify-between mb-2",children:[e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:79",className:"text-sm font-medium text-muted-foreground",children:"Gesamt gesendet"}),e.jsx(L,{"data-loc":"client/src/pages/ReminderLog.tsx:80",className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:82",className:"text-2xl font-bold",children:t?.totalSent||0}),e.jsx("p",{"data-loc":"client/src/pages/ReminderLog.tsx:83",className:"text-xs text-muted-foreground mt-1",children:"Letzte 30 Tage"})]}),e.jsxs(c,{"data-loc":"client/src/pages/ReminderLog.tsx:86",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:87",className:"flex items-center justify-between mb-2",children:[e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:88",className:"text-sm font-medium text-muted-foreground",children:"Erfolgsrate"}),e.jsx(b,{"data-loc":"client/src/pages/ReminderLog.tsx:89",className:"h-4 w-4 text-green-600"})]}),e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:91",className:"text-2xl font-bold text-green-600",children:[t?.successRate||0,"%"]}),e.jsxs("p",{"data-loc":"client/src/pages/ReminderLog.tsx:94",className:"text-xs text-muted-foreground mt-1",children:[t?t.totalSent-t.totalFailed-t.totalBounced:0," erfolgreich"]})]}),e.jsxs(c,{"data-loc":"client/src/pages/ReminderLog.tsx:99",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:100",className:"flex items-center justify-between mb-2",children:[e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:101",className:"text-sm font-medium text-muted-foreground",children:"Fehlgeschlagen"}),e.jsx(j,{"data-loc":"client/src/pages/ReminderLog.tsx:102",className:"h-4 w-4 text-red-600"})]}),e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:104",className:"text-2xl font-bold text-red-600",children:t?.totalFailed||0}),e.jsxs("p",{"data-loc":"client/src/pages/ReminderLog.tsx:105",className:"text-xs text-muted-foreground mt-1",children:[t?.totalBounced||0," zurückgewiesen"]})]}),e.jsxs(c,{"data-loc":"client/src/pages/ReminderLog.tsx:110",className:"p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:111",className:"flex items-center justify-between mb-2",children:[e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:112",className:"text-sm font-medium text-muted-foreground",children:"Nach Typ"}),e.jsx(w,{"data-loc":"client/src/pages/ReminderLog.tsx:113",className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:115",className:"space-y-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:116",className:"flex justify-between text-sm",children:[e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:117",children:"1. Erinnerung:"}),e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:118",className:"font-medium",children:t?.byType.first||0})]}),e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:120",className:"flex justify-between text-sm",children:[e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:121",children:"2. Erinnerung:"}),e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:122",className:"font-medium",children:t?.byType.second||0})]}),e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:124",className:"flex justify-between text-sm",children:[e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:125",children:"Letzte Mahnung:"}),e.jsx("span",{"data-loc":"client/src/pages/ReminderLog.tsx:126",className:"font-medium",children:t?.byType.final||0})]})]})]})]}),t&&t.dailyStats&&t.dailyStats.length>0&&e.jsxs(c,{"data-loc":"client/src/pages/ReminderLog.tsx:134",className:"p-6 mb-8",children:[e.jsx("h3",{"data-loc":"client/src/pages/ReminderLog.tsx:135",className:"text-lg font-semibold mb-4",children:"Tägliche Statistik (Letzte 30 Tage)"}),e.jsx(C,{"data-loc":"client/src/pages/ReminderLog.tsx:136",width:"100%",height:300,children:e.jsxs(z,{"data-loc":"client/src/pages/ReminderLog.tsx:137",data:t.dailyStats,children:[e.jsx(S,{"data-loc":"client/src/pages/ReminderLog.tsx:138",strokeDasharray:"3 3"}),e.jsx(T,{"data-loc":"client/src/pages/ReminderLog.tsx:139",dataKey:"date"}),e.jsx(k,{"data-loc":"client/src/pages/ReminderLog.tsx:140"}),e.jsx(B,{"data-loc":"client/src/pages/ReminderLog.tsx:141"}),e.jsx(E,{"data-loc":"client/src/pages/ReminderLog.tsx:142"}),e.jsx(R,{"data-loc":"client/src/pages/ReminderLog.tsx:143",dataKey:"sent",fill:"#22c55e",name:"Gesendet"}),e.jsx(R,{"data-loc":"client/src/pages/ReminderLog.tsx:144",dataKey:"failed",fill:"#ef4444",name:"Fehlgeschlagen"})]})})]}),e.jsx(c,{"data-loc":"client/src/pages/ReminderLog.tsx:151",className:"p-6 mb-6",children:e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:152",className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:153",className:"flex-1 min-w-[200px]",children:[e.jsx("label",{"data-loc":"client/src/pages/ReminderLog.tsx:154",className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs("select",{"data-loc":"client/src/pages/ReminderLog.tsx:155",className:"w-full px-3 py-2 border rounded-md",value:g||"",onChange:s=>x(s.target.value||void 0),children:[e.jsx("option",{"data-loc":"client/src/pages/ReminderLog.tsx:160",value:"",children:"Alle"}),e.jsx("option",{"data-loc":"client/src/pages/ReminderLog.tsx:161",value:"sent",children:"Gesendet"}),e.jsx("option",{"data-loc":"client/src/pages/ReminderLog.tsx:162",value:"failed",children:"Fehlgeschlagen"}),e.jsx("option",{"data-loc":"client/src/pages/ReminderLog.tsx:163",value:"bounced",children:"Zurückgewiesen"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:167",className:"flex-1 min-w-[200px]",children:[e.jsx("label",{"data-loc":"client/src/pages/ReminderLog.tsx:168",className:"text-sm font-medium mb-2 block",children:"Typ"}),e.jsxs("select",{"data-loc":"client/src/pages/ReminderLog.tsx:169",className:"w-full px-3 py-2 border rounded-md",value:p||"",onChange:s=>h(s.target.value||void 0),children:[e.jsx("option",{"data-loc":"client/src/pages/ReminderLog.tsx:174",value:"",children:"Alle"}),e.jsx("option",{"data-loc":"client/src/pages/ReminderLog.tsx:175",value:"1st",children:"1. Erinnerung"}),e.jsx("option",{"data-loc":"client/src/pages/ReminderLog.tsx:176",value:"2nd",children:"2. Erinnerung"}),e.jsx("option",{"data-loc":"client/src/pages/ReminderLog.tsx:177",value:"final",children:"Letzte Mahnung"})]})]}),e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:181",className:"flex items-end",children:e.jsx(o,{"data-loc":"client/src/pages/ReminderLog.tsx:182",variant:"outline",onClick:()=>{x(void 0),h(void 0),r(1)},children:"Filter zurücksetzen"})})]})}),e.jsxs(c,{"data-loc":"client/src/pages/ReminderLog.tsx:197",className:"p-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/ReminderLog.tsx:198",className:"text-lg font-semibold mb-4",children:"Erinnerungs-Verlauf"}),f?e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:201",className:"space-y-4",children:[...Array(5)].map((s,i)=>e.jsx(m,{"data-loc":"client/src/pages/ReminderLog.tsx:203",className:"h-16 w-full"},i))}):n&&n.logs.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:208",className:"overflow-x-auto",children:e.jsxs("table",{"data-loc":"client/src/pages/ReminderLog.tsx:209",className:"w-full",children:[e.jsx("thead",{"data-loc":"client/src/pages/ReminderLog.tsx:210",children:e.jsxs("tr",{"data-loc":"client/src/pages/ReminderLog.tsx:211",className:"border-b",children:[e.jsx("th",{"data-loc":"client/src/pages/ReminderLog.tsx:212",className:"text-left py-3 px-4",children:"Datum"}),e.jsx("th",{"data-loc":"client/src/pages/ReminderLog.tsx:213",className:"text-left py-3 px-4",children:"Kunde"}),e.jsx("th",{"data-loc":"client/src/pages/ReminderLog.tsx:214",className:"text-left py-3 px-4",children:"Rechnung"}),e.jsx("th",{"data-loc":"client/src/pages/ReminderLog.tsx:215",className:"text-left py-3 px-4",children:"Typ"}),e.jsx("th",{"data-loc":"client/src/pages/ReminderLog.tsx:216",className:"text-left py-3 px-4",children:"Betrag"}),e.jsx("th",{"data-loc":"client/src/pages/ReminderLog.tsx:217",className:"text-left py-3 px-4",children:"Tage überfällig"}),e.jsx("th",{"data-loc":"client/src/pages/ReminderLog.tsx:218",className:"text-left py-3 px-4",children:"Status"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/ReminderLog.tsx:221",children:n.logs.map(s=>e.jsxs("tr",{"data-loc":"client/src/pages/ReminderLog.tsx:223",className:"border-b hover:bg-muted/50",children:[e.jsx("td",{"data-loc":"client/src/pages/ReminderLog.tsx:224",className:"py-3 px-4",children:new Date(s.sentAt).toLocaleDateString("de-CH",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{"data-loc":"client/src/pages/ReminderLog.tsx:233",className:"py-3 px-4",children:e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:234",children:[e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:235",className:"font-medium",children:s.customerName}),e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:236",className:"text-sm text-muted-foreground",children:s.customerEmail})]})}),e.jsx("td",{"data-loc":"client/src/pages/ReminderLog.tsx:239",className:"py-3 px-4 font-mono",children:s.invoiceNumber}),e.jsx("td",{"data-loc":"client/src/pages/ReminderLog.tsx:240",className:"py-3 px-4",children:y(s.reminderType)}),e.jsxs("td",{"data-loc":"client/src/pages/ReminderLog.tsx:241",className:"py-3 px-4 font-medium",children:["CHF ",parseFloat(s.invoiceAmount).toFixed(2)]}),e.jsx("td",{"data-loc":"client/src/pages/ReminderLog.tsx:244",className:"py-3 px-4",children:e.jsxs(a,{"data-loc":"client/src/pages/ReminderLog.tsx:245",variant:s.daysOverdue>21?"destructive":"outline",children:[s.daysOverdue," Tage"]})}),e.jsxs("td",{"data-loc":"client/src/pages/ReminderLog.tsx:249",className:"py-3 px-4",children:[v(s.status),s.errorMessage&&e.jsx("div",{"data-loc":"client/src/pages/ReminderLog.tsx:252",className:"text-xs text-red-600 mt-1",children:s.errorMessage})]})]},s.id))})]})}),e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:262",className:"flex justify-between items-center mt-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:263",className:"text-sm text-muted-foreground",children:["Seite ",n.page," von ",n.totalPages," (",n.total," Einträge)"]}),e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:266",className:"flex gap-2",children:[e.jsx(o,{"data-loc":"client/src/pages/ReminderLog.tsx:267",variant:"outline",size:"sm",disabled:l===1,onClick:()=>r(l-1),children:"Zurück"}),e.jsx(o,{"data-loc":"client/src/pages/ReminderLog.tsx:275",variant:"outline",size:"sm",disabled:l>=n.totalPages,onClick:()=>r(l+1),children:"Weiter"})]})]})]}):e.jsxs("div",{"data-loc":"client/src/pages/ReminderLog.tsx:287",className:"text-center py-12 text-muted-foreground",children:[e.jsx(L,{"data-loc":"client/src/pages/ReminderLog.tsx:288",className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{"data-loc":"client/src/pages/ReminderLog.tsx:289",children:"Keine Erinnerungen gefunden"})]})]})]})}export{q as default};
